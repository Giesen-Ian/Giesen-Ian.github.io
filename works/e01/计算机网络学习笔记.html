<!doctype html>
<html style='font-size:13px !important'>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; --monospace:"Lucida Console",Consolas,"Courier",monospace; --title-bar-height:20px; }
.mac-os-11 { --title-bar-height:28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror-linenumber { user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: none; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: none; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex:2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.42857rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left: 28px solid transparent; border-right: 28px solid transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right: 8px solid transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }


/* cyrillic-ext */

/* cyrillic */

/* greek-ext */

/* greek */

/* vietnamese */

/* latin-ext */

/* latin */

/* cyrillic-ext */

/* cyrillic */

/* greek-ext */

/* greek */

/* vietnamese */

/* latin-ext */

/* latin */

/* cyrillic-ext */

/* cyrillic */

/* greek-ext */

/* greek */

/* vietnamese */

/* latin-ext */

/* latin */

/* cyrillic-ext */

/* cyrillic */

/* greek-ext */

/* greek */

/* vietnamese */

/* latin-ext */

/* latin */

@font-face {
    font-family: 'Source Han SerifCN';
    src: local('Source Han SerifCN Bold'), local('SourceHanSerifCN-Bold'), url('file:///C://Users//Admin//AppData//Roaming//Typora/themes/giesen/SourceHanSerifCN-Bold.woff2') format('woff2');
    font-weight: bold;
    font-style: normal;
}@import '';
:root {
    --side-bar-bg-color: #eee8d5; 
    --control-text-color: #777;
    --select-text-bg-color: #ffafa3;
    --active-file-text-color: #262626;
    --active-file-border-color: #f22f27;
    --active-file-bg-color: #fdf6e3;
    /* 中性色 */
    --mid-1: #ffffff;
    --mid-2: #fafafa;
    --mid-3: #f5f5f5;
    --mid-4: #f0f0f0;
    --mid-5: #d9d9d9;
    --mid-6: #bfbfbf;
    --mid-7: #8c8c8c;
    --mid-8: #595959;
    --mid-9: #434343;
    --mid-10: #262626;
    --mid-11: #1f1f1f;
    --mid-12: #141414;
    --mid-13: #000000;
    /* 主题色 */
    --main-4: #ff887a;
    --main-6: #f22f27; /* 主要颜色，桔红色  */
    --main-7: #cc1616;
    --main-10: #590009;
    /* 其他颜色  */
    --math-fomula: #20B2AA; /* 数学公式，#20B2AA为春绿色  */
}

html {
    font-size: 16px;
    background-color: var(--active-file-bg-color)!important;
}

body {
    font-family: "Vollkorn", Palatino, Times;
    /* font-family: 'Source Han SerifCN', Georgia, Times, 'SimSun', serif!important; */
    color: var(--mid-13);
        background-color: var(--active-file-bg-color)!important;
    -webkit-font-smoothing: antialiased;
    line-height: 1.8rem;
    letter-spacing: 0;
    margin: 0;
    overflow-x: hidden;
}

#write {
    max-width: 860px;
    margin: 0 auto;
    padding: 20px 30px 160px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write p {
    line-height: 1.8rem;
    word-spacing: .05rem;
    /* color: #3f3f3f; */
    color: var(--mid-13);
}


#write>ul:first-child,
#write>ol:first-child {
    margin-top: 30px;
}

body>*:first-child {
    margin-top: 0 !important;
}

body>*:last-child {
    margin-bottom: 0 !important;
}


/* 链接 */
a {
    color: var(--main-6);
    font-weight: 500;
    padding: 0 2px;
    text-decoration: none;
}

#write a {
    color: var(--main-6);
    text-decoration: none;
}

#write a:hover {
    border-bottom: 1px solid var(--main-6);
    color: var(--main-7);
    text-decoration: none;
}


/* 目录 */
#write a.md-toc-inner {
    line-height: 1.6;
    white-space: pre-line;
    border-bottom: none;
}


/* 标题 */
h1, h2, h3, h4, h5, h6 {
    position: relative;
    margin-top: 0.75rem;
    margin-bottom: 0.75rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
    text-decoration: none;
}

h1 tt, h1 code, h2 tt, h2 code, h3 tt, h3 code, h4 tt, h4 code, h5 tt, h5 code, h6 tt, h6 code {
    font-size: inherit !important;
}

h2 a, h3 a {
    color: #34495e;
}

/* h1标题 */
h1::before {
    content: '##  '!important;
    color: #f22f27;
}

h1 {
    text-align: center;
    padding-bottom: 0.3em;
    font-size: 2.2em;
    line-height: 1.2;
    margin: 3.0em auto 0.6em;
    color: var(--main-10);
}

h1:after {
    content: '';
    display: block;
    margin: 0.2em auto 0;
    width: 100px;
    height: 2px;
    border-bottom: 2px solid var(--main-6);
}

/* h2标题 */
h2::before {
    content: '#  '!important;
    color: #f22f27;
}

h2 {
    margin: 1.2em auto 1.0em;
    line-height: 1.4;
    font-size: 1.8em;
    border-bottom: 2px solid var(--main-6);
    color: var(--main-10);
}

/* h3标题 */
h3 {
    font-size: 1.65em;
    line-height: 1.43;
    margin: 1.2em auto 0.8em;
    padding-left: 9px;
    border-left: 16px solid #f22f27;
    display: block;
    color: var(--main-10);
}

/* h4标题 */
h4 {
    font-size: 1.4em;
    padding-left: 6px;
    padding-right: 6px;
    margin: 1.0em auto 0.6em;
    border-left: 4px solid #f22f27;
    display: block;
    color: var(--main-10);
}

/* h5标题 */
h5::before {
    content: '>>  '!important;
    color: #f22f27;
    font-weight: 1000;
}

h5 {
    font-size: 1.3rem;
    color: var(--main-10);
    margin: 0.8em auto 0.6em;
}

h5::after {
    content: '  <<'!important;
    color: #f22f27;
    font-weight: 1000;
}

/* h6标题 */
h6::before {
    content: '>  '!important;
    color: #f22f27;
    font-weight: 1000;
    margin: 0.8em auto 0.6em;
}

h6 {
    font-size: 1.1rem;
    color: var(--main-10);
}

h6::after {
    content: '  <'!important;
    color: #f22f27;
    font-weight: 1000;
}


p,
blockquote,
ul,
ol,
dl,
table {
    margin: 0.8em 0;
}

li>ol,
li>ul {
    margin: 0 0;
}

hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

body>h2:first-child {
    margin-top: 0;
    padding-top: 0;
}

body>h1:first-child {
    margin-top: 0;
    padding-top: 0;
}

body>h1:first-child+h2 {
    margin-top: 0;
    padding-top: 0;
}

body>h3:first-child,
body>h4:first-child,
body>h5:first-child,
body>h6:first-child {
    margin-top: 0;
    padding-top: 0;
}

a:first-child h1,
a:first-child h2,
a:first-child h3,
a:first-child h4,
a:first-child h5,
a:first-child h6 {
    margin-top: 0;
    padding-top: 0;
}

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
    margin-top: 0;
}

#write ol,
#write ul {
    padding-left: 25px;
    margin: .5rem 0;
}

#write ol>li,
#write ul>li {
    color: #db4d52;
    font-weight: bold;
}

#write ol>li>*,
#write ul>li>* {
    color: #333;
    font-weight: normal;
}

#write ol>li>*:not(ol):not(ul),
#write ul>li>*:not(ol):not(ul) {
    padding-left: .25rem;
}

#write ul {
    list-style-type: disc;
}

blockquote {
    border-left: 4px solid rgb(239, 112, 96);
    padding: 10px 15px;
    color: #3f3f3f;
    background-color: #FFFFF0;
}

table {
    padding: 0;
    word-break: initial;
}

table tr {
    border-top: 1px solid var(--main-6);
    margin: 0;
    padding: 0;
}

table tr:nth-child(2n),
thead {
    background-color: #fafafa;
}

table tr th {
    font-weight: bold;
    border: 1px solid var(--main-6);
    border-bottom: 0;
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr td {
    border: 1px solid var(--main-6);
    text-align: left;
    margin: 0;
    padding: 6px 13px;
}

table tr th:first-child,
table tr td:first-child {
    margin-top: 0;
}

table tr th:last-child,
table tr td:last-child {
    margin-bottom: 0;
}

#write strong {
    padding: 0.1em;
    color: #dc3545;
}




/* 数学公式变春绿色 */

[md-inline='inline_math'] {
    color: var(--math-fomula);
    font-size: 100%;
}


/* 表格第一行 */

/* #write table thead th {
    background-color: var(--main-7);
    color: #f8f8f8;
} */


/* 行号左框线 */
#write .CodeMirror-gutters {
    border-right: 1px solid rgba(204, 51, 0);
}


/* 代码框 */

#write .md-fences {
    border: 1px solid #7a7a7a;
    -webkit-font-smoothing: initial;
    margin: 2rem 0 !important;
    /* padding: 0.3rem 0 !important; */
    padding: 3px 5px;
    line-height: 1.55rem;
    border-radius: 2px;
    font-family: 'Roboto Mono', 'Source Sans Pro', 'Microsoft YaHei', '微软雅黑' !important;
    font-size: 0.9rem;
    word-wrap: normal;
}

#write [mdtype="math_block"] {
    font-size: 1.2rem;
}

#write .CodeMirror-wrap .CodeMirror-code pre {
    padding-left: 12px;
    line-height: 1.55rem;
}

.cm-s-inner .CodeMirror-linenumber {
    width: 2ch !important;
    color: rgba(128, 128, 255, 0.8);
}

#write .CodeMirror-cursors .CodeMirror-cursor {
    border-left: 2px solid var(--main-4);
}


/* 行间代码 */

#write code,
tt {
    padding: 2px 4px;
    border-radius: 2px;
    font-family: 'Source Code Pro', Roboto Mono, Source Sans Pro, 'Microsoft YaHei', '微软雅黑' !important;
    font-size: 0.92rem;
    color: #ff3502;
    background-color: #f8f5ec;
    /* color: #c7254e;
    background-color: #f9f2f4;  */
}

tt {
    margin: 0 2px;
}

#write .md-footnote {
    background-color: #f8f8f8;
    color: #e96900;
}


/* 流程图块 */

#write .md-diagram-panel {
    position: relative;
    margin: 24px auto;
}

#write .md-focus .md-diagram-panel {
    border: 1px solid var(--main-4);
    border-radius: 4px;
}


/* heighlight. */

#write mark {
    background-color: #EBFFEB;
    border-radius: 2px;
    padding: 2px 4px;
    margin: 0 2px;
    color: #222;
    font-weight: 500;
}

#write del {
    padding: 1px 2px;
}

.cm-s-inner .cm-link,
.cm-s-inner.cm-link {
    color: #22a2c9;
}

.cm-s-inner .cm-string {
    color: #22a2c9;
}


/* 任务列表小方框 */

.md-task-list-item>input {
    margin-left: -1.3 em;
    margin-top: 0.3rem;
    -webkit-appearance: none;
}

.md-task-list-item>input:before {
    content: '';
    display: inline-block;
    width: 0.875rem;
    height: 0.875rem;
    vertical-align: middle;
    text-align: center;
    font-size: 0.8rem;
    color: var(--mid-1);
    border-radius: 2px;
    border: 1px solid var(--main-4);
    margin-top: -0.4rem;
    transition: all 0.2s linear;
}

.md-task-list-item>input:checked:before,
.md-task-list-item>input[checked]:before {
    content: '\2714';
    font-size: 0.625rem;
    color: var(--mid-1);
    border: 1px solid var(--main-6);
    background-color: var(--main-6);
}


#write pre.md-meta-block {
    /* padding: 1rem; */
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
    bottom: .375rem;
    /* bottom: .575rem; */
}

#write>h3.md-focus:before {
    left: -1.5625rem;
    top: .375rem;
}

#write>h4.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write>h5.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}

#write>h6.md-focus:before {
    left: -1.5625rem;
    top: .285714286rem;
}


/*--- 图片 ---*/

.md-image {
    margin: 2px auto;
    border-radius: 4px;
}

.md-image img {
    border-radius: 4px;
}


/* 当 “![shadow-随便写]()”写时，会有阴影 */

.md-image img[alt|='shadow'] {
    /* box-shadow: 0 4px 24px -6px #ddd; */
    box-shadow: #84A1A8 0px 10px 15px;
}

.md-image>.md-meta {
    border-radius: 3px;
    font-family: Consolas, 'Liberation Mono', Courier, monospace;
    padding: 2px 0 0 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: inherit;
}

.md-toc {
    margin-top: 20px;
    padding-bottom: 20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

#md-notification:before {
    top: 10px;
}


/** focus mode */

.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header,
.context-menu,
.megamenu-content,
footer {
    font-family: 'Segoe UI', 'Arial', sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state {
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: var(--side-bar-bg-color);
}

.md-lang {
    color: #b4654d;
}

.html-for-mac .context-menu {
    --item-hover-bg-color: #e6f0fe;
}


/* 侧边栏 */

.file-list-item.active {
    background: var(--active-file-bg-color);
    color: var(--active-file-text-color);
    border-left: 4px solid var(--main-6);
}

.file-tree-node.active>.file-node-background {
    background-color: var(--active-file-bg-color);
    border-left: 4px solid var(--main-6);
    border-color: var(--active-file-border-color);
}

/* 导出pdf的页边距 */
@page {
     margin: 8mm 0mm;
}

@media print {
    .typora-export * {
        -webkit-print-color-adjust: exact;
        background: #fdf6e3!important;
    }
    html {
        font-size: 16px!important;
        background: #fdf6e3!important;
    }
    body {
        font-family: Times, 'SimSun', serif!important;
        color: #000000!important; 
        background: #fdf6e3!important;
    }
    p {
        color: #000000!important;
    }
    a {
        color: var(--main-6)!important;
        font-weight: 500;
        padding: 0 2px;
        text-decoration: none;
    }
    table, pre {
        page-break-inside: avoid;
    }
    pre {
        word-wrap: break-word;
    }
}


[contenteditable]:focus{outline: none;}


mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
  min-height: 1px;
  min-width: 1px;
}

mjx-container[jax="SVG"] > svg a {
  fill: blue;
  stroke: blue;
}

mjx-assistive-mml {
  position: absolute !important;
  top: 0px;
  left: 0px;
  clip: rect(1px, 1px, 1px, 1px);
  padding: 1px 0px 0px 0px !important;
  border: 0px !important;
  display: block !important;
  width: auto !important;
  overflow: hidden !important;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

mjx-assistive-mml[display="block"] {
  width: 100% !important;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][display="true"][width="full"] {
  display: flex;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line], svg[data-table] > g > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame], svg[data-table] > g > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed, svg[data-table] > g > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted, svg[data-table] > g > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > g > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

mjx-container[jax="SVG2"] path[data-c], mjx-container[jax="SVG2"] use[data-c] {
  stroke-width: 3;
}

g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}

.MathJax g[data-mml-node="xypic"] path {
  stroke-width: inherit;
}
mjx-container[jax="SVG"] path[data-c], mjx-container[jax="SVG"] use[data-c] {
							stroke-width: 0;
						}
</style><title>计算机网络学习笔记</title>
</head>
<body class='typora-export os-windows'><div class='typora-export-content'>
<div id='write'  class=''><p><strong><span>计算机网络 学习笔记</span></strong></p><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n4"><a class="md-toc-inner" href="#第一章-计网体系结构">第一章 计网体系结构</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n6"><a class="md-toc-inner" href="#1-1-计算机网络概述">1-1 计算机网络概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n7"><a class="md-toc-inner" href="#1-11-概念与功能">1-1.1 概念与功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n8"><a class="md-toc-inner" href="#1计算机网络的概念">1、计算机网络的概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n11"><a class="md-toc-inner" href="#2计网的功能">2、计网的功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n15"><a class="md-toc-inner" href="#3计算机网络的发展">3、计算机网络的发展</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n22"><a class="md-toc-inner" href="#1-12-组成与分类">1-1.2 组成与分类</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n23"><a class="md-toc-inner" href="#1组成部分">1、组成部分</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n25"><a class="md-toc-inner" href="#2工作方式">2、工作方式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n29"><a class="md-toc-inner" href="#3功能组成">3、功能组成</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n39"><a class="md-toc-inner" href="#4分类">4、分类</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n47"><a class="md-toc-inner" href="#1-13-标准化工作以及相关组织">1-1.3 标准化工作以及相关组织</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n48"><a class="md-toc-inner" href="#1标准化工作">1、标准化工作</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n52"><a class="md-toc-inner" href="#2标准化工作的相关组织">2、标准化工作的相关组织</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n63"><a class="md-toc-inner" href="#1-14-性能指标">1-1.4 性能指标</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n64"><a class="md-toc-inner" href="#1速率">1、速率</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n67"><a class="md-toc-inner" href="#2带宽">2、带宽</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n69"><a class="md-toc-inner" href="#3吞吐量">3、吞吐量</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n71"><a class="md-toc-inner" href="#4时延">4、时延</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n93"><a class="md-toc-inner" href="#5时延带宽积">5、时延带宽积</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n95"><a class="md-toc-inner" href="#6往返时延rttround-trip-time）">6、往返时延（RTT，Round-Trip Time）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n99"><a class="md-toc-inner" href="#7利用率">7、利用率</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n108"><a class="md-toc-inner" href="#1-2-体系结构参考模型">1-2 体系结构&amp;参考模型</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n109"><a class="md-toc-inner" href="#1-21-分层结构协议接口与服务">1-2.1 分层结构、协议、接口与服务</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n117"><a class="md-toc-inner" href="#1分层结构">1、分层结构</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n119"><a class="md-toc-inner" href="#1实体">1.实体</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n121"><a class="md-toc-inner" href="#2协议">2.协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n130"><a class="md-toc-inner" href="#3接口访问服务点sap）">3.接口（访问服务点，SAP）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n133"><a class="md-toc-inner" href="#4服务">4.服务</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n143"><a class="md-toc-inner" href="#5数据的构成">5.数据的构成</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n164"><a class="md-toc-inner" href="#1-22-osi参考模型">1-2.2 OSI参考模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n166"><a class="md-toc-inner" href="#2osi模型">2、OSI模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n172"><a class="md-toc-inner" href="#★-3osi模型中每层的功能"><mark><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.136ex" height="1.821ex" role="img" focusable="false" viewBox="0 -694 944 805" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.251ex;"><defs><path id="MJX-12-TEX-I-2605" d="M367 395Q374 416 398 492T442 627T463 688Q463 692 467 692Q471 694 472 694Q478 694 484 680T523 562Q553 469 576 400L577 395H731H819Q872 395 883 394T895 384Q895 380 891 376T832 333Q794 305 767 285Q643 195 643 194L690 47Q737 -96 737 -103Q737 -111 727 -111Q721 -111 594 -18L472 71L350 -18Q223 -111 217 -111Q207 -111 207 -103Q207 -96 254 47L301 194Q301 195 241 239T118 328T51 378Q49 382 49 384Q49 392 58 393T110 395H213H367Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="2605" xlink:href="#MJX-12-TEX-I-2605"></use></g></g></g></svg></mjx-container><script type="math/tex">\bigstar</script>3、OSI模型中每层的功能</mark></a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n176"><a class="md-toc-inner" href="#1物理层">1、物理层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n189"><a class="md-toc-inner" href="#2数据链路层">2、数据链路层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n200"><a class="md-toc-inner" href="#3网络层">3、网络层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n211"><a class="md-toc-inner" href="#4传输层">4、传输层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n223"><a class="md-toc-inner" href="#5会话层">5、会话层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n232"><a class="md-toc-inner" href="#6表示层">6、表示层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n234"><a class="md-toc-inner" href="#7应用层">7、应用层</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n236"><a class="md-toc-inner" href="#8总结">8、总结</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n392"><a class="md-toc-inner" href="#1-23-tcpip参考模型">1-2.3 TCP/IP参考模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n393"><a class="md-toc-inner" href="#1两种模型的对比">1、两种模型的对比</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n396"><a class="md-toc-inner" href="#1相同点">1、相同点</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n404"><a class="md-toc-inner" href="#2不同点">2、不同点</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n428"><a class="md-toc-inner" href="#2--5层参考模型">2 -5层参考模型</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n433"><a class="md-toc-inner" href="#chapter-2-物理层">Chapter 2 物理层</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n435"><a class="md-toc-inner" href="#2-1-通信基础">2-1 通信基础</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n436"><a class="md-toc-inner" href="#2-11-物理层基本概念">2-1.1 物理层基本概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n437"><a class="md-toc-inner" href="#1物理层接口特性">1、物理层接口特性</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n451"><a class="md-toc-inner" href="#2-12-数据通信">2-1.2 数据通信</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n452"><a class="md-toc-inner" href="#1典型模型">1、典型模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n456"><a class="md-toc-inner" href="#2相关术语">2、相关术语</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n462"><a class="md-toc-inner" href="#3通信方式">3、通信方式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n472"><a class="md-toc-inner" href="#4传输">4、传输</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n495"><a class="md-toc-inner" href="#5码元">5、码元</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n500"><a class="md-toc-inner" href="#6速率与波特">6、速率与波特</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n507"><a class="md-toc-inner" href="#7带宽">7、带宽</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n516"><a class="md-toc-inner" href="#2-13-奈氏准则和香农定理">2-1.3 奈氏准则和香农定理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n517"><a class="md-toc-inner" href="#1失真">1、失真</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n531"><a class="md-toc-inner" href="#2码间串扰">2、码间串扰</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n534"><a class="md-toc-inner" href="#3奈氏准则">3、奈氏准则</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n547"><a class="md-toc-inner" href="#4香农定理">4、香农定理</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n555"><a class="md-toc-inner" href="#5两个定理的联系与区别">5、两个定理的联系与区别</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n580"><a class="md-toc-inner" href="#2-14-数据的编码与调制">2-1.4 数据的编码与调制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n581"><a class="md-toc-inner" href="#1基带信号与宽带信号">1、基带信号与宽带信号</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n591"><a class="md-toc-inner" href="#2编码和调制">2、编码和调制</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n595"><a class="md-toc-inner" href="#1数字数据编码为数字信号">1、数字数据编码为数字信号</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n611"><a class="md-toc-inner" href="#2数字数据调制为模拟信号">2、数字数据调制为模拟信号</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n625"><a class="md-toc-inner" href="#3模拟数据编码为数字信号">3、模拟数据编码为数字信号</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n635"><a class="md-toc-inner" href="#4模拟数据调制为模拟信号">4、模拟数据调制为模拟信号</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n638"><a class="md-toc-inner" href="#2-15-数据交换方式">2-1.5 数据交换方式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n641"><a class="md-toc-inner" href="#1电路交换">1、电路交换</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n649"><a class="md-toc-inner" href="#2报文交换">2、报文交换</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n654"><a class="md-toc-inner" href="#3分组交换">3、分组交换</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n660"><a class="md-toc-inner" href="#1数据报方式">1、数据报方式</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n662"><a class="md-toc-inner" href="#步骤">步骤</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n673"><a class="md-toc-inner" href="#特点">特点</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n685"><a class="md-toc-inner" href="#2虚电路方式">2、虚电路方式</a></span><span role="listitem" class="md-toc-item md-toc-h6" data-ref="n689"><a class="md-toc-inner" href="#特点-2">特点</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n704"><a class="md-toc-inner" href="#4三种方式的比较">4、三种方式的比较</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n710"><a class="md-toc-inner" href="#2-2-物理层的传输">2-2 物理层的传输</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n711"><a class="md-toc-inner" href="#2-21-物理层的传输介质">2-2.1 物理层的传输介质</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n714"><a class="md-toc-inner" href="#1导向性传输介质">1、导向性传输介质</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n729"><a class="md-toc-inner" href="#2非导向性传输介质">2、非导向性传输介质</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n740"><a class="md-toc-inner" href="#2-22-物理层的传输设备">2-2.2 物理层的传输设备</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n741"><a class="md-toc-inner" href="#1中继器">1、中继器</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n748"><a class="md-toc-inner" href="#2集线器多口中继器）">2、集线器（多口中继器）</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n756"><a class="md-toc-inner" href="#chapter-3-数据链路层">Chapter 3 数据链路层</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n758"><a class="md-toc-inner" href="#3-1-数据链路层的功能">3-1 数据链路层的功能</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n759"><a class="md-toc-inner" href="#3-11-概述">3-1.1 概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n760"><a class="md-toc-inner" href="#1研究思想">1、研究思想</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n763"><a class="md-toc-inner" href="#2基本概念">2、基本概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n773"><a class="md-toc-inner" href="#3功能概述">3、功能概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n790"><a class="md-toc-inner" href="#3-1-2-组帧和透明传输">3-1-2 组帧和透明传输</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n791"><a class="md-toc-inner" href="#1封装成帧">1、封装成帧</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n798"><a class="md-toc-inner" href="#2透明传输">2、透明传输</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n801"><a class="md-toc-inner" href="#1字符计数法字节计数法）">1.字符计数法（字节计数法）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n805"><a class="md-toc-inner" href="#2字符填充法">2.字符填充法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n813"><a class="md-toc-inner" href="#3零比特填充法比特填充）">3.零比特填充法（比特填充）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n822"><a class="md-toc-inner" href="#4违规编码法">4.违规编码法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n825"><a class="md-toc-inner" href="#3-13-差错控制和检错编码">3-1.3 差错控制和检错编码</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n826"><a class="md-toc-inner" href="#1差错">1、差错</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n827"><a class="md-toc-inner" href="#1产生原因">1.产生原因</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n834"><a class="md-toc-inner" href="#2差错分类">2.差错分类</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n843"><a class="md-toc-inner" href="#2差错控制---检错编码">2、差错控制 - 检错编码</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n845"><a class="md-toc-inner" href="#1物理层数据链路层的编码的区别">1.物理层、数据链路层的编码的区别</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n860"><a class="md-toc-inner" href="#2奇偶校验码">2.奇偶校验码</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n865"><a class="md-toc-inner" href="#3crc校验码">3.CRC校验码</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n883"><a class="md-toc-inner" href="#3差错控制---纠错编码">3、差错控制 - 纠错编码</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n885"><a class="md-toc-inner" href="#1码矩海明距离）">1.码矩（海明距离）</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n896"><a class="md-toc-inner" href="#2确认检验码位数r">2.确认检验码位数r</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n900"><a class="md-toc-inner" href="#3确定校验码和数据的位置">3.确定校验码和数据的位置</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n906"><a class="md-toc-inner" href="#5检错和纠错">5.检错和纠错</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n912"><a class="md-toc-inner" href="#3-2-流量控制可靠传输机制和三种协议">3-2 流量控制、可靠传输机制和三种协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n913"><a class="md-toc-inner" href="#3-21-流量控制与可靠传输">3-2.1 流量控制与可靠传输</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n920"><a class="md-toc-inner" href="#1停止-等待协议简介">1、停止-等待协议简介</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n923"><a class="md-toc-inner" href="#2-滑动窗口协议简介">2 滑动窗口协议简介</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n936"><a class="md-toc-inner" href="#3-22-停止-等待协议">3-2.2 停止-等待协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n937"><a class="md-toc-inner" href="#1停止-等待协议的使用场景">1、停止-等待协议的使用场景</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n947"><a class="md-toc-inner" href="#2无差错情况">2、无差错情况</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n950"><a class="md-toc-inner" href="#3有差错情况1-数据帧丢失或者帧出错">3、有差错情况1-数据帧丢失或者帧出错</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n955"><a class="md-toc-inner" href="#4有差错情况2-ack丢失">4、有差错情况2-ACK丢失</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n958"><a class="md-toc-inner" href="#5有差错情况3-ack迟到">5、有差错情况3-ACK迟到</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n962"><a class="md-toc-inner" href="#6性能分析">6、性能分析</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n967"><a class="md-toc-inner" href="#3-23-后退n帧协议gbn）">3-2.3 后退N帧协议（GBN）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n968"><a class="md-toc-inner" href="#1改进停止-等待协议">1、改进停止-等待协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n977"><a class="md-toc-inner" href="#2滑动窗口">2、滑动窗口</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n988"><a class="md-toc-inner" href="#3发送方需要的响应">3、发送方需要的响应</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n989"><a class="md-toc-inner" href="#1上层的调用">1.上层的调用</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n993"><a class="md-toc-inner" href="#2收到了一个ack">2.收到了一个ACK</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n995"><a class="md-toc-inner" href="#3超时事件">3.超时事件</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n999"><a class="md-toc-inner" href="#4接收方需要的响应">4、接收方需要的响应</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1005"><a class="md-toc-inner" href="#5举例">5、举例</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1010"><a class="md-toc-inner" href="#3-24-选择重传协议sr）">3-2.4 选择重传协议（SR）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1011"><a class="md-toc-inner" href="#1对gbn的改进">1、对GBN的改进</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1022"><a class="md-toc-inner" href="#2滑动窗口-2">2、滑动窗口</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1026"><a class="md-toc-inner" href="#3发送方需要的响应-2">3、发送方需要的响应</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1027"><a class="md-toc-inner" href="#1上层的调用-2">1.上层的调用</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1031"><a class="md-toc-inner" href="#2收到了一个ack-2">2.收到了一个ACK</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1035"><a class="md-toc-inner" href="#3超时事件-2">3.超时事件</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1037"><a class="md-toc-inner" href="#4接收方要做的事">4、接收方要做的事</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1041"><a class="md-toc-inner" href="#5举例-2">5、举例</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1045"><a class="md-toc-inner" href="#3-3-数据链路层的介质访问控制mac）">3-3 数据链路层的介质访问控制（MAC）</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1046"><a class="md-toc-inner" href="#3-31-概述">3-3.1 概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1047"><a class="md-toc-inner" href="#1传输数据使用的两种链路">1、传输数据使用的两种链路</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1050"><a class="md-toc-inner" href="#2介质访问控制的方法">2、介质访问控制的方法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1053"><a class="md-toc-inner" href="#1静态划分信道简介">1.静态划分信道简介</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1056"><a class="md-toc-inner" href="#2动态分配信道简介">2.动态分配信道简介</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1059"><a class="md-toc-inner" href="#3-32-静态划分-信道划分的介质访问控制">3-3.2 静态划分-信道划分的介质访问控制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1060"><a class="md-toc-inner" href="#1名词解释">1、名词解释</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1063"><a class="md-toc-inner" href="#2频分多路复用fdmfrequency-division-multiplexing）">2、频分多路复用（FDM，frequency division multiplexing）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1067"><a class="md-toc-inner" href="#3时分多路复用tdm）和统计时分复用stdm）">3、时分多路复用（TDM）和统计时分复用（STDM）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1074"><a class="md-toc-inner" href="#4波分多路复用wdm）">4、波分多路复用（WDM）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1077"><a class="md-toc-inner" href="#5码分多路复用cdm）">5、码分多路复用（CDM）</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1094"><a class="md-toc-inner" href="#3-33-动态划分-随机访问介质访问控制">3-3.3 动态划分-随机访问介质访问控制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1097"><a class="md-toc-inner" href="#1纯aloha协议和时隙aloha协议">1、纯ALOHA协议和时隙ALOHA协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1119"><a class="md-toc-inner" href="#2-3种csma协议">2-3种CSMA协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1126"><a class="md-toc-inner" href="#1-1坚持csma">1-1坚持CSMA</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1136"><a class="md-toc-inner" href="#2非坚持csma">2.非坚持CSMA</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1145"><a class="md-toc-inner" href="#3p-坚持csma">3.p-坚持CSMA</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1160"><a class="md-toc-inner" href="#3csmacd协议">3、CSMA/CD协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1161"><a class="md-toc-inner" href="#1csmacd协议和csma协议的异同">1.CSMA/CD协议和CSMA协议的异同</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1171"><a class="md-toc-inner" href="#2传播时延影响监听">2.传播时延影响监听</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1176"><a class="md-toc-inner" href="#3确定碰撞后的重传时机------截断二进制指数规避算法">3.确定碰撞后的重传时机——截断二进制指数规避算法</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1188"><a class="md-toc-inner" href="#4最小帧长问题">4.最小帧长问题</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1193"><a class="md-toc-inner" href="#4csmaca协议">4、CSMA/CA协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1194"><a class="md-toc-inner" href="#1与csmacd协议的异同">1.与CSMA/CD协议的异同</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1215"><a class="md-toc-inner" href="#2ifs">2.IFS</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1224"><a class="md-toc-inner" href="#3工作原理">3.工作原理</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1238"><a class="md-toc-inner" href="#3-34-动态划分-轮询访问介质访问控制">3-3.4 动态划分-轮询访问介质访问控制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1239"><a class="md-toc-inner" href="#1介质访问控制协议">1、介质访问控制协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1267"><a class="md-toc-inner" href="#2轮询协议">2、轮询协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1271"><a class="md-toc-inner" href="#3令牌传递协议">3、令牌传递协议</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1296"><a class="md-toc-inner" href="#3-4-数据链路层的应用">3-4 数据链路层的应用</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1297"><a class="md-toc-inner" href="#3-41-局域网lan">3-4.1 局域网LAN</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1298"><a class="md-toc-inner" href="#1概念介绍">1、概念介绍</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1312"><a class="md-toc-inner" href="#1网络拓扑">1.网络拓扑</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1324"><a class="md-toc-inner" href="#2传输介质">2.传输介质</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1330"><a class="md-toc-inner" href="#3局域网介质访问控制方法">3.局域网介质访问控制方法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1338"><a class="md-toc-inner" href="#2-分类">2 、分类</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1350"><a class="md-toc-inner" href="#3关于ieee-802系列标准">3、关于IEEE 802系列标准</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1370"><a class="md-toc-inner" href="#3-42-以太网">3-4.2 以太网</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1371"><a class="md-toc-inner" href="#1概述">1、概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1394"><a class="md-toc-inner" href="#2以太网的服务与拓扑">2、以太网的服务与拓扑</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1404"><a class="md-toc-inner" href="#3四种base网络的传输介质">3、四种BASE网络的传输介质</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1444"><a class="md-toc-inner" href="#4适配器与mac地址">4、适配器与MAC地址</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1456"><a class="md-toc-inner" href="#5以太网mac帧">5、以太网MAC帧</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1464"><a class="md-toc-inner" href="#3-43-无线局域网wlan">3-4.3 无线局域网WLAN</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1466"><a class="md-toc-inner" href="#180211协议的mac帧">1、802.11协议的MAC帧</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1493"><a class="md-toc-inner" href="#2分类">2、分类</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1518"><a class="md-toc-inner" href="#3-44-虚拟局域网vlan">3-4.4 虚拟局域网VLAN</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1527"><a class="md-toc-inner" href="#3-45-广域网wan">3-4.5 广域网WAN</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1528"><a class="md-toc-inner" href="#1广域网的概念">1、广域网的概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1560"><a class="md-toc-inner" href="#2ppp协议">2、PPP协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1561"><a class="md-toc-inner" href="#1协议满足的要求">1.协议满足的要求</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1589"><a class="md-toc-inner" href="#2三个组成部分">2.三个组成部分</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1597"><a class="md-toc-inner" href="#3状态图与工作时分">3.状态图与工作时分</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1599"><a class="md-toc-inner" href="#4帧格式">4.帧格式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1602"><a class="md-toc-inner" href="#3hdlc协议">3、HDLC协议</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1603"><a class="md-toc-inner" href="#1概念">1.概念</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1612"><a class="md-toc-inner" href="#2hdlc协议的站">2.HDLC协议的站</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1628"><a class="md-toc-inner" href="#3帧格式">3.帧格式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1639"><a class="md-toc-inner" href="#3ppp协议和hdlc协议的异同">3、PPP协议和HDLC协议的异同</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1669"><a class="md-toc-inner" href="#3-5-数据链路层的设备">3-5 数据链路层的设备</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1670"><a class="md-toc-inner" href="#3-51-物理层扩展以太网">3-5.1 物理层扩展以太网</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1676"><a class="md-toc-inner" href="#3-52--链路层扩展以太网">3-5.2  链路层扩展以太网</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1677"><a class="md-toc-inner" href="#1网桥">1、网桥</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1678"><a class="md-toc-inner" href="#1网桥的功能">1.网桥的功能</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1692"><a class="md-toc-inner" href="#2透明网桥">2.透明网桥</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n1708"><a class="md-toc-inner" href="#3源路由网桥">3.源路由网桥</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1711"><a class="md-toc-inner" href="#2多接口网桥------以太网交换机">2、多接口网桥——以太网交换机</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1730"><a class="md-toc-inner" href="#3冲突域和广播域">3、冲突域和广播域</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1753"><a class="md-toc-inner" href="#chapter-4-网络层">Chapter 4 网络层</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1755"><a class="md-toc-inner" href="#4-1-概述和功能">4-1 概述和功能</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1756"><a class="md-toc-inner" href="#4-11-概述">4-1.1 概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1787"><a class="md-toc-inner" href="#4-12-sdn的基本概念">4-1.2 SDN的基本概念</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1801"><a class="md-toc-inner" href="#4-2-网络层的两种数据报">4-2 网络层的两种数据报</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1803"><a class="md-toc-inner" href="#4-21-ipv4数据报">4-2.1 IPv4数据报</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1804"><a class="md-toc-inner" href="#1ip数据报的首部">1、IP数据报的首部</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1834"><a class="md-toc-inner" href="#2ip数据报的分片">2、IP数据报的分片</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1853"><a class="md-toc-inner" href="#4-22-分类的ip地址">4-2.2 分类的IP地址 </a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1854"><a class="md-toc-inner" href="#1ipv4地址">1、IPv4地址</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1901"><a class="md-toc-inner" href="#2私有ip地址和nat转换">2、私有IP地址和NAT转换</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1912"><a class="md-toc-inner" href="#4-23-子网掩码和子网划分">4-2.3 子网掩码和子网划分</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1913"><a class="md-toc-inner" href="#1子网掩码">1、子网掩码</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1921"><a class="md-toc-inner" href="#2使用子网时分组的转发">2、使用子网时分组的转发</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1940"><a class="md-toc-inner" href="#4-24-ipv6数据报">4-2.4 IPv6数据报</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1941"><a class="md-toc-inner" href="#1ipv4需要改进之处">1、IPv4需要改进之处</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1945"><a class="md-toc-inner" href="#2ipv6数据报格式">2、IPv6数据报格式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1965"><a class="md-toc-inner" href="#3和ipv4的区别">3、和IPv4的区别</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1989"><a class="md-toc-inner" href="#4ipv6的表示">4、IPv6的表示</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n1994"><a class="md-toc-inner" href="#5ipv6基本地址类型">5、IPv6基本地址类型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2002"><a class="md-toc-inner" href="#6ipv6和ipv4过渡策略">6、IPv6和IPv4过渡策略</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2021"><a class="md-toc-inner" href="#4-3-ip相关协议">4-3 IP相关协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2023"><a class="md-toc-inner" href="#4-31-无分类编址cidr">4-3.1 无分类编址CIDR</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2024"><a class="md-toc-inner" href="#1cidr的概念">1、CIDR的概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2031"><a class="md-toc-inner" href="#2构成超网">2、构成超网</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2033"><a class="md-toc-inner" href="#3最长前缀匹配">3、最长前缀匹配</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2035"><a class="md-toc-inner" href="#4-32-arp协议">4-3.2 ARP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2036"><a class="md-toc-inner" href="#1发送数据的过程">1、发送数据的过程</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2063"><a class="md-toc-inner" href="#2arp协议">2、ARP协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2084"><a class="md-toc-inner" href="#4-33-dhcp协议">4-3.3 DHCP协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2110"><a class="md-toc-inner" href="#4-34-icmp协议">4-3.4 ICMP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2111"><a class="md-toc-inner" href="#1icmp协议">1、ICMP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2117"><a class="md-toc-inner" href="#2icmp差错报告报文">2、ICMP差错报告报文</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2154"><a class="md-toc-inner" href="#3icmp询问报文">3、ICMP询问报文</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2165"><a class="md-toc-inner" href="#4icmp的应用">4、ICMP的应用</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2168"><a class="md-toc-inner" href="#4-4--路由算法及分组协议">4-4  路由算法及分组协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2169"><a class="md-toc-inner" href="#4-41-概述">4-4.1 概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2206"><a class="md-toc-inner" href="#4-42-igp之一rip协议和距离向量算法">4-4.2 IGP之一：RIP协议和距离向量算法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2207"><a class="md-toc-inner" href="#1rip协议">1、RIP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2241"><a class="md-toc-inner" href="#2路由表的更新距离向量算法">2、路由表的更新：距离向量算法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2271"><a class="md-toc-inner" href="#4-43-igp之二ospf协议和链路状态算法">4-4.3 IGP之二：OSPF协议和链路状态算法</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2272"><a class="md-toc-inner" href="#1ospf协议">1、OSPF协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2299"><a class="md-toc-inner" href="#2ospf协议的区域">2、OSPF协议的区域</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2303"><a class="md-toc-inner" href="#3ospf协议的分组报文）格式">3、OSPF协议的分组（报文）格式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2307"><a class="md-toc-inner" href="#4链路状态路由算法">4、链路状态路由算法</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2330"><a class="md-toc-inner" href="#4-44-egpbgp协议">4-4.4 EGP：BGP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2331"><a class="md-toc-inner" href="#1bgp协议">1、BGP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2355"><a class="md-toc-inner" href="#2bgp协议交换信息的过程">2、BGP协议交换信息的过程</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2363"><a class="md-toc-inner" href="#3bgp协议的分组报文）格式">3、BGP协议的分组（报文）格式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2367"><a class="md-toc-inner" href="#4bgp-4协议的四种报文">4、BGP-4协议的四种报文</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2377"><a class="md-toc-inner" href="#4-45-三种路由协议的比较">4-4.5 三种路由协议的比较</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2387"><a class="md-toc-inner" href="#4-5-ip组播与igmp协议">4-5 IP组播与IGMP协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2388"><a class="md-toc-inner" href="#4-51-ip组播">4-5.1 IP组播</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2389"><a class="md-toc-inner" href="#1ip数据报的传输方式">1、IP数据报的传输方式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2416"><a class="md-toc-inner" href="#2ip组播地址">2、IP组播地址</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2428"><a class="md-toc-inner" href="#3硬件组播">3、硬件组播</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2439"><a class="md-toc-inner" href="#4-52-igmp协议与组播路由选择协议">4-5.2 IGMP协议与组播路由选择协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2440"><a class="md-toc-inner" href="#1igmp协议简介">1、IGMP协议简介</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2466"><a class="md-toc-inner" href="#2组播路由选择协议">2、组播路由选择协议</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2479"><a class="md-toc-inner" href="#4-6-网络层相关应用">4-6 网络层相关应用</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2480"><a class="md-toc-inner" href="#4-61-移动ip">4-6.1 移动IP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2481"><a class="md-toc-inner" href="#1相关概念">1、相关概念</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2494"><a class="md-toc-inner" href="#2移动ip的分配">2、移动IP的分配</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2525"><a class="md-toc-inner" href="#4-62-路由器">4-6.2 路由器</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2526"><a class="md-toc-inner" href="#1路由器的介绍">1、路由器的介绍</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2552"><a class="md-toc-inner" href="#2路由表和路由转发">2、路由表和路由转发</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n2555"><a class="md-toc-inner" href="#chapter-5-传输层">Chapter 5 传输层</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2557"><a class="md-toc-inner" href="#5-1-概述和功能">5-1 概述和功能</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2558"><a class="md-toc-inner" href="#1概述-2">1、概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2570"><a class="md-toc-inner" href="#2两个重要协议">2、两个重要协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2584"><a class="md-toc-inner" href="#3传输层的寻址与端口">3、传输层的寻址与端口</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2606"><a class="md-toc-inner" href="#5-2-传输层的协议">5-2 传输层的协议</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2607"><a class="md-toc-inner" href="#5-21-udp协议">5-2.1 UDP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2608"><a class="md-toc-inner" href="#1概述-3">1、概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2628"><a class="md-toc-inner" href="#2udp校验和">2、UDP校验和</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2666"><a class="md-toc-inner" href="#5-22-tcp协议">5-2.2 TCP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2667"><a class="md-toc-inner" href="#1tcp协议的特点">1、TCP协议的特点</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2684"><a class="md-toc-inner" href="#2tcp报文段">2、TCP报文段</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2721"><a class="md-toc-inner" href="#3tcp连接建立与数据传输">3、TCP连接建立与数据传输</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2741"><a class="md-toc-inner" href="#4tcp的连接释放">4、TCP的连接释放</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2753"><a class="md-toc-inner" href="#5tcp的可靠传输">5、TCP的可靠传输</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2769"><a class="md-toc-inner" href="#6tcp的流量控制">6、TCP的流量控制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2784"><a class="md-toc-inner" href="#7tcp的拥塞控制">7、TCP的拥塞控制</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n2814"><a class="md-toc-inner" href="#chapter-6-应用层">Chapter 6 应用层</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2816"><a class="md-toc-inner" href="#6-1-概述与网络应用模型">6-1 概述与网络应用模型</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2817"><a class="md-toc-inner" href="#6-11-应用层的功能和协议概述">6-1.1 应用层的功能和协议概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2839"><a class="md-toc-inner" href="#6-12-网络应用模型">6-1.2 网络应用模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2840"><a class="md-toc-inner" href="#1客户服务器cs）模型">1、客户/服务器（C/S）模型</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2855"><a class="md-toc-inner" href="#2对等p2ppeer-to-peer）模型">2、对等（P2P，Peer-to-Peer）模型</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2868"><a class="md-toc-inner" href="#6-2-应用层的应用">6-2 应用层的应用</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2869"><a class="md-toc-inner" href="#6-21-dns域名解析系统）">6-2.1 DNS（域名解析系统）</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2870"><a class="md-toc-inner" href="#1dns系统简介">1、DNS系统简介</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2873"><a class="md-toc-inner" href="#2域名与域名服务器">2、域名与域名服务器</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2889"><a class="md-toc-inner" href="#3域名的解析过程">3、域名的解析过程</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2906"><a class="md-toc-inner" href="#6-22-ftp文件传送）协议">6-2.2 FTP（文件传送）协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2907"><a class="md-toc-inner" href="#1ftp协议">1、FTP协议</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2918"><a class="md-toc-inner" href="#2工作原理">2、工作原理</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2949"><a class="md-toc-inner" href="#6-23-电子邮件">6-2.3 电子邮件</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2950"><a class="md-toc-inner" href="#1电子邮件的机制">1、电子邮件的机制</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2955"><a class="md-toc-inner" href="#2相关协议------smtp">2、相关协议——SMTP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2970"><a class="md-toc-inner" href="#3相关协议------mime">3、相关协议——MIME</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2982"><a class="md-toc-inner" href="#4相关协议------pop3与imap">4、相关协议——POP3与IMAP</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2989"><a class="md-toc-inner" href="#5基于万维网的电子邮件">5、基于万维网的电子邮件</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n2993"><a class="md-toc-inner" href="#6-24-万维网">6-2.4 万维网</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2994"><a class="md-toc-inner" href="#1万维网概述">1、万维网概述</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3000"><a class="md-toc-inner" href="#2http协议的特点">2、HTTP协议的特点</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3024"><a class="md-toc-inner" href="#3http协议的连接方式">3、HTTP协议的连接方式</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n3038"><a class="md-toc-inner" href="#4报文结构">4、报文结构</a></span><span role="listitem" class="md-toc-item md-toc-h1" data-ref="n3057"><a class="md-toc-inner" href="#chapter-a-附录">Chapter A 附录</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n3058"><a class="md-toc-inner" href="#a-1-协议总结">A-1 协议总结</a></span></p></div><p>&nbsp;</p><h1 id='第一章-计网体系结构'><span>第一章 计网体系结构</span></h1><p><img src="计算机网络学习笔记.assets/计网思维导图-16448065071842.png" alt="计网思维导图" style="zoom: 20%;" /></p><h2 id='1-1-计算机网络概述'><span>1-1 计算机网络概述</span></h2><h3 id='1-11-概念与功能'><span>1-1.1 概念与功能</span></h3><h4 id='1计算机网络的概念'><span>1、计算机网络的概念</span></h4><p><span>是一个将分散的、具有独立功能的</span><strong><span>计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统</span></strong><span>。</span></p><p><span>计算机网络是互连的、自治的计算机集合。互连：通过通信链路互联互通；自治：无主从关系。</span></p><h4 id='2计网的功能'><span>2、计网的功能</span></h4><p><span>数据通信，资源共享（共享软硬件和数据）；</span></p><p><span>分布式处理、均衡负载（多台计算机各自承担同一工作的不同部分）；</span></p><p><span>提高可靠性（提供替代机等）。</span></p><h4 id='3计算机网络的发展'><span>3、计算机网络的发展</span></h4><p><span>第一阶段：美军ARPAnet是目前因特网的前身；网络把许多计算机连在一起，互联网把网络连在一起。</span></p><p><span>第二阶段：三级结构（主干网-地区网-校园/企业网）</span></p><p><span>第三阶段：多层次ISP结构，分为主干、地区、本地ISP等。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214103644334-16448064959251.png" alt="image-20220214103644334" style="zoom:50%;" /></p><p><strong><span>ISP：因特网服务提供商</span></strong><span>。</span></p><p><span>IXP：因特网交换点，使两个同级的网络点可以直接通信。</span></p><h3 id='1-12-组成与分类'><span>1-1.2 组成与分类</span></h3><h4 id='1组成部分'><span>1、组成部分</span></h4><p><span>计算机网络由硬件、软件与协议组成。 </span></p><h4 id='2工作方式'><span>2、工作方式</span></h4><p><span>包括边缘部分与核心部分；边缘部分主要是端系统，如各类主机。</span></p><p><span>主机/端系统之间的通信实际上是进程间的通信（而非两台主机本身）。</span></p><p><span>端系统的通信方式有：C/S方式（Client/Server），客户向服务器发送请求通过服务器中转；B/S方式（Browser/Server）把客户端换成浏览器；还有P2P方式（peer-to-peer），即对等连接方式，每个端系统都又是客户端又是服务器。前两种依赖服务器，所以下载人数越多越慢；后者则是下载人数越多越快。</span></p><h4 id='3功能组成'><span>3、功能组成</span></h4><p><span>根据OSI的7层模型来分，共有3个部分。</span></p><ul><li><p><span>通信子网：实现数据通信。</span></p></li><li><p><span>资源子网：实现资源共享、数据处理。</span></p></li><li><p><span>传输层：介于资源子网和通信子网之间的一层。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220214110007127.png" alt="image-20220214110007127" style="zoom: 67%;" /></p><h4 id='4分类'><span>4、分类</span></h4><p><span>一般可以按照分布范围、使用者、交换技术、拓扑结构、传输结构分。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214110227890.png" alt="image-20220214110227890" style="zoom:67%;" /></p><p><span>电路交换如打电话，通信线路是被占用的，一条线路只可以在同一时刻被两个人占用。报文交换、分组交换是一段一段的占用链路，但报文交换是完整的报文，分组交换是将完整报文分组进行交换。</span></p><p><strong><span>星型：6个节点有5条链路</span></strong><span>。</span></p><p><span>广域网一般用网状型，局域网一般用总线型。</span></p><p><span>广播式网络：信息是公开的，所有用户都可以接收到。</span></p><p>&nbsp;</p><h3 id='1-13-标准化工作以及相关组织'><span>1-1.3 标准化工作以及相关组织</span></h3><h4 id='1标准化工作'><span>1、标准化工作</span></h4><p><span>分为法定标准（权威机构制定的正式标准，如OSI）和事实标准（如某些标准由民间制定但受到大家的默许，如TCP/IP）。另外，标准可以自行指定。</span></p><p><span>只要是因特网标准都是RFC（Request for Comments，请求评论）形式，但RFC不一定是因特网标准，需经过4个阶段：</span></p><p><span>因特网草案（此阶段还不是RFC文档）；建议标准（成为RFC文档）；建议标准被置于互联网上被人们审议，通过后成为草案标准（这一步于2011年已经被剔除）；最后通 过一些机构的审核成为正式的因特网标准l。</span></p><h4 id='2标准化工作的相关组织'><span>2、标准化工作的相关组织</span></h4><ul><li><p><span>国际标准化组织ISO：OSI模型与HDLC协议；</span></p></li><li><p><span>国际电信联盟ITU：制定通信规则；</span></p></li><li><p><span>电气与电子工程师协会IEEE：学术机构、IEEE802系列标准、5G等；</span></p></li><li><p><span>Internet工程任务组IETF：负责因特网相关标准的制定，RFC xxxx。</span></p></li></ul><p>&nbsp;</p><h3 id='1-14-性能指标'><span>1-1.4 性能指标</span></h3><h4 id='1速率'><span>1、速率</span></h4><p><span>即数据率、数据传输率、比特率（1 bit，而非1 Byte）。指连接在计算机网络上的主机在数字信道上传送数据位数的速率。单位都和bit有关，如Mb/s等。</span></p><p><span>形容速率的单位的指数以10为底（基础单位是比特bit），存储容量的单位以2为底（基础单位是字节Byte）。</span></p><h4 id='2带宽'><span>2、带宽</span></h4><p><span>带宽用来表示网络的通信线路传送数据的能力，通常是指单位时间内从网络中</span>
<span>的某一点到另一点所能通过的“最高数据率”。也就是理论上（如硬件上）的最大网络传输速率。比如“100 Mbps的交换机”就是指其带宽。</span></p><h4 id='3吞吐量'><span>3、吞吐量</span></h4><p><span>表示在单位时间内通过某个网络（或信道、接口）的数据量，单位如Mb/s。也就是实际的速率（如只有20 MB的数据需要传输，带宽为1 Gbps，则吞吐率也只能按数据量来算），小于等于带宽。</span></p><h4 id='4时延'><span>4、时延</span></h4><p><span>指数据（报文/分组/比特流）从网络（或链路）的一端传送到另一端所需的时间，也叫延迟或迟延。单位是s。（速记：发传出牌，发、传、处、排）</span></p><p><span>包括四大类，总时延包括此四类。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214174537377.png" alt="image-20220214174537377" style="zoom:80%;" /></p><ol start='' ><li><p><span>发送时延（传输时延）：数据的发送不是瞬间完成，需要时间。公式如上，等于数据长度/信道带宽。</span></p></li><li><p><span>传播时延：信号在连接两台主机的线路上(信道)上耗时。一个单位的数据（如1 bit）经过一个传播时延即从发送者到接受者。注意，传播时延是用线路之间的物理距离除以电磁波的传输速度得到的。</span></p></li><li><p><span>排队时延：如数据被暂时缓存在路由器中的时刻。</span></p></li><li><p><span>处理时延：采用各种校验方式校验是否有错误的时间。</span></p></li></ol><p><span>注意，以上是电路交换时延的普通算法；</span><mark><span>还有分组交换时延=发送时延+传播时延（k组，k组的时延=n段乘以每段需要的时间+（k-1）组乘以一段所需时间）</span></mark><span>。</span></p><p><mark><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.407ex" height="1.821ex" role="img" focusable="false" viewBox="0 -694 2832 805" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.251ex;"><defs><path id="MJX-10-TEX-I-2605" d="M367 395Q374 416 398 492T442 627T463 688Q463 692 467 692Q471 694 472 694Q478 694 484 680T523 562Q553 469 576 400L577 395H731H819Q872 395 883 394T895 384Q895 380 891 376T832 333Q794 305 767 285Q643 195 643 194L690 47Q737 -96 737 -103Q737 -111 727 -111Q721 -111 594 -18L472 71L350 -18Q223 -111 217 -111Q207 -111 207 -103Q207 -96 254 47L301 194Q301 195 241 239T118 328T51 378Q49 382 49 384Q49 392 58 393T110 395H213H367Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="2605" xlink:href="#MJX-10-TEX-I-2605"></use></g><g data-mml-node="mi" transform="translate(944,0)"><use data-c="2605" xlink:href="#MJX-10-TEX-I-2605"></use></g><g data-mml-node="mi" transform="translate(1888,0)"><use data-c="2605" xlink:href="#MJX-10-TEX-I-2605"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>★</mi><mi>★</mi><mi>★</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\bigstar \bigstar \bigstar</script><span>  分组发送时，如果发送一个组以后需要数据确认才可以发下一个组，那么需要注意最后一个组发完不需要再确认（RTT的计算）</span></mark><span>。</span></p><blockquote><p><span>这里给出一道例题：传送报文 x 比特，源点到终点共k段链路，每段传播时延为 d 秒，数据传输速率为 b 比特每秒。使用电路交换时，电路建立时间为 k 比特每秒，在分组交换时分组长度为 p 比特。排队时间忽略不计。要求分别计算电路交换、分组交换的时延。</span></p><p><span>思路：电路交换时延 = 发送+传播+处理+排队时延 = x/b + k*d + s + 0；</span></p><p><span>			</span><span>记n为组数，则分组交换时延 = 发送+传播+排队时延 = （k-1+n)</span><span>*</span><span>p/b + k</span><span>*</span><span>d + 0；</span></p><p><span>			</span><span>分组传播时延的计算：第一组到终点需要时间为np/b，此时还有k-1组没到终点。</span></p><p><span>			</span><span>注意，在未说明的情况下组数n乘以分组长度p就等于报文长度x。所以若要电路交换时延小于分组交换时延，则</span></p><p><span>			</span><span>x/b + k*d + s &lt; (k-1+n)</span><span>*</span><span>p/b + k</span><span>*</span><span>d   ==&gt;  s &lt; (k-1)</span><span>*</span><span>p/b.</span></p></blockquote><h4 id='5时延带宽积'><span>5、时延带宽积</span></h4><p><strong><span>时延带宽积等于带宽与传播时延的积。 时延带宽积又称为以比特为单位的链路长度，即“某段链路在某个时刻有多少比特”</span></strong><span>。</span></p><h4 id='6往返时延rttround-trip-time）'><span>6、往返时延（RTT，Round-Trip Time）</span></h4><p><span>从发送方发送数据开始，到发送方收到接收方的确认为止（接收方收到数据后立即发送确认），总共经历的时延。</span></p><p><span>注意，只根据发送方的数据来计算RTT。RTT越大，在收到确认之前可以发送的数据越多（这是客观事实，但这并不意味着RTT越大越好）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214195944911.png" referrerpolicy="no-referrer" alt="image-20220214195944911"></p><h4 id='7利用率'><span>7、利用率</span></h4><p><span>分为信道利用率和网络利用率。</span></p><p><span>信道利用率：发送方在一个发送周期内，有效地发送数据所需要的时间占整个发送周期的比率（</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.834ex" height="1.871ex" role="img" focusable="false" viewBox="0 -677 1252.5 827" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.339ex;"><defs><path id="MJX-11-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-11-TEX-I-1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-11-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><use data-c="1D437" xlink:href="#MJX-11-TEX-I-1D437"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>T</mi><mi>D</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">T_D</script><span>）。另外，传播时延越长，信道利用率越大。</span></p><p><img src="计算机网络学习笔记.assets/image-20220322082221887.png" alt="image-20220322082221887" style="zoom:67%;" /></p><p><span>其中信道利用率U等于：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n104" cid="n104" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="21.725ex" height="4.959ex" role="img" focusable="false" viewBox="0 -1353 9602.3 2191.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -1.897ex;"><defs><path id="MJX-3-TEX-I-1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path><path id="MJX-3-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-3-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-3-TEX-I-1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path><path id="MJX-3-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-3-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-3-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D448" xlink:href="#MJX-3-TEX-I-1D448"></use></g><g data-mml-node="mo" transform="translate(1044.8,0)"><use data-c="3D" xlink:href="#MJX-3-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(2100.6,0)"><g data-mml-node="msub" transform="translate(3124.6,676)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-3-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><use data-c="1D437" xlink:href="#MJX-3-TEX-I-1D437"></use></g></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-3-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><use data-c="1D437" xlink:href="#MJX-3-TEX-I-1D437"></use></g></g><g data-mml-node="mo" transform="translate(1474.7,0)"><use data-c="2B" xlink:href="#MJX-3-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(2474.9,0)"><use data-c="1D445" xlink:href="#MJX-3-TEX-I-1D445"></use></g><g data-mml-node="mi" transform="translate(3233.9,0)"><use data-c="1D447" xlink:href="#MJX-3-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(3937.9,0)"><use data-c="1D447" xlink:href="#MJX-3-TEX-I-1D447"></use></g><g data-mml-node="mo" transform="translate(4864.2,0)"><use data-c="2B" xlink:href="#MJX-3-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(5864.4,0)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-3-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-152.7) scale(0.707)"><use data-c="1D434" xlink:href="#MJX-3-TEX-I-1D434"></use></g></g></g><rect width="7261.7" height="60" x="120" y="220"></rect></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></math></mjx-assistive-mml></mjx-container></div></div><p><span>信道吞吐率：信道利用率 * 发送方的发送速率。</span></p><p><span>网络利用率：信道利用率加权的平均值。</span></p><p>&nbsp;</p><h2 id='1-2-体系结构参考模型'><span>1-2 体系结构&amp;参考模型</span></h2><h3 id='1-21-分层结构协议接口与服务'><span>1-2.1 分层结构、协议、接口与服务</span></h3><p><span>分层原则：</span></p><ul><li><p><span>各层之间相互独立，每层实现较为单一的功能，且分界自然清晰，尽量减少层次间的相互交流。</span></p></li><li><p><span>保持下层对上层的透明性，上层通过接口调用下层。</span></p></li></ul><p>&nbsp;</p><h4 id='1分层结构'><span>1、分层结构</span></h4><p><span>网络体系结构，全称计算机网络体系结构，是从</span><u><span>功能</span></u><span>上描述计算机网络结构，含义是指计算机网络的各层、各层的功能及其协议的集合。它是一种分层结构，每层遵循某些网络协议来完成该层的功能。体系结构是抽象的，能够运行的一些软件或硬件是“实现”。</span><strong><span>对网络模型进行分层，没有定义功能执行的方法</span></strong><span>。</span></p><h5 id='1实体'><span>1.实体</span></h5><p><span>第n层中的活动元素称为n层实体；同一层的实体叫做对等实体。只有对等的实体之间才有协议。</span></p><h5 id='2协议'><span>2.协议</span></h5><p><span>为进行网络中的对等实体间的数据交换而建立的规则、标准或约定，是水平的。协议含有以下三个要素：</span></p><ul><li><p><span>语法：规定传输数据的格式；</span></p></li><li><p><span>语义：规定所要完成的功能；</span></p></li><li><p><span>同步：规定各种操作的顺序。</span></p></li></ul><h5 id='3接口访问服务点sap）'><span>3.接口（访问服务点，SAP）</span></h5><p><span>上层使用下层所提供的服务的入口，是自下而上垂直的。接口仅在相邻层间有，且下层的技术细节对上层完全屏蔽。</span></p><p><span>上下层的接口是通过服务访问点（SAP）实现的，也就是上层通过访问SAP来调用下层。</span></p><h5 id='4服务'><span>4.服务</span></h5><p><span>下层为相邻上层提供的功能调用。上层不直接越级调用更下层，而是上层调用下层，下层再调用更下层。服务有以下几种分类：</span></p><ol start='' ><li><p><span>可靠/不可靠服务（具备纠错检错、应答机制与否，不可靠服务被称为“尽最大努力交付”）；</span></p></li><li><p><span>面向连接服务/无连接服务（双方先建立连接/不需先建立连接而直接发送）；</span></p></li><li><p><span>有/无应答服务（收到数据后给不给出“收到”的应答，应答通常是数据正确不应答而数据有问题才应答）；</span><mark><span>注意，文件传输服务是有应答的</span></mark><span>。</span></p></li></ol><h5 id='5数据的构成'><span>5.数据的构成</span></h5><ul><li><p><span>SDU（服务数据单元）：为完成用户的需要而传输的信息。</span></p></li><li><p><span>PCI（协议控制信息）：控制协议操作的 信息。每一层可能有不同的协议。</span></p></li><li><p><span>PDU（协议数据单元）：对等层次之间传送的数据单位。</span></p></li></ul><p><span>每层的PDU都有一个通俗的名称：物理层——比特，数据链路层——帧，网络层——分组，传输层——报文段，等等。</span></p><ol start='' ><li><p><span>物理层：比特流（Bit Stream），二进制数据流。</span></p></li><li><p><span>数据链路层：帧(frame)。将上层传入的数据添加一个头部和尾部，组成了帧，帧根据MAC地址寻址。 </span></p></li><li><p><span>网络层：数据包(packet)，或称IP数据报、IP包。包中带有足够寻址信息(IP地址)，可独立地从源主机传输到目的主机</span></p></li><li><p><span>传输层：数据段(segment)、数据报(datagram)，或统称报文段。传输层TCP的分组叫做数据段（面向连接），UDP的叫做数据报（无连接）。</span></p></li><li><p><span>应用层：报文(message)。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220214205630789.png" referrerpolicy="no-referrer" alt="image-20220214205630789"></p><h3 id='1-22-osi参考模型'><span>1-2.2 OSI参考模型</span></h3><p><img src="计算机网络学习笔记.assets/image-20220214210523017.png" alt="image-20220214210523017" style="zoom: 50%;" /></p><h4 id='2osi模型'><span>2、OSI模型</span></h4><p><span>OSI模型在理论上是十分成功的，但在市场上遭遇了失败。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214212053906.png" alt="image-20220214212053906" style="zoom: 67%;" /></p><p><span>传输层是资源子网和通信子网的接口层。</span></p><p><span>中间系统可能不需要经过所有层，如路由器可能只有通信子网中的3层。资源子网之间可以看作是端到端的通信，而通信子网之间则是点到点的。</span></p><p><img src="计算机网络学习笔记.assets/image-20220214212448800.png" alt="image-20220214212448800" style="zoom:50%;" /></p><h4 id='★-3osi模型中每层的功能'><mark><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="2.136ex" height="1.821ex" role="img" focusable="false" viewBox="0 -694 944 805" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.251ex;"><defs><path id="MJX-12-TEX-I-2605" d="M367 395Q374 416 398 492T442 627T463 688Q463 692 467 692Q471 694 472 694Q478 694 484 680T523 562Q553 469 576 400L577 395H731H819Q872 395 883 394T895 384Q895 380 891 376T832 333Q794 305 767 285Q643 195 643 194L690 47Q737 -96 737 -103Q737 -111 727 -111Q721 -111 594 -18L472 71L350 -18Q223 -111 217 -111Q207 -111 207 -103Q207 -96 254 47L301 194Q301 195 241 239T118 328T51 378Q49 382 49 384Q49 392 58 393T110 395H213H367Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="2605" xlink:href="#MJX-12-TEX-I-2605"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>★</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\bigstar</script><span>3、OSI模型中每层的功能</span></mark></h4><p><span>总的来说，通信其实是打包（数据封装）与拆包的过程。如图所示：</span></p><p><img src="计算机网络学习笔记.assets/image-20220214212744190.png" alt="image-20220214212744190" style="zoom: 67%;" /></p><p><span>真正需要传输的数据可能只有应用层获得的DATA。注意，数据链路层在首尾都要加（Head、Tail），其他只加头部（Head）；物理层不用特殊处理。 </span></p><h5 id='1物理层'><span>1、物理层</span></h5><p><span>主要任务是在物理媒体上实现比特流的透明传输，物理层传输单位是bit。特点是透明传输：指不管所传数据是什么样的比特组合,都应当能够在链路上传送。主要协议：Rj45、802.3。</span></p><ul><li><p><span>功能一：定义接口特性</span></p></li><li><p><span>功能二：定义传输模式（单工，发送端和接收端已经确认好；半双工，没有固定发送、接收者，但同一时刻只能一个用户发送信息；双工，两边可以同时发送信息，如现在的移动通话）</span></p></li><li><p><span>功能三：定义传输速率</span></p></li><li><p><span>功能四：比特同步（利用时钟保持发送和接收的数据同步）</span></p></li><li><p><span>功能五：比特编码</span></p></li></ul><h5 id='2数据链路层'><span>2、数据链路层</span></h5><p><span>主要任务是把网络层传下来的数据报组装成帧，提供点到点的通信。</span><strong><span>数据链路层/链路层的传输单位是帧。主要协议：SDLC、HDLC、PPP、STP</span></strong><span>。</span><span>	</span></p><ul><li><p><span>功能一：成帧（定义帧的开始和结束）</span></p></li><li><p><span>功能二：差错控制（包括帧错与位错，一般是物理连接在传输比特流的时候因噪声而出错）</span></p></li><li><p><span>功能三：流量控制（不是拥塞控制）</span></p></li><li><p><span>功能四：访问/接入控制（控制对共享信道的访问，如广播室控制哪一台电脑发出声音）</span></p></li></ul><h5 id='3网络层'><span>3、网络层</span></h5><p><strong><span>传输单位是数据报</span></strong><span>。主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务，以及选择一条合适的路径。网络层传输单位是数据报（过长的时候可以分组传输）。主要协议：IP、IPX、ICMP、IGMP、ARP、RARP、OSPF。</span></p><ul><li><p><span>功能一：路由选择（选择经过的网络路径）；</span></p></li><li><p><span>功能二：流量控制（协调发送端和接收端的速率）；</span></p></li><li><p><span>功能三：差错控制（根据一定规则纠错检错）；</span></p></li><li><p><span>功能四：拥塞控制（若所有结点都因缓存已满等各种原因来不及接受分组而要丢弃大量分组，网络就处于拥塞状态；需要采取一定措施来缓解拥塞）。</span></p></li></ul><h5 id='4传输层'><span>4、传输层</span></h5><p><span>负责主机中两个进程的通信，即端到端的通信（资源子网与传输层都是端到端）。</span><strong><span>传输单位是报文段或用户数据报。主要协议有TCP、UDP</span></strong><span>。</span></p><ul><li><p><span>功能一：可靠传输（发送方在发出一段报文后，必须收到接收方的确认才可以发送下一段报文，是基于确认机制的）、不可靠传输（没有确认机制，直接发送）。</span></p></li><li><p><span>功能二：差错控制（检错纠错）；</span></p></li><li><p><span>功能三：流量控制（接收方的接收速率有限，希望发送方可以降低发送速率，TCP有而UDP无）。</span></p></li><li><p><span>功能四：复用分用，分组排序（复用：发送方的多个进程可以同时使用传输层来传输数据；分用：不同进程有不同的端口号，接收方的运输层可根据端口号把数据分别交付给对应的进程）。（记忆：可差流用）</span></p></li></ul><h5 id='5会话层'><span>5、会话层</span></h5><p><span>向表示层实体/用户进程提供建立连接，并在连接上有序地传输数据。会话层允许不同主机上的各个进程进行会话。注意，</span><mark><span>校验点就在这一层</span></mark><span>。</span></p><p><span>进行会话就是建立同步（SYN），比如打开一个网页就和这个网页开始了会话（建立了同步），每个会话间是相互独立的。</span></p><ul><li><p><span>功能一：建立、管理、终止会话；</span></p></li><li><p><span>功能二：</span><strong><span>使用校验点可使会话在通信失效时从校验点/同步点继续恢复通信，实现数据同步</span></strong><span>，如下载到一半后暂停以后还可以继续下载。主要协议有ADSP、ASP。</span></p></li></ul><h5 id='6表示层'><span>6、表示层</span></h5><p><span>用于处理在两个通信系统中交换信息的表示方式（语法和语义）。功能有：</span><strong><span>数据格式转换、数据加密解密、数据压缩与恢复</span></strong><span>；主要协议有JPEG、ASCII等。</span></p><h5 id='7应用层'><span>7、应用层</span></h5><p><span>所有能和用户交互并产生网络流量的程序。</span><strong><span>本地程序不属于应用层</span></strong><span>。典型的有FTP（文件传输）、电子邮件（SMTP）、万维网（HTTP）等。</span></p><h5 id='8总结'><span>8、总结</span></h5><figure class='table-figure'><table><thead><tr><th>&nbsp;</th><th><span>物理</span></th><th><span>链路</span></th><th><span>网络</span></th><th><span>传输</span></th><th><span>会话</span></th><th><span>表示</span></th><th><span>应用</span></th></tr></thead><tbody><tr><td><span>数据单位</span></td><td><span>比特（流）</span></td><td><span>帧</span></td><td><span>分组</span></td><td><span>报文</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>物理设备</span></td><td><span>集线器</span></td><td><span>交换机</span></td><td><span>路由器</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>差错控制</span></td><td>&nbsp;</td><td><span>O</span></td><td><span>O</span></td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>流量控制</span></td><td>&nbsp;</td><td><span>O（点）</span></td><td><span>O（点）</span></td><td><span>O（端）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>定义接口和传输模式</span></td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>访问/接入控制</span></td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>拥塞控制</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>路由选择</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>面向有/无连接的服务</span></td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>可靠传输（收到确认）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O（TCP）</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>分组排序</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>端到端的应答</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>进程间的数据传送</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>校验/同步点</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>会话管理</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td><span>数据格式转换压缩</span></td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td><span>O</span></td><td>&nbsp;</td></tr></tbody></table></figure><p>&nbsp;</p><h3 id='1-23-tcpip参考模型'><span>1-2.3 TCP/IP参考模型</span></h3><h4 id='1两种模型的对比'><span>1、两种模型的对比</span></h4><p><img src="计算机网络学习笔记.assets/image-20220215110507165.png" alt="image-20220215110507165" style="zoom:67%;" /></p><p><span>OSI模型是先有理论，TCP/IP模型是先有实践才有理论。</span></p><h5 id='1相同点'><span>1、相同点</span></h5><ol start='' ><li><p><span>都分层；</span></p></li><li><p><span>基于独立的协议栈的概念；</span></p></li><li><p><span>可以实现异构网络互联。</span></p></li></ol><h5 id='2不同点'><span>2、不同点</span></h5><ol start='' ><li><p><span>OSI定义三点：服务、协议、接口；</span></p></li><li><p><span>OSI先出现，参考模型先于协议发明，不偏向特定协议；</span></p></li><li><p><span>TCP/IP设计之初就考虑到异构网互联问题，将IP作为重要层次。</span></p></li><li><p><span>两者在网络层与传输层的架构与功能不同。</span></p></li></ol><figure class='table-figure'><table><thead><tr><th>&nbsp;</th><th><span>ISO/OSI参考模型</span></th><th><span>TCP/IP模型</span></th></tr></thead><tbody><tr><td><span>网络层</span></td><td><span>无连接+面向连接</span></td><td><span>无连接</span></td></tr><tr><td><span>传输层</span></td><td><span>面向连接</span></td><td><span>无连接+面向连接</span></td></tr></tbody></table></figure><p><span>面向连接分为三个阶段，第一是</span><strong><span>建立连接</span></strong><span>，在此阶段，发出一个建立连接的请求。只有在连接成功建立之后，才能</span><strong><span>开始数据传输</span></strong><span>，这是第二阶段。接着，当数据传输完毕，必须</span><strong><span>释放连接</span></strong><span>。而面向无连接没有这么多阶段，它直接进行数据传输。无连接传输是不可靠的。</span></p><h4 id='2--5层参考模型'><span>2 -5层参考模型</span></h4><p><span>这是一种综合了OSI和TCP/IP的优点的模型。</span></p><p><img src="计算机网络学习笔记.assets/image-20220215112120071.png" alt="image-20220215112120071" style="zoom:50%;" /></p><p><img src="计算机网络学习笔记.assets/image-20220215112143125.png" alt="image-20220215112143125" style="zoom: 67%;" /></p><p>&nbsp;</p><h1 id='chapter-2-物理层'><span>Chapter 2 物理层</span></h1><p><img src="计算机网络学习笔记.assets/image-20220215113829919.png" alt="image-20220215113829919" style="zoom: 50%;" /></p><h2 id='2-1-通信基础'><span>2-1 通信基础</span></h2><h3 id='2-11-物理层基本概念'><span>2-1.1 物理层基本概念</span></h3><h4 id='1物理层接口特性'><span>1、物理层接口特性</span></h4><p><span>物理层解决的是：如何在连接各种计算机的传输媒体上传输数据比特流，不是指具体的传输媒体。 </span></p><p><span>物理层主要任务：确定与传输媒体接口有关的一些特性定义标准。特性有以下几个：</span></p><ol start='' ><li><p><span>机械特性：定义物理连接的特性，规定物理连接时所采用的规格、接口形状、引线数目、引脚数量和排列情况。</span></p></li><li><p><span>电气特性：规定传输二进制位时，</span><strong><span>线路上二进制信号的电压范围、阻抗匹配、传输速率和距离限制</span></strong><span>等。描述电气特性会出现具体的数字。</span></p></li><li><p><span>功能特性：指明某条线上出现的</span><strong><span>某一具体电平表示何种意义，接口部件的信号线的用途</span></strong><span>。如：描述一个物理层接口引脚处于高电平时的含义。注意与电气特性区分。</span></p></li><li><p><span>规程特性（过程特性）：定义各条物理线路的</span><strong><span>工作规程和时序关系</span></strong><span>。</span></p></li></ol><p>&nbsp;</p><h3 id='2-12-数据通信'><span>2-1.2 数据通信</span></h3><h4 id='1典型模型'><span>1、典型模型</span></h4><p><span>这里展示了物理层工作的典型模型。</span></p><p><img src="计算机网络学习笔记.assets/image-20220215120024615.png" alt="image-20220215120024615" style="zoom: 50%;" /></p><p><span>物理层将上面的层中的数据转换成数字信号，经过调制解调器变为模拟信号，经过广域网与后续过程。注意发送器和接收器都是调制解调器，两个主机分别是信源、信宿。</span></p><h4 id='2相关术语'><span>2、相关术语</span></h4><p><span>通信的目的：传送各种消息。</span></p><p><span>数据（data）：传送信息的实体，通常是有意义的符号序列。数据通信指在不同计算机之间传输表示信息的二进制数0、1序列的过程。</span></p><p><span>信号：数据的电气/电磁的表现，是数据在传输过程中的存在形式。</span></p><p><span>数字信号/离散信号：代表消息的参数的取值是离散的。</span>
<span>模拟信号/连续信号：代表消息的参数的取值是连续的。</span></p><p><span>信道：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。</span></p><h4 id='3通信方式'><span>3、通信方式</span></h4><p><span>共有三种通信方式：</span></p><ol start='' ><li><p><span>单工：只有一个方向的通信，没有反方向的交互。仅需一条信道，如广播。</span></p></li><li><p><span>半双工/双向交替通信：双方都可以发送，但不能同时发送，需两条信道，如双向对讲机。</span></p></li><li><p><span>全双工/双向同时通信：通信双方可同时发送/接收信息，也需要两条信道。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220221212003808.png" alt="image-20220221212003808" style="zoom: 50%;" /></p><h4 id='4传输'><span>4、传输</span></h4><p><span>按串行并行分：</span></p><ul><li><p><span>串行传输：将表示一个字符的8位二进制数按</span><u><strong><span>由低位到高位</span></strong></u><span>的顺序依次发送。特点是速度慢，费用低，适合远距离。只需要一条信道。</span></p></li><li><p><span>并行传输：将表示一个字符的8位二进制数同时通过8条信道发送。特点是速度快，费用高，适合近距离，需要多条信道。一般用于计算机内部数据传输。</span></p></li></ul><p><span>按同步异步分：</span></p><ul><li><p><span>同步传输：在同步传输的模式下，数据的传送是以一个数据区块为单位，因此同步传输又称为区块传输。在传送数据时，需先送出1个或多个同步字符，接收方就会开始接收，这样发送方再送出整批的数据。</span></p></li></ul><blockquote><p><span>特点：双方时钟始终相同，发送的数据连续。只有同步字符。</span></p></blockquote><p><img src="计算机网络学习笔记.assets/image-20220221213314450.png" alt="image-20220221213314450" style="zoom:67%;" /></p><ul><li><p><span>异步传输：异步传输将比特分成小组进行传送，小组可以是8位的1个字符或更长。发送方可以在任何时刻发送这些比特组，而接收方不知道它们会在什么时候到达。传送数据时，加一个字符起始位和一个字符终止位。</span></p></li></ul><blockquote><p><span>特点：双方不用时钟相同，发送的数据分为小组。有终止位和起始位。</span></p></blockquote><p><img src="计算机网络学习笔记.assets/image-20220221213351799.png" alt="image-20220221213351799" style="zoom:67%;" /></p><p><span>并行/串行是一组方式，同步/异步是另一组方式。</span></p><h4 id='5码元'><span>5、码元</span></h4><p><span>码元是指用一个固定时长的信号波形（数字脉冲），代表不同离散数值的基本波形，是数字通信中数字信号的计量单位。这个固定时长内的信号称为k进制码元，而该时长称为码元宽度。当码元的离散状态有M个时（M大于1），此时码元为M进制码元。下图中，红线部分就是一个码元，红线宽度称为码元长度或码元宽度。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228090620171.png" alt="image-20220228090620171" style="zoom:67%;" /></p><p><span>1码元可以携带多个比特的信息量。例如，在使用二进制编码时，只有两种不同的码元，一种代表0状态，另一种代表1状态。</span></p><p><span>举例：4进制码元携带的比特信息为00、01、10、11，所以4进制码元携带的信息量是</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="8.616ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 3808.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-13-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-13-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-13-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-13-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-13-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-13-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-13-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJX-13-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="5B" xlink:href="#MJX-13-TEX-N-5B"></use></g><g data-mml-node="mi" transform="translate(278,0)"><use data-c="1D459" xlink:href="#MJX-13-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(576,0)"><use data-c="1D45C" xlink:href="#MJX-13-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(1061,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-13-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-13-TEX-N-32"></use></g></g><g data-mml-node="mn" transform="translate(1974.6,0)"><use data-c="34" xlink:href="#MJX-13-TEX-N-34"></use></g><g data-mml-node="mo" transform="translate(2474.6,0)"><use data-c="5D" xlink:href="#MJX-13-TEX-N-5D"></use></g><g data-mml-node="mo" transform="translate(3030.3,0)"><use data-c="3D" xlink:href="#MJX-13-TEX-N-3D"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mn>4</mn><mo stretchy="false">]</mo><mo>=</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">[log_24] = </script><span> 2 bit。同理16进制码元携带</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="9.747ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 4308.3 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-14-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-14-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-14-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-14-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-14-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-14-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-14-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-14-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJX-14-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="5B" xlink:href="#MJX-14-TEX-N-5B"></use></g><g data-mml-node="mi" transform="translate(278,0)"><use data-c="1D459" xlink:href="#MJX-14-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(576,0)"><use data-c="1D45C" xlink:href="#MJX-14-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(1061,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-14-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-14-TEX-N-32"></use></g></g><g data-mml-node="mn" transform="translate(1974.6,0)"><use data-c="31" xlink:href="#MJX-14-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-14-TEX-N-36" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(2974.6,0)"><use data-c="5D" xlink:href="#MJX-14-TEX-N-5D"></use></g><g data-mml-node="mo" transform="translate(3530.3,0)"><use data-c="3D" xlink:href="#MJX-14-TEX-N-3D"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mn>16</mn><mo stretchy="false">]</mo><mo>=</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">[log_216] = </script><span> 4 bit信息量。</span></p><h4 id='6速率与波特'><span>6、速率与波特</span></h4><p><span>速率也叫数据率，是指数据的传输速率，表示单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示。</span></p><ul><li><p><span>码元传输速率：别名码元速率、波形速率、调制速率、符号速率等，它表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化的次数），单位是波特（Baud，B）。</span><strong><span>k波特表示数字通信系统每秒传输k个码元</span></strong><span>。数字信号有多进制和二进制之分，但码元速率与进制数无关，只与码元长度/宽度T有关。</span></p></li><li><p><span>信息传输速率：别名信息速率、比特率等，表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒（b/s）。</span>
<span>关系：若一个码元携带n bit的信息量，则M Baud的码元传输速率所对应的信息传输速率为M*n bit/s。也可以这样算：k进制的传输速率为m Baud的码元信息传输速率为</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="13.952ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 6167 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-15-TEX-N-5B" d="M118 -250V750H255V710H158V-210H255V-250H118Z"></path><path id="MJX-15-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-15-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-15-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-15-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-15-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-15-TEX-N-5D" d="M22 710V750H159V-250H22V-210H119V710H22Z"></path><path id="MJX-15-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-15-TEX-I-1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"></path><path id="MJX-15-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-15-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-15-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><use data-c="5B" xlink:href="#MJX-15-TEX-N-5B"></use></g><g data-mml-node="mi" transform="translate(278,0)"><use data-c="1D459" xlink:href="#MJX-15-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(576,0)"><use data-c="1D45C" xlink:href="#MJX-15-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(1061,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-15-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-15-TEX-N-32"></use></g></g><g data-mml-node="mi" transform="translate(1974.6,0)"><use data-c="1D458" xlink:href="#MJX-15-TEX-I-1D458"></use></g><g data-mml-node="mo" transform="translate(2495.6,0)"><use data-c="5D" xlink:href="#MJX-15-TEX-N-5D"></use></g><g data-mml-node="mo" transform="translate(2995.8,0)"><use data-c="2217" xlink:href="#MJX-15-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(3718,0)"><use data-c="1D440" xlink:href="#MJX-15-TEX-I-1D440"></use></g><g data-mml-node="mi" transform="translate(4769,0)"><use data-c="1D44F" xlink:href="#MJX-15-TEX-I-1D44F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(5198,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-15-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(5698,0)"><use data-c="1D460" xlink:href="#MJX-15-TEX-I-1D460"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">[</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>k</mi><mo stretchy="false">]</mo><mo>∗</mo><mi>M</mi><mi>b</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>s</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">[log_2k] * Mb/s</script><span>。</span></p></li></ul><h4 id='7带宽'><span>7、带宽</span></h4><p><span>带宽有两种语境，不同语境中语义不同。</span></p><ul><li><p><span>模拟信号系统中：当输入的信号频率高或低到一定 程度，使得系统的输出功率成为输入功率的一半时(即-3dB)，最高频率和最低频率间的差值就代表了系统的通频带宽，</span><strong><span>其单位为赫兹(Hz)</span></strong><span>。</span></p></li><li><p><span>数字设备中：表示在单位时间内从网络中的某一点到另一点所能通过的“最高数据率”/单位时间内通过链路的数量，常用来表示网络的通信线路所能传输数据的能力。</span><strong><span>单位是比特每秒(bps)</span></strong><span>。</span></p></li></ul><p><span>带宽描述的是一个信道的最优性能。</span></p><p>&nbsp;</p><h3 id='2-13-奈氏准则和香农定理'><span>2-1.3 奈氏准则和香农定理</span></h3><h4 id='1失真'><span>1、失真</span></h4><p><span>失真指信号在传输过程中因各种原因产生了变化或扭曲。有以下两种情况：</span></p><p><img src="计算机网络学习笔记.assets/image-20220228092130215.png" alt="image-20220228092130215" style="zoom:67%;" /></p><p><span>影响失真因素：</span></p><ol start='' ><li><p><span>码元传输速率（速率越快，失真越严重）；</span></p></li><li><p><span>信号传输距离（越远越容易失真）；</span></p></li><li><p><span>噪声干扰（越严重越容易失真）；</span></p></li><li><p><span>传输媒体质量。前三者是正相关，后者是负相关。</span></p></li></ol><h4 id='2码间串扰'><span>2、码间串扰</span></h4><p><span>首先我们回顾一下：信道带宽是信道能通过的最高频率和最低频率之差。如果信号频率过低，那么很容易受到干扰而失真；过高则使得发送方来不及接收，也就是码间串扰现象。</span></p><p><span>码间串扰：接收端收到的信号波形失去了码元之间清晰界限的现象，是失真的一种现象。更多出现在发送的信号频率超出了信道能通过的最高频率之时。</span></p><h4 id='3奈氏准则'><span>3、奈氏准则</span></h4><p><span>奈奎斯特定理：在理想低通（无噪声，带宽受限）条件下，为了避免码间串扰，极限码元传输速率为2W Baud，W是信道带宽（最高-最低频率），单位是Hz（注意！在这里，信道带宽的单位是Hz，因为这里是指模拟信号）。</span></p><p><span>极限传输速率：</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.217ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 4958 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-16-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-16-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-16-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-16-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-16-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-16-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-16-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-16-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D44A" xlink:href="#MJX-16-TEX-I-1D44A"></use></g><g data-mml-node="mo" transform="translate(1770.2,0)"><use data-c="2217" xlink:href="#MJX-16-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(2492.4,0)"><use data-c="1D459" xlink:href="#MJX-16-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2790.4,0)"><use data-c="1D45C" xlink:href="#MJX-16-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(3275.4,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-16-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-16-TEX-N-32"></use></g></g><g data-mml-node="mi" transform="translate(4189,0)"><use data-c="1D449" xlink:href="#MJX-16-TEX-I-1D449"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mi>W</mi><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>V</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">2W * log_2 V</script><span> 比特每秒，其中V为码元的进制数或码元的离散电平数目。</span></p><p><span>一些结论：</span></p><ol start='' ><li><p><span>在任何信道中，码元传输的速率是有上限的。若传输速率超过此上限，则码间串扰严重，使接收端对码元的完全正确识别成为不可能。</span></p></li><li><p><span>信道的频带越宽（即能通过的信号高频分量越多），就可以用更高的速率进行码元的有效传输。</span></p></li><li><p><strong><span>奈氏准则限制了码元传输速率，但并没有限制信息传输速率</span></strong><span>。</span></p></li><li><p><strong><span>由于码元的传输速率受奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特的信息量，这就需要采用多元制的调制方法</span></strong><span>。</span></p></li></ol><h4 id='4香农定理'><span>4、香农定理</span></h4><p><span>关于噪声：噪声存在于所有的电子设备和通信信道中。它随机产生，瞬时值有时会很大，因此噪声会使接收端对码元的判决产生错误。但是噪声的影响是相对的，若信号较强，那么噪声影响相对较小。</span></p><p><span>信噪比：信噪比等于</span><strong><span>信号的平均功率/噪声的平均功率，常记为S/N</span></strong><span>，并用分贝（dB）作为度量单位。信噪比可以直接写成S/N，但如果用分贝作为度量单位则有以下的数值对应关系（仅仅是数值对应，物理量不对应）：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n550" cid="n550" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="31.24ex" height="6.094ex" role="img" focusable="false" viewBox="0 -1596.7 13808.1 2693.3" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.481ex;"><defs><path id="MJX-4-TEX-I-1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path><path id="MJX-4-TEX-I-1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"></path><path id="MJX-4-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-4-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-4-TEX-N-30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"></path><path id="MJX-4-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-4-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-4-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-4-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-4-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-4-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-4-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,846.7)"><g data-mml-node="mtd"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">噪</text></g><g data-mml-node="mtext" transform="translate(1975.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">比</text></g><g data-mml-node="mi" transform="translate(2963.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">（</text></g><g data-mml-node="mi" transform="translate(4078.6,0)"><use data-c="1D451" xlink:href="#MJX-4-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(4598.6,0)"><use data-c="1D435" xlink:href="#MJX-4-TEX-I-1D435"></use></g><g data-mml-node="mi" transform="translate(5357.6,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">）</text></g><g data-mml-node="mo" transform="translate(6623.1,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(7678.9,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="mo" transform="translate(8901.1,0)"><use data-c="2217" xlink:href="#MJX-4-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(9623.4,0)"><use data-c="1D459" xlink:href="#MJX-4-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(9921.4,0)"><use data-c="1D454" xlink:href="#MJX-4-TEX-I-1D454"></use></g><g data-mml-node="mo" transform="translate(10398.4,0)"><use data-c="28" xlink:href="#MJX-4-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(10787.4,0)"><use data-c="1D446" xlink:href="#MJX-4-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(11432.4,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-4-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(11932.4,0)"><use data-c="1D441" xlink:href="#MJX-4-TEX-I-1D441"></use></g><g data-mml-node="mi" transform="translate(12820.4,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">）</text></g></g></g><g data-mml-node="mtr" transform="translate(0,-846.7)"><g data-mml-node="mtd" transform="translate(1163.6,0)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">噪</text></g><g data-mml-node="mtext" transform="translate(1975.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">比</text></g><g data-mml-node="mi" transform="translate(2963.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">（</text></g><g data-mml-node="mi" transform="translate(4078.6,0)"><use data-c="1D446" xlink:href="#MJX-4-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4723.6,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-4-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(5223.6,0)"><use data-c="1D441" xlink:href="#MJX-4-TEX-I-1D441"></use></g><g data-mml-node="mi" transform="translate(6111.6,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">）</text></g><g data-mml-node="mo" transform="translate(7377.1,0)"><use data-c="3D" xlink:href="#MJX-4-TEX-N-3D"></use></g><g data-mml-node="msup" transform="translate(8432.9,0)"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g><g data-mml-node="TeXAtom" transform="translate(1033,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D451" xlink:href="#MJX-4-TEX-I-1D451"></use></g><g data-mml-node="mi" transform="translate(520,0)"><use data-c="1D435" xlink:href="#MJX-4-TEX-I-1D435"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1279,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-4-TEX-N-2F"></use></g></g><g data-mml-node="mn" transform="translate(1779,0)"><use data-c="31" xlink:href="#MJX-4-TEX-N-31"></use><use data-c="30" xlink:href="#MJX-4-TEX-N-30" transform="translate(500,0)"></use></g></g></g></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable rowspacing=".5em" columnspacing="1em" displaystyle="true"><mtr><mtd><mtext>信</mtext><mtext>噪</mtext><mtext>比</mtext><mi>（</mi><mi>d</mi><mi>B</mi><mi>）</mi><mo>=</mo><mn>10</mn><mo>∗</mo><mi>l</mi><mi>g</mi><mo stretchy="false">(</mo><mi>S</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>N</mi><mi>）</mi></mtd></mtr><mtr><mtd><mtext>信</mtext><mtext>噪</mtext><mtext>比</mtext><mi>（</mi><mi>S</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>N</mi><mi>）</mi><mo>=</mo><msup><mn>10</mn><mrow data-mjx-texclass="ORD"><mi>d</mi><mi>B</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mn>10</mn></mrow></msup></mtd></mtr></mtable></math></mjx-assistive-mml></mjx-container></div></div><p><span>香农定理：在带宽受限且有噪声的信道中，为了不产生误差，信息的数据传输速率有上限值。这个上限值的公式为：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n552" cid="n552" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="54.123ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 23922.5 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-5-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-5-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-5-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-5-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-5-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-5-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-5-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-5-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-5-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-5-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-5-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-5-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-5-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-5-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-5-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-5-TEX-I-1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">信</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">道</text></g><g data-mml-node="mtext" transform="translate(1975.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">的</text></g><g data-mml-node="mtext" transform="translate(2963.3,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">极</text></g><g data-mml-node="mtext" transform="translate(3951.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">限</text></g><g data-mml-node="mtext" transform="translate(4938.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">数</text></g><g data-mml-node="mtext" transform="translate(5926.6,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">据</text></g><g data-mml-node="mtext" transform="translate(6914.4,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">传</text></g><g data-mml-node="mtext" transform="translate(7902.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">输</text></g><g data-mml-node="mtext" transform="translate(8889.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">速</text></g><g data-mml-node="mtext" transform="translate(9877.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">率</text></g><g data-mml-node="mo" transform="translate(11143.2,0)"><use data-c="3D" xlink:href="#MJX-5-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(12199,0)"><use data-c="1D44A" xlink:href="#MJX-5-TEX-I-1D44A"></use></g><g data-mml-node="mo" transform="translate(13469.2,0)"><use data-c="2217" xlink:href="#MJX-5-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(14191.4,0)"><use data-c="1D459" xlink:href="#MJX-5-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(14489.4,0)"><use data-c="1D45C" xlink:href="#MJX-5-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(14974.4,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-5-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-5-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(15888,0)"><use data-c="28" xlink:href="#MJX-5-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(16277,0)"><use data-c="31" xlink:href="#MJX-5-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(16999.2,0)"><use data-c="2B" xlink:href="#MJX-5-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(17999.4,0)"><use data-c="1D446" xlink:href="#MJX-5-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(18644.4,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-5-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(19144.4,0)"><use data-c="1D441" xlink:href="#MJX-5-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(20032.4,0)"><use data-c="29" xlink:href="#MJX-5-TEX-N-29"></use></g><g data-mml-node="mi" transform="translate(20421.4,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">（</text></g><g data-mml-node="mi" transform="translate(21536.7,0)"><use data-c="1D44F" xlink:href="#MJX-5-TEX-I-1D44F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(21965.7,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-5-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(22465.7,0)"><use data-c="1D460" xlink:href="#MJX-5-TEX-I-1D460"></use></g><g data-mml-node="mi" transform="translate(22934.7,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">）</text></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>信</mtext><mtext>道</mtext><mtext>的</mtext><mtext>极</mtext><mtext>限</mtext><mtext>数</mtext><mtext>据</mtext><mtext>传</mtext><mtext>输</mtext><mtext>速</mtext><mtext>率</mtext><mo>=</mo><mi>W</mi><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>N</mi><mo stretchy="false">)</mo><mi>（</mi><mi>b</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>s</mi><mi>）</mi></math></mjx-assistive-mml></mjx-container></div></div><p><span>一些结论：</span></p><p><span>1.信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。</span>
<span>2.对一定的传输带宽和一定的信噪比，信息传输速率的上限可以确定。</span>
<span>3.只要信息的传输速率低于信道的极限传输速率，就一定能找到某种方法来实现无差错的传输。</span>
<span>4.香农定理得出的为极限信息传输速率，实际信道能达到的传输速率会更低。</span>
<span>5.从香农定理可以看出，若信道带宽W或信噪比S/N没有上限（不可能在现实中实现），那么信道的极限信息传输速率也就没有上限。</span></p><h4 id='5两个定理的联系与区别'><span>5、两个定理的联系与区别</span></h4><p><span>在带宽受限的情况下，香农定理是有噪声无码间串扰的，奈氏准则是有码间串扰但无噪声的。我们可以将奈氏准则比作“内忧”，将香农定理比作“外患”。</span></p><figure class='table-figure'><table><thead><tr><th><span>名称</span></th><th><span>奈氏准则（内忧）</span></th><th><span>香农定理（外患）</span></th></tr></thead><tbody><tr><td><span>场景</span></td><td><span>带宽受限但无噪声</span></td><td><span>带宽受限有噪声</span></td></tr><tr><td><span>干扰</span></td><td><span>内部的码间串扰</span></td><td><span>外部的噪声</span></td></tr><tr><td><span>公式</span></td><td><mark><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="11.217ex" height="2.034ex" role="img" focusable="false" viewBox="0 -694 4958 899" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.464ex;"><defs><path id="MJX-17-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-17-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-17-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-17-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-17-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-17-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-17-TEX-I-1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-17-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(500,0)"><use data-c="1D44A" xlink:href="#MJX-17-TEX-I-1D44A"></use></g><g data-mml-node="mo" transform="translate(1770.2,0)"><use data-c="2217" xlink:href="#MJX-17-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(2492.4,0)"><use data-c="1D459" xlink:href="#MJX-17-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2790.4,0)"><use data-c="1D45C" xlink:href="#MJX-17-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(3275.4,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-17-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-17-TEX-N-32"></use></g></g><g data-mml-node="mi" transform="translate(4189,0)"><use data-c="1D449" xlink:href="#MJX-17-TEX-I-1D449"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mi>W</mi><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mi>V</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">2W*log_2V</script></mark></td><td><mark><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="18.603ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 8222.4 1000" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.566ex;"><defs><path id="MJX-18-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-18-TEX-N-2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path><path id="MJX-18-TEX-I-1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path><path id="MJX-18-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-18-TEX-I-1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"></path><path id="MJX-18-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-18-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-18-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-18-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-18-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-18-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-18-TEX-I-1D441" d="M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z"></path><path id="MJX-18-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-18-TEX-I-1D44A"></use></g><g data-mml-node="mo" transform="translate(1270.2,0)"><use data-c="2217" xlink:href="#MJX-18-TEX-N-2217"></use></g><g data-mml-node="mi" transform="translate(1992.4,0)"><use data-c="1D459" xlink:href="#MJX-18-TEX-I-1D459"></use></g><g data-mml-node="mi" transform="translate(2290.4,0)"><use data-c="1D45C" xlink:href="#MJX-18-TEX-I-1D45C"></use></g><g data-mml-node="msub" transform="translate(2775.4,0)"><g data-mml-node="mi"><use data-c="1D454" xlink:href="#MJX-18-TEX-I-1D454"></use></g><g data-mml-node="mn" transform="translate(510,-150) scale(0.707)"><use data-c="32" xlink:href="#MJX-18-TEX-N-32"></use></g></g><g data-mml-node="mo" transform="translate(3689,0)"><use data-c="28" xlink:href="#MJX-18-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(4078,0)"><use data-c="31" xlink:href="#MJX-18-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(4800.2,0)"><use data-c="2B" xlink:href="#MJX-18-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(5800.4,0)"><use data-c="1D446" xlink:href="#MJX-18-TEX-I-1D446"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6445.4,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-18-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(6945.4,0)"><use data-c="1D441" xlink:href="#MJX-18-TEX-I-1D441"></use></g><g data-mml-node="mo" transform="translate(7833.4,0)"><use data-c="29" xlink:href="#MJX-18-TEX-N-29"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>W</mi><mo>∗</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mrow data-mjx-texclass="ORD"><mo>/</mo></mrow><mi>N</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container><script type="math/tex">W*log_2(1+S/N)</script></mark></td></tr><tr><td><span>解决</span></td><td><span>要提高带宽/提高码元进制</span></td><td><span>提高带宽/信噪比</span></td></tr></tbody></table></figure><p><span>阅读题目信息来选择公式。</span><strong><span>在题目模糊的情况下，如果题目没给出信噪比，选择奈氏准则；如果都给了，都计算选最小值</span></strong><span>。</span></p><p>&nbsp;</p><h3 id='2-14-数据的编码与调制'><span>2-1.4 数据的编码与调制</span></h3><h4 id='1基带信号与宽带信号'><span>1、基带信号与宽带信号</span></h4><p><span>（复习）信道：信号的传输媒介。一般用来表示向某一个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228102910244.png" referrerpolicy="no-referrer" alt="image-20220228102910244"></p><p><span>我们可以将信号分为数字和模拟信号（离散和连续），也可以分为基带信号和宽带信号。</span></p><p><span>基带信号：将数字信号1和0直接用两种不同的电压表示，再</span><strong><span>送到数字信道上去传输</span></strong><span>（基带传输）。</span></p><p><span>解释：来自信源的信号（如计算机输出的代表各种文字或图像文件的数据信号）都属于基带信号。基带信号就是发出的直接表达了要传输的信息的信号，比如我们说话的声波就是基带信号。</span></p><p><span>宽带信号：</span><strong><span>将基带信号进行调制后形成的频分复用模拟信号，再传送到模拟信道上去传输</span></strong><span>（宽带传输）。</span></p><p><span>解释：把基带信号经过载波调制后，把信号的频率范围搬移到较高的频段以便在信道中传输（即仅在一段频率范围内能够通过信道）。</span></p><p><span>举例：A与B通话，A的声音是基带信号（人声是低频） ----》调制为可以传输的高频宽带信号并发送给B ----》解调为基带信号，B听到了A的声音。</span></p><p><span>在传输距离较近时，计算机网络采用基带传输方式（近距离衰减小，从而信号内容不易发生变化）；</span>
<span>在传输距离较远时，计算机网络采用宽带传输方式（远距离衰减大，即使信号变化大也能最后过滤出来基带信号）。</span></p><h4 id='2编码和调制'><span>2、编码和调制</span></h4><p><span>简单来说：不论是何种数据，</span><strong><span>数据转化为数字信号是编码，转化为模拟信号是调制</span></strong><span>。数据有两种，经过器件也不同，但都遵循这一规则。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228105306770.png" alt="image-20220228105306770" style="zoom: 80%;" /></p><p><span>其中调制器都是调制；如果有放大器就是模拟数据。</span></p><h5 id='1数字数据编码为数字信号'><span>1、数字数据编码为数字信号</span></h5><p><img src="计算机网络学习笔记.assets/image-20220228122843426.png" alt="image-20220228122843426" style="zoom:67%;" /></p><p><span>有如下几种方式（1,4,5更重要）：</span></p><ol start='' ><li><p><span>非归零编码【NRZ】：编码容易实现，但</span><strong><span>没有检错功能，且无法判断一个码元的开始和结束，以至于收发双方难以保持同步</span></strong><span>。</span></p></li><li><p><span>归零编码【RZ】：信号电平在一个码元之内都要恢复到零的编码方式。低电平时间多，效率较低。在一个码元内就要发生电平跳变，与两种曼彻斯特编码相同。</span></p></li><li><p><span>反向不归零编码【NRZI】：信号电平如果发生翻转则表示0，不变则表示1。缺点和非归零编码差不多（全1数据不便识别）。和差分曼彻斯特编码的规则相同：</span><mark><span>同1异0</span></mark><span>。</span></p></li><li><p><span>曼彻斯特编码：将一个码元分成两个相等的间隔， 一个码元中前低后高为1，前高后低为0。也可以采用相反的规定。该编码的特点是，在每一个码元的中间出现电平跳变，位中间的跳变</span><strong><span>既作时钟信号（可用于同步），又作数据信号</span></strong><span>，但它所占的频带宽度是原始的基带宽度的两倍。注意：</span><strong><span>每一个码元都被调成两个电平，所以数据传输速率只有调制速率的1/2</span></strong><span>。它就是以太网、10BaseT网卡等使用的编码方式。</span></p></li><li><p><span>差分曼彻斯特编码：结合了反向不归零编码和曼彻斯特编码的特点。常用于局域网传输，其规则是：若码元为1，则前半个码元的电平与上一个码元的后半个码元的电平相同，若为0，则相反。该编码的特点是，在每个码元的中间，都有一次电平的跳转，可以实现自同步，且抗干扰性强于曼彻斯特编码。</span></p></li><li><p><span>4B/5B编码：比特流中插入额外的比特以打破一连串的0或1，即用5个比特来编码4个比特的数据，再传给接收方，因此称为4B/5B编码。编码效率为80%。</span></p></li></ol><h5 id='2数字数据调制为模拟信号'><span>2、数字数据调制为模拟信号</span></h5><p><span>数字数据调制技术在靠近信源的发送端将数字信号转换为模拟信号，而在靠近信宿的接收端将模拟信号还原为数字信号，分别对应于调制解调器的调制和解调或编码过程。</span></p><p><span>有3种基本的调制方法：</span></p><p><img src="计算机网络学习笔记.assets/image-20220228181249642.png" alt="image-20220228181249642" style="zoom: 80%;" /></p><ul><li><p><span>调幅：调整振幅，如将0调为无振幅。2ASK。</span></p></li><li><p><span>调频：调整频率。2FSK。</span></p></li><li><p><span>调相：调整相位，如用正余弦波分别代表0和1。2PSK。</span></p></li><li><p><span>还有调频+调相结合：QAM。</span></p></li></ul><h5 id='3模拟数据编码为数字信号'><span>3、模拟数据编码为数字信号</span></h5><p><span>模拟信号都是正弦波叠加而成的，而计算机内部处理的是二进制数据，处理的都是数字音频（0、1串），所以需要将模拟音频通过采样、量化转换成有限个数字表示的离散序列（即实现音频数字化）。</span></p><p><span>最典型的例子就是</span><strong><span>对音频信号进行编码的脉码调制（PCM）</span></strong><span>，在计算机应用中，能够达到最高保真水平的就是PCM编码，如wav等格式中均有使用。它主要包括以下的3步：</span></p><ol start='' ><li><p><strong><span>抽样</span></strong><span>：对模拟信号周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号能无失真地代表被抽样的模拟数据，要使用采样定理进行采样：</span><strong><span>采样频率≥ 2*信号最高频率</span></strong><span>。举例：如果模拟信号由a、b波叠加，a、b频率分别为2 Hz、1 Hz，那么采样频率需要大于等于2 * 2 Hz即大于等于4 Hz。</span></p></li><li><p><strong><span>量化</span></strong><span>：把抽样取得的电平幅值按照一定的分级标度转化为对应的数字值，并取整数，这就把连续的电平幅值转换为离散的数字量。</span></p></li><li><p><strong><span>编码</span></strong><span>：把量化的结果转换为与之对应的二进制编码。</span></p></li></ol><h5 id='4模拟数据调制为模拟信号'><span>4、模拟数据调制为模拟信号</span></h5><p><span>为了实现传输的有效性，可能需要较高的频率（高频抗干扰）。这种调制方式还可以使用频分复用技术，充分利用带宽资源。在电话机和本地交换机所传输的信号是采用模拟信号传输模拟数据的方式；模拟的声音数据是加载到模拟的载波信号中传输的。也就是将频率较高的模拟数据调制为频率更高的模拟信号（通过载波信号）。</span></p><p>&nbsp;</p><h3 id='2-15-数据交换方式'><span>2-1.5 数据交换方式</span></h3><p><img src="计算机网络学习笔记.assets/image-20220228190427111.png" alt="image-20220228190427111" style="zoom: 33%;" /></p><p><span>数据报交换、报文交换是无连接，电路交换和虚电路方式是有连接。</span></p><h4 id='1电路交换'><span>1、电路交换</span></h4><p><span>电路交换的原理：在数据传输期间，源结点与目的结点之间有一条由中间结点构成的专用物理连接线路，在数据传输结束之前，这条线路一直保持。</span></p><p><span>三个阶段：</span></p><p><img src="计算机网络学习笔记.assets/image-20220228191253129.png" referrerpolicy="no-referrer" alt="image-20220228191253129"></p><p><span>首先建立连接后发送呼叫请求，交换设备（路由）A通过算法得知下一个交换设备，最后转发至目的节点。</span></p><p><span>特点：</span><strong><span>独占资源，采用全双工通信</span></strong><span>，实时性好，用户始终占用端到端的固定传输带宽。适用于远程批处理信息传输或系统间实时性要求高的大量数据传输的情况。</span><strong><span>不具备差错控制功能</span></strong><span>。</span></p><p><span>注意：电路交换需要预分配带宽，而报文交换、两种分组交换（数据报、虚电路）都是不需要预分配带宽的。原因是：报文交换、分组交换的带宽是不固定的，这样当信道空闲的时候就可以降低带宽提高信道的利用率。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228191544989.png" referrerpolicy="no-referrer" alt="image-20220228191544989"></p><h4 id='2报文交换'><span>2、报文交换</span></h4><p><span>报文：报文(message)是网络中交换与传输的数据单元，即站点一次性要发送的数据块。报文包含了将要发送的完整的数据信息，其长短很不一致，长度不限且可变。注意</span><strong><span>不能用于实时通信</span></strong><span>。</span></p><p><span>报文交换的原理：没有独占资源，无需在两个站点之间建立一条专用通路，其数据传输的单位是报文，传送过程采用</span><strong><span>存储转发</span></strong><span>方式。交换设备会自行选择路径。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228191814913.png" referrerpolicy="no-referrer" alt="image-20220228191814913"></p><p><img src="计算机网络学习笔记.assets/image-20220228191916742.png" referrerpolicy="no-referrer" alt="image-20220228191916742"></p><h4 id='3分组交换'><span>3、分组交换</span></h4><p><span>分组：大多数计算机网络都不能连续地传送任意长的数据，所以实际上网络系统把数据分割成小块，加上控制信息然后逐块发送，这种小块就称作分组（packet）。对报文交换的主要改进是减少了传输时延。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228192232015.png" referrerpolicy="no-referrer" alt="image-20220228192232015"></p><p><span>分组交换的原理：分组交换与报文交换的工作方式基本相同，都采用存储转发方式，形式上的主要差别在于，</span><strong><span>分组交换网中要限制所传输的数据单位的长度</span></strong><span>，一般选128 B。发送节点首先对从终端设备送来的数据报文进行接收、存储，而后将报文划分成一定长度的分组，并以分组为单位进行传输和交换。接收结点将收到的分组组装成信息或报文。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228192842784.png" referrerpolicy="no-referrer" alt="image-20220228192842784"></p><p><span>分组交换也有两种方式来实现。</span></p><h5 id='1数据报方式'><span>1、数据报方式</span></h5><p><img src="计算机网络学习笔记.assets/image-20220228193351888.png" referrerpolicy="no-referrer" alt="image-20220228193351888"></p><h6 id='步骤'><span>步骤</span></h6><ol start='' ><li><p><strong><span>源主机（A）将报文分成多个分组</span></strong><span>，依次发送到直接相连的结点（A）。</span></p></li><li><p><span>结点A收到分组后，对每个分组</span><strong><span>差错检测和路由选择</span></strong><span>，不同分组的下一跳结点可能不同。</span></p></li><li><p><span>结点C收到分组P1后，对分组P1进行</span><strong><span>差错检测</span></strong><span>，若正确则向A发送确认信息，A收到C确认后则丢弃分组P1副本，以此类推。</span></p></li><li><p><span>主机B收到了所有分组。</span></p></li></ol><h6 id='特点'><span>特点</span></h6><ol start='' ><li><p><span>数据报方式</span><strong><span>为网络层提供无连接服务</span></strong><span>。发送方可随时发送分组，网络中的结点可随时接收分组。</span></p></li><li><p><span>同一报文的不同分组达到目的结点时可能发生</span><strong><span>乱序、重复与丢失</span></strong><span>。</span></p></li><li><p><span>每个分组在传输过程中都必须携带源地址和</span><strong><span>目的地址</span></strong><span>，以及分组号，即</span><strong><span>控制信息</span></strong><span>。</span></p></li><li><p><span>分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。当通过交换结点的通信量较大或网络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组。</span></p></li><li><p><span>网络具有冗余路径，当某一交换结点或一段链路出现故障时，可相应地更新</span><strong><span>转发表</span></strong><span>，寻找另一条路径转发分组，对故障的适应能力强，适用于突发性通信，不适于长报文、会话式通信等</span><strong><span>出错率高的情况</span></strong><span>。</span></p></li></ol><h5 id='2虚电路方式'><span>2、虚电路方式</span></h5><p><span>虚电路：一条源主机到目的主机类似于电路的路径（逻辑连接，电路交换是物理的），路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项记录了一个打开的虚电路的信息。虚电路将数据报方式和电路交换方式结合，以发挥两者优点。</span></p><p><span>虚电路交换方式提供了两种机制：永久性虚电路（PVC）和交换性虚电路（SVC），前者是一些已经连接好的而且不是临时性的，后者是会话完就撤销的临时性连接。所以虚电路交换方式</span><strong><span>不一定就是临时性的</span></strong><span>。</span></p><p><span>三个阶段和电路交换相同：建立连接（源发送呼叫请求，收到应答后才算建立连接）、数据传输（控制信息中</span><strong><span>不需携带目的地址</span></strong><span>，因为有已经确定好的专用路径，</span><strong><span>路由选择体现在这条逻辑通路的建立</span></strong><span>；但</span><strong><span>要携带虚电路号</span></strong><span>来方便分组的还原）、释放连接。</span></p><h6 id='特点-2'><span>特点</span></h6><ol start='' ><li><p><span>虚电路方式</span><strong><span>为网络层提供连接服务</span></strong><span>。源节点与目的结点之间建立一条逻辑连接，而非实际物理连接。</span></p></li><li><p><span>一次通信的所有分组都通过虚电路顺序传送，分组不需携带源地址、目的地址等信息，包含虚电路号（VCID，用以进行分组转发），相对数据报方式开销小，同一报文的不同分组到达目的结点时不会乱序、重复或丢失。</span></p></li><li><p><span>虚电路仍然是基于交换的，不需要为每条虚电路预留带宽。</span></p></li><li><p><span>分组通过虚电路上的每个节点时，</span><strong><span>节点只进行差错检测，不需进行路由选择，路由选择在建立虚电路时进行</span></strong><span>。</span></p></li><li><p><strong><span>每个节点可能与多个节点之间建立多条虚电路</span></strong><span>，每条虚电路支持特定的两个端系统之间的数据传输，可以对两个数据端点的流量进行控制，两个端系统之间也可以有多条虚电路为不同的进程服务。</span></p></li><li><p><span>致命弱点：当网络中的某个结点或某条链路出故障而彻底失效时，则所有经过该结点或该链路的虚电路将遭到破坏。这导致它</span><strong><span>不适用于出错率高的情况</span></strong><span>。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220228195037204.png" referrerpolicy="no-referrer" alt="image-20220228195037204"></p><h4 id='4三种方式的比较'><span>4、三种方式的比较</span></h4><p><img src="计算机网络学习笔记.assets/image-20220228193043354.png" referrerpolicy="no-referrer" alt="image-20220228193043354"></p><p><span>传送数据量大，且传送时间远大于呼叫时，选择电路交换。电路交换传输时延最小。</span></p><p><span>当端到端的通路有很多段的链路组成时，采用分组交换传送数据较为合适。</span></p><p><span>从信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式的数据通信。</span></p><p>&nbsp;</p><h2 id='2-2-物理层的传输'><span>2-2 物理层的传输</span></h2><h3 id='2-21-物理层的传输介质'><span>2-2.1 物理层的传输介质</span></h3><p><span>传输介质也称传输媒体/传输媒介，它就是数据传输系统中在发送设备和接收设备之间的物理通路。</span></p><p><span>注意，</span><strong><span>传输媒体并不是物理层</span></strong><span>。传输媒体在物理层的下面，因为物理层是体系结构的第一层，因此有时称传输媒体为第0层。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么意思。但物理层规定了电气特性，因此能够识别所传送的比特流。</span></p><h4 id='1导向性传输介质'><span>1、导向性传输介质</span></h4><p><span>一般是真正的”线路“，如铜线和光纤。</span></p><p><span>（1）双绞线：由两根采用一定规则并排绞合的、相互绝缘的铜导线组成。绞合可以减少对相邻导线的电磁干扰（电磁场相互抵消）。为了进一步提高抗电磁干扰能力，可在双绞线的外面再加上金属丝编织的屏蔽层，成为屏蔽双绞线（STP），无屏蔽层的双绞线就称为非屏蔽双绞线（UTP）。</span></p><blockquote><p><span>双绞线特点：价格低廉，最为常用。距离为几公里或几十公里。距离太远时，对于模拟传输，要用</span><strong><span>放大器</span></strong><span>放大衰减的信号；对于数字传输，要用</span><strong><span>中继器</span></strong><span>将失真的信号修复。</span></p></blockquote><p><span>（2）同轴电缆：按特性阻抗数值的不同，通常将同轴电缆分为两类：50Ω同轴电缆和75Ω同轴电缆。50Ω同轴电缆主要用于传送基带数字信号，又称为</span><strong><span>基带同轴电缆</span></strong><span>，在</span><strong><span>局域网</span></strong><span>中广泛应用；75Ω同轴电缆主要用于传送宽带信号，又称为</span><strong><span>宽带同轴电缆</span></strong><span>，主要用于</span><strong><span>有线电视系统</span></strong><span>。(复习：宽带信号由基带信号进行模拟调制得到)。带宽高不是得益于铜芯粗、阻抗标准，而是得益于屏蔽性高。注意，只有一根电缆不代表只有一条信道。</span></p><p><img src="计算机网络学习笔记.assets/image-20220228200034698.png" referrerpolicy="no-referrer" alt="image-20220228200034698"></p><blockquote><p><span>同轴电缆特点：价格比双绞线略贵，抗干扰性很好，传输距离更远。</span></p></blockquote><p><span>（3）光纤：利用光脉冲进行通信。有光脉冲表示1，无光脉冲表示0。外层是低折射率的包层，内层是高折射率的纤芯，光在纤芯中“反弹”。多模光纤是同时发出不同入射角的光，单模光纤在横向模式中直线传播。</span></p><p><img src="计算机网络学习笔记.assets/image-20220301090517354.png" referrerpolicy="no-referrer" alt="image-20220301090517354"></p><blockquote><p><span>光纤特点：超低损耗，传输超远距离，保密性好，抗干扰性强。</span></p></blockquote><p><img src="计算机网络学习笔记.assets/image-20220228215139748.png" alt="image-20220228215139748" style="zoom:67%;" /></p><p><img src="计算机网络学习笔记.assets/image-20220228215205433.png" alt="image-20220228215205433" style="zoom:67%;" /></p><h4 id='2非导向性传输介质'><span>2、非导向性传输介质</span></h4><p><span>一般是自由空间，如空气等。</span></p><p><span>（1）无线电波：较强穿透能力，可传较远距离，广泛用于通信领域（如手机通信）。</span></p><p><span>（2）微波：通信频率高，频段范围宽，数据率高。首先使用卫星通信，然后地面有中继站进行地面微波接力通信。</span></p><blockquote><p><span>卫星通信的优点：通信容量大，距离远、覆盖广，支持广播通信和多址通信；</span></p><p><span>卫星通信的缺点：实验较长，受太阳活动、气候变化影响，误码率较高且成本高。</span></p></blockquote><p><span>（3）红外线和激光：把要传输的信号分别转换为各自的信号格式，即红外光信号和激光信号，再在空间中传播。</span></p><blockquote><p><span>这三种方式中，无线电波的信号向所有方向传播，微波、红外线、激光都是固定方向传播的。</span></p></blockquote><p>&nbsp;</p><h3 id='2-22-物理层的传输设备'><span>2-2.2 物理层的传输设备</span></h3><h4 id='1中继器'><span>1、中继器</span></h4><p><span>在信号传输过程中，由于存在损耗，信号功率会逐渐衰减，衰减到一定程度时将造成信号失真，因此会导致接收错误。</span></p><p><span>中继器（RP Repeater）的功能：对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离，延长网络的长度。用来</span><strong><span>再生数字信号</span></strong><span>（模拟信号使用</span><strong><span>放大器</span></strong><span>）。</span></p><p><span>中继器的两端：两端的网络部分</span><strong><span>是网段，而不是子网</span></strong><span>，适用于完全相同（</span><strong><span>同层的两端的网段协议需要相同</span></strong><span>，如中继器在物理层那么物理层协议要相同而不管数据链路层，上层也同理）的两类网络的互连，且两个网段</span><strong><span>速率要相同</span></strong><span>。两端可连接相同或不同的媒体。</span></p><p><span>中继器只将某一电缆段上的数据发送到另一电缆上，仅作用于信号的电气部分，并不管数据中是否有错误数据或不适于网段的数据。</span><strong><span>中继器不存储转发</span></strong><span>。</span></p><p><span>5-4-3规则：网络标准中都对信号的延迟范围作了具体的规定，因而中继器只能在规定的范围内进行（不能无限使用），否则会网络故障。5-4-3指：最多有5个网段，其中最多4台中继器，最多接入3台工作站。</span></p><p><img src="计算机网络学习笔记.assets/image-20220301092221786.png" alt="image-20220301092221786" style="zoom:50%;" /></p><h4 id='2集线器多口中继器）'><span>2、集线器（多口中继器）</span></h4><p><span>集线器和中继器都是转发器（Repeater）的一种。</span></p><p><span>集线器的功能： 对信号进行</span><strong><span>再生放大转发</span></strong><span>，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。</span><strong><span>不具备信号的定向传送能力</span></strong><span>，是一个共享式设备（广播式的设备，用户都可以接收到信号）。</span></p><p><span>拥挤线器连接的工作站同属一个冲突域、同属一个广播域。</span></p><p><img src="计算机网络学习笔记.assets/image-20220301092438778.png" referrerpolicy="no-referrer" alt="image-20220301092438778"></p><p><span>例如：多口集线器带宽为100 Mbps，那么10台主机每人只有10 Mbps。</span></p><p><span>拓扑结构：一般是星型拓扑。</span></p><p>&nbsp;</p><h1 id='chapter-3-数据链路层'><span>Chapter 3 数据链路层</span></h1><p><img src="计算机网络学习笔记.assets/image-20220319172044879.png" referrerpolicy="no-referrer" alt="image-20220319172044879"></p><h2 id='3-1-数据链路层的功能'><span>3-1 数据链路层的功能</span></h2><h3 id='3-11-概述'><span>3-1.1 概述</span></h3><h4 id='1研究思想'><span>1、研究思想</span></h4><p><span>数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报，类似一个搬运者。</span></p><p><span>虽然实际情况下，数据从A到B需要经过的是封装、解封等流程的不断重复，但我们可以直接将此过程简化为水平传输。</span></p><h4 id='2基本概念'><span>2、基本概念</span></h4><ul><li><p><span>结点：主机、路由器</span></p></li><li><p><span>链路：两结点间的</span><strong><span>物理通道</span></strong><span>，链路的传输介质主要有双绞线、光纤和微波。分为有线链路、无线链路。</span></p></li><li><p><span>数据链路：网络中两个结点之间的</span><strong><span>逻辑通道</span></strong><span>，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。</span></p></li><li><p><span>帧：链路层的协议数据单元，封装网络层数据报。</span></p></li></ul><h4 id='3功能概述'><span>3、功能概述</span></h4><p><span>数据链路层在物理层提供服务的基础上向网络层提供服务。</span></p><p><span>最基本的服务是将源自网络层来的数据</span><strong><span>可靠地传输</span></strong><span>到相邻节点的目标机网络层。</span></p><p><span>主要作用是：加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接</span><strong><span>改造成为逻辑上无差错的数据链路</span></strong><span>，使之对网络层表现为一条无差错的链路。</span></p><ul><li><p><span>功能一：为网络层提供服务。无确认无连接服务，有确认无连接服务，有确认面向连接服务。</span><strong><span>有连接一定有确认，有确认不一定有连接</span></strong><span>！</span></p></li><li><p><span>功能二：</span><strong><span>链路管理</span></strong><span>，即连接的建立、维持、释放（用于面向连接的服务）。</span></p></li><li><p><span>功能三：</span><strong><span>组帧</span></strong><span>，也就是封装成帧。</span></p></li><li><p><span>功能四：</span><strong><span>流量控制</span></strong><span>，发出限制发送方发送速度减缓一些等的提示，实际上是对发送方的数据流量的控制。</span></p></li><li><p><span>功能五：</span><strong><span>差错控制</span></strong><span>（帧错/位错）。</span></p></li></ul><p>&nbsp;</p><h3 id='3-1-2-组帧和透明传输'><span>3-1-2 组帧和透明传输</span></h3><h4 id='1封装成帧'><span>1、封装成帧</span></h4><p><img src="计算机网络学习笔记.assets/image-20220319174922285.png" referrerpolicy="no-referrer" alt="image-20220319174922285"></p><p><span>封装成帧：在一段数据的前后部分添加首部和尾部，这样就构成了一个帧。接收端在收到物理层输送的比特流后，就能根据首部和尾部的标记，从比特流中识别帧的开始和结束。</span></p><p><span>帧的首部和尾部包含许多的控制信息，其中一个重要作用是帧定界（确定帧的界限）。</span></p><p><span>帧同步：接收方应当能从接收到的二进制比特流中区分出帧的起始和终止。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320093456975.png" referrerpolicy="no-referrer" alt="image-20220320093456975"></p><p><span>组帧的四种方法：</span><strong><span>1、字符计数法；2、字符（节）填充法；3、零比特填充法；4、违规编码法</span></strong><span>。将在下一部分详细说明。</span></p><h4 id='2透明传输'><span>2、透明传输</span></h4><p><span>透明传输是指：不管所传数据是什么样的比特组合，都应当能够在链路上传送。（链路层“看不见”传输的内容，也就是帧的数据部分）。我们要实现的就是透明传输。</span></p><p><span>当所传数据中的比特组合恰巧与某一个控制信息完全一样时，就必须采取适当的措施，使收方不会将这样的数据误认为是某种控制信息。这样才能保证数据链路层的传输是透明的。所以我们需要一些特殊的组帧方法。</span></p><h5 id='1字符计数法字节计数法）'><span>1.字符计数法（字节计数法）</span></h5><p><span>帧首部使用一个计数字段（第一个字节，八位）来标明帧内字符数。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320100342700.png" referrerpolicy="no-referrer" alt="image-20220320100342700"></p><p><span>如图，有些类似数组的标记方式，在首位标明这个帧共有多少字符。问题也出在此：如果第一帧的第一位错误，那后面所有帧都会受影响，故应用较少。</span></p><h5 id='2字符填充法'><span>2.字符填充法</span></h5><p><span>用Start of header（SOH）表示帧首部，End of transmission（EOT）表示帧尾部。但是，由于SOH、EOT都只是01串，所以有可能会有这两种情况：</span></p><p><img src="计算机网络学习笔记.assets/image-20220320101204617.png" referrerpolicy="no-referrer" alt="image-20220320101204617"></p><p><span>这是正常情况：数据部分是由文本文件组成，都是ASCII码，不管从键盘上输入什么字符都可以放在帧里传过去，即透明传输。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320104220762.png" referrerpolicy="no-referrer" alt="image-20220320104220762"></p><p><span>这是异常情况：数据部分是非ASCII码的其他文件组成的，如图像等，这个时候就需要字符填充法。</span></p><p><span>那么什么是字符填充法？简单来说就是在EOT、SOH前加上转义字符ESC，告诉接收端什么是真正的EOT等。如果数据中出现了ESC，那么就在这个ESC前再加一个ESC。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320110416628.png" alt="image-20220320110416628" style="zoom:67%;" /></p><h5 id='3零比特填充法比特填充）'><span>3.零比特填充法（比特填充）</span></h5><p><span>这种方法首部、尾部都是0111 1110。那么数据中出现了这个0111 1110应该怎么办呢？简而言之是 </span><strong><span>5“1”，1“0”</span></strong><span>法，让数据中没有6个及以上的连续的“1”出现。操作如下：</span></p><ol start='' ><li><p><span>在发送端，扫描整个信息字段，只要连续5个1，就立即填入1个0。</span></p></li><li><p><span>在接收端收到一个帧时，先找到标志字段确定边界，再用硬件对比特流进行扫描。发现连续5个1时，就把后面的0删除。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220320110823797.png" referrerpolicy="no-referrer" alt="image-20220320110823797"></p><p><span>这样就保证了透明传输，在传送的比特流中可以传送任意比特组合，而不会引起对帧边界的判断错误。</span></p><h5 id='4违规编码法'><span>4.违规编码法</span></h5><p><span>比如说，曼彻斯特编码中要么前高后低为1，前低后高为0或者反过来，没有高高和低低两种编码。那么，就可以使用高高和低低来定界帧的起始和终止。这是在物理层的编码中实现的。</span></p><p><span>综上，因为字节计数法中Count字段的脆弱性（其值若有差错将导致灾难性后果）及字符填充实现上的复杂性和不兼容性，目前较普遍使用的帧同步法是比特填充和违规编码法。</span></p><h3 id='3-13-差错控制和检错编码'><span>3-1.3 差错控制和检错编码</span></h3><h4 id='1差错'><span>1、差错</span></h4><h5 id='1产生原因'><span>1.产生原因</span></h5><p><span>概括来说，传输中的差错都是由于噪声引起的。引起差错的原因一般有两种：</span></p><ol start='' ><li><p><span>全局性：由于线路本身电气特性所产生的随机噪声(</span><strong><span>随机热噪声</span></strong><span>)，是信道固有的，随机存在的。解决办法：</span><strong><span>提高信噪比</span></strong><span>来减少或避免干扰。（对传感器下手）</span></p></li><li><p><span>局部性：外界特定的短暂原因所造成的</span><strong><span>冲击噪声</span></strong><span>，是产生差错的主要原因。解决办法：通常</span><strong><span>利用编码技术</span></strong><span>来解决（自动重传请求ARQ，直接让发送方重发，和前向纠错FEC，让接收端负责检错纠错）。</span></p></li></ol><h5 id='2差错分类'><span>2.差错分类</span></h5><p><span>差错可以分为位错和帧错两种。</span></p><ol start='' ><li><p><span>位错：某个特定的比特位出错，导致1/0之间的变化。</span></p></li><li><p><span>帧错：帧为单位的丢失、重发、时序问题。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220320111857763.png" referrerpolicy="no-referrer" alt="image-20220320111857763"></p><p><span>对不同链路，我们可以采取不同的传输机制，如上。</span></p><h4 id='2差错控制---检错编码'><span>2、差错控制 - 检错编码</span></h4><p><img src="计算机网络学习笔记.assets/image-20220320112038035.png" referrerpolicy="no-referrer" alt="image-20220320112038035"></p><h5 id='1物理层数据链路层的编码的区别'><span>1.物理层、数据链路层的编码的区别</span></h5><p><span>数据链路层的“编码”和物理层的“数据编码与调制”不同。</span></p><ul><li><p><span>物理层编码针对的是单个比特，解决传输过程中比特的同步等问题，如曼彻斯特编码。</span></p></li><li><p><span>数据链路层的编码针对的是一组比特，它通过冗余码的技术实现一组二进制比特串在传输过程是否出现了差错。</span></p></li></ul><p><span>“冗余码”的概念：</span></p><ul><li><p><span>在数据发送之前，先按某种关系附加上一定的冗余位，构成一个</span><strong><span>符合某一规则</span></strong><span>（如符合奇偶性规则等）的码字后再发送。</span></p></li><li><p><span>当要发送的有效数据变化时，相应的冗余位也随之变化，使码字遵从不变的规则。</span></p></li><li><p><span>接收端根据收到码字是否仍符合原规则，判断是否出错。</span></p></li></ul><h5 id='2奇偶校验码'><span>2.奇偶校验码</span></h5><p><span>对于n-1位信息元，我们添加一位校验元，使得这n位数据中：</span></p><p><span>奇校验码：“1”的个数为奇数个，或者每位异或得1；</span></p><p><span>偶校验码：“1”的个数为偶数个，或者每位异或得0。</span></p><p><span>但奇偶校验码有检错局限，只能检查出奇数个比特错误，检错能力为50%。</span></p><h5 id='3crc校验码'><span>3.CRC校验码</span></h5><p><span>过程说明：先准备要传输的数据A，再准备一个已经约定好的生成多项式B，用A除以B得到余数C（C就是冗余码，或称为FCS帧检验序列），发送端最终发送的数据是A+C；接收端用接收到的值A+C除以B，如果余数为0就判定无错，接收数据。</span></p><p><span>CRC是具有纠错能力的，但是在数据链路层中只用到了它的检错功能，检测到帧错直接丢弃，是为了方便协议的实现。</span></p><p><span>在计算机中：</span></p><ul><li><p><span>先准备待传有效数据（称为一组，d位），双方商定一个生成多项式（r+1位，也就是阶为r，TIPS：多项式N位，阶为N-1）；</span></p></li><li><p><span>在有效数据后加上r位的‘0’，再去除以生成多项式，得到余数（r位FCS）；</span></p></li><li><p><span>每个组都加上FCS/冗余码（r位）构成帧再发送；</span></p></li><li><p><span>接收方收到这d+r位数据，除以生成多项式，余数为0则认为正确，否则丢弃。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220320163826893.png" referrerpolicy="no-referrer" alt="image-20220320163826893"></p><p><span>注意，这里的“除法”不是普通数学中的除法，而是</span><strong><span>模二除法</span></strong><span>。模二除法本质是没有进位退位的除法，简单来说可以看成按位异或（同0异1，1101模二除以0010得1111）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320164506810.png" referrerpolicy="no-referrer" alt="image-20220320164506810"></p><p><span>FCS的生成以及接收端CRC检验都是由硬件实现，处理很迅速，因此不会延误数据的传输。</span></p><p><span>经过这样的校验，我们可以认为凡是接收端在数据链路层接收的帧均无差错。</span></p><h4 id='3差错控制---纠错编码'><span>3、差错控制 - 纠错编码</span></h4><p><span>上一部分的CRC、奇偶校验都是“检错编码”，也就是说，只能认识到有错误而不知道错误在何处甚至精确到某一位。海明码和前几种方法最大的不同就是，在海明码的工作流程中需要确定校验码和数据的位置。但海明码也</span><strong><span>只能发现双比特错、纠正单比特错</span></strong><span>。</span></p><h5 id='1码矩海明距离）'><span>1.码矩（海明距离）</span></h5><p><span>在一个编码系统中，两个合法编码(码字)的对应比特取值不同的比特数称为这两个码字的海明距离(码距)，一个有效编码集中,任意两个合法编码(码字)的海明距离的最小值称为该编码集的海明距离(码距)。</span></p><p><span>举例来说：</span></p><ul><li><p><span>在编码系统A中有：000,001,010,011四个编码，它们之间海明距离最小值为1，所以码矩为1。</span></p></li><li><p><span>编码系统B有001,010,100三个编码，码矩为2。</span></p></li><li><p><span>编码系统C有111,000两种，码矩为3。</span></p></li></ul><p><span>在默认只有一个比特出错的情况下，码矩为1不可被纠错也不可被检错，码矩为2可检测出1位错但也不可被纠正，码矩为3可检错可纠正。公式：</span><strong><span>如果有d个比特出错，检错需要码矩为d+1，纠错需要2d+1</span></strong><span>。</span></p><h5 id='2确认检验码位数r'><span>2.确认检验码位数r</span></h5><p><span>我们称数据/信息有m位，冗余码/校验码有r位。r位校验码有2^r^种取值；若认为只有一个比特出错，那么共有m+r种错，还有一种无错的情况，所以共m+r+1种。所以已知m的情况下，需要这样计算r：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n898" cid="n898" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="14.727ex" height="1.954ex" role="img" focusable="false" viewBox="0 -725.5 6509.3 863.5" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.312ex;"><defs><path id="MJX-6-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-6-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-6-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-6-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-6-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-6-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,413) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45F" xlink:href="#MJX-6-TEX-I-1D45F"></use></g></g></g><g data-mml-node="mo" transform="translate(1179.7,0)"><use data-c="2265" xlink:href="#MJX-6-TEX-N-2265"></use></g><g data-mml-node="mi" transform="translate(2235.5,0)"><use data-c="1D45A" xlink:href="#MJX-6-TEX-I-1D45A"></use></g><g data-mml-node="mo" transform="translate(3335.7,0)"><use data-c="2B" xlink:href="#MJX-6-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(4335.9,0)"><use data-c="1D45F" xlink:href="#MJX-6-TEX-I-1D45F"></use></g><g data-mml-node="mo" transform="translate(5009.1,0)"><use data-c="2B" xlink:href="#MJX-6-TEX-N-2B"></use></g><g data-mml-node="mn" transform="translate(6009.3,0)"><use data-c="31" xlink:href="#MJX-6-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mi>r</mi></mrow></msup><mo>≥</mo><mi>m</mi><mo>+</mo><mi>r</mi><mo>+</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container></div></div><p><span>例如，需发送D为1100，则m=4，r=3，所以D的海明码有7位，原数据、校验码分别是4位、3位。</span></p><h5 id='3确定校验码和数据的位置'><span>3.确定校验码和数据的位置</span></h5><p><span>校验码放在2^n^的位置，即1,2,4,...的位置。  可以用通配符的形式来理解校验码对应管辖的数据，比如有3位海明码，1</span><span>*</span><span>*</span><span>、</span><span>*</span><span>1</span><span>*</span><span>、</span><span>*</span><span>*</span><span>1分别是指第1/2/3位为1的2进制序号。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320171015184.png" alt="image-20220320171015184" style="zoom:80%;" /></p><p><span>比如，序号7的二进制为111，按照通配符发现它满足1</span><span>*</span><span>*</span><span>、</span><span>*</span><span>1</span><span>*</span><span>、</span><span>*</span><span>*</span><span>1三种，所以第七位被三个海明码（序号为1,2,4）管理。假设这里采用偶校验，则</span></p><p><img src="计算机网络学习笔记.assets/image-20220320171130028.png" alt="image-20220320171130028" style="zoom:80%;" /></p><p><span>最后得到完整海明码：110 0001。 </span></p><h5 id='5检错和纠错'><span>5.检错和纠错</span></h5><p><span>我们先把几个校验码和对应的位数写出来，如图：</span></p><p><img src="计算机网络学习笔记.assets/image-20220320171402042.png" alt="image-20220320171402042" style="zoom:80%;" /></p><p><span>接下来，我们设几个未知数x，并通过奇/偶校验计算出它们的值，从左到右组合起来得到一个二进制数，它的10进制值就是错误的位数。</span></p><p><img src="计算机网络学习笔记.assets/image-20220320171727495.png" alt="image-20220320171727495" style="zoom:80%;" /></p><p>&nbsp;</p><h2 id='3-2-流量控制可靠传输机制和三种协议'><span>3-2 流量控制、可靠传输机制和三种协议</span></h2><h3 id='3-21-流量控制与可靠传输'><span>3-2.1 流量控制与可靠传输</span></h3><p><span>简而言之，发送太快、接收太慢会造成传输出错。很多层都有流量控制的功能，但方法不一样。数据链路层的流量控制是点对点的，而传输层的流量控制是端到端的：</span></p><ul><li><p><span>数据链路层流量控制手段：</span><strong><span>接收方收不下就不回复确认，能收下就发送确认帧给接收方</span></strong><span>。</span></p></li><li><p><span>传输层流量控制手段：接收端给发送端一个窗口公告。</span></p></li></ul><h4 id='1停止-等待协议简介'><span>1、停止-等待协议简介</span></h4><p><img src="计算机网络学习笔记.assets/image-20220320191927833.png" alt="image-20220320191927833" style="zoom: 80%;" /></p><p><span>这种协议效率较低，每发一帧就需要等待。 可以看成是接收窗口和发送窗口都只有一帧的滑动窗口协议。</span></p><h5 id='2-滑动窗口协议简介'><span>2 滑动窗口协议简介</span></h5><p><span>共分为两种：</span></p><p><span>后退N帧协议（GBN）：发送窗口大于1，接收窗口等于1；</span></p><p><img src="计算机网络学习笔记.assets/image-20220321122522723.png" alt="image-20220321122522723" style="zoom:67%;" /></p><p><span>选择重传协议（SR）：发送窗口、接收窗口都大于1。</span></p><p><span>本章中我们要解决的问题有：</span></p><ul><li><p><span>可靠传输：保障发送端发送内容和接收端接收内容相同。</span></p></li><li><p><span>流量控制：控制发送速率，使接收方有足够的缓冲空间来接收每一帧。</span></p></li></ul><p><span>我们通过滑动窗口协议来解决：流量控制（收不下就不给确认信号，想发也发不了）；可靠传输（发送方自动重传，ARQ机制）。</span></p><p><span>上述的这三个协议以前是作用于链路层，现在是网络层（网络质量提高）。</span></p><h3 id='3-22-停止-等待协议'><span>3-2.2 停止-等待协议</span></h3><h4 id='1停止-等待协议的使用场景'><span>1、停止-等待协议的使用场景</span></h4><ol start='' ><li><p><span>为什么要使用停止-等待协议：除了比特出差错，底层信道还会出现丢包（数据包的丢失）问题；另外还要实现流量控制。</span></p></li><li><p><span>使用情况：虽然现在常用全双工通信方式，但仅考虑一方发送数据（发送方），一方接收数据（接收方）的情况。另外，因为是在讨论可靠传输的原理，所以并不考虑数据是在哪一个层次上传送的。</span></p></li><li><p><span>协议内容：“停止-等待”的含义是，每发送完一个分组就停止发送，等待对方确认，在收到确认后再发送下一个分组。</span></p></li><li><p><span>应用场景：无差错、有差错都可以应用。</span></p></li></ol><h4 id='2无差错情况'><span>2、无差错情况</span></h4><p><span>无差错：注意，发送0/1帧是编号，但不是相同的帧。原因是，在无差错的情况下，每发送1个数据帧就停止并等待，因此用0/1来编号就足够。</span></p><p><img src="计算机网络学习笔记.assets/image-20220321213624840.png" alt="image-20220321213624840" style="zoom:67%;" /></p><h4 id='3有差错情况1-数据帧丢失或者帧出错'><span>3、有差错情况1-数据帧丢失或者帧出错</span></h4><p><img src="计算机网络学习笔记.assets/image-20220321213816343.png" alt="image-20220321213816343" style="zoom: 67%;" /></p><p><span>如图，第一个1号帧丢失了，导致发送方一直未接收到确认数据；当超时计时器确认超时后（这个时间应当长于平均RTT），就会重传1号帧。</span></p><p><span>出错的情况类似，发送方接收到的确认信号表明帧出错了就重新传输。</span></p><p><span>注意：没发完一个帧后都需要保留其副本（保证可以重发）。且数据帧和却认真都必须编号。</span></p><h4 id='4有差错情况2-ack丢失'><span>4、有差错情况2-ACK丢失</span></h4><p><span>这种情况中，发送方没有收到确认帧，所以超时重传，这样接收方就收到了两次1号帧，就会</span><strong><span>丢弃第二次接收到的1号帧并重新传输确认帧</span></strong><span>。</span></p><p><img src="计算机网络学习笔记.assets/image-20220321214436540.png" alt="image-20220321214436540" style="zoom:67%;" /></p><h4 id='5有差错情况3-ack迟到'><span>5、有差错情况3-ACK迟到</span></h4><p><span>情况如下：发送方发送了0号帧后接收方的确认0帧迟到了，发送方就重发0帧，接收方也丢弃第二次的0帧后再重传确认0帧；但发送方在发送1帧后收到了确认0帧，由于需要的是确认1帧而收到确认0帧，所以直接丢弃不作处理。</span></p><p><img src="计算机网络学习笔记.assets/image-20220321215102961.png" alt="image-20220321215102961" style="zoom:67%;" /></p><p><span>还有一种情况：确认0帧迟到但在发送1帧前就到了。那么并无本质影响，发送方还是会收到两次确认0帧。见上面的红线。</span></p><h4 id='6性能分析'><span>6、性能分析</span></h4><p><span>停止-等待协议实现机制简单，但缺点在于信道利用率太低，大量时间浪费于等待回复。在第一章中我们知道，</span><strong><span>信道利用率</span></strong><span>U等于：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n964" cid="n964" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="21.725ex" height="4.959ex" role="img" focusable="false" viewBox="0 -1353 9602.3 2191.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -1.897ex;"><defs><path id="MJX-7-TEX-I-1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"></path><path id="MJX-7-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-7-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-7-TEX-I-1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"></path><path id="MJX-7-TEX-N-2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"></path><path id="MJX-7-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-7-TEX-I-1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D448" xlink:href="#MJX-7-TEX-I-1D448"></use></g><g data-mml-node="mo" transform="translate(1044.8,0)"><use data-c="3D" xlink:href="#MJX-7-TEX-N-3D"></use></g><g data-mml-node="mfrac" transform="translate(2100.6,0)"><g data-mml-node="msub" transform="translate(3124.6,676)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><use data-c="1D437" xlink:href="#MJX-7-TEX-I-1D437"></use></g></g><g data-mml-node="mrow" transform="translate(220,-686)"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><use data-c="1D437" xlink:href="#MJX-7-TEX-I-1D437"></use></g></g><g data-mml-node="mo" transform="translate(1474.7,0)"><use data-c="2B" xlink:href="#MJX-7-TEX-N-2B"></use></g><g data-mml-node="mi" transform="translate(2474.9,0)"><use data-c="1D445" xlink:href="#MJX-7-TEX-I-1D445"></use></g><g data-mml-node="mi" transform="translate(3233.9,0)"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(3937.9,0)"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mo" transform="translate(4864.2,0)"><use data-c="2B" xlink:href="#MJX-7-TEX-N-2B"></use></g><g data-mml-node="msub" transform="translate(5864.4,0)"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-7-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(617,-152.7) scale(0.707)"><use data-c="1D434" xlink:href="#MJX-7-TEX-I-1D434"></use></g></g></g><rect width="7261.7" height="60" x="120" y="220"></rect></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></math></mjx-assistive-mml></mjx-container></div></div><p><span>下面举一个例子：</span></p><p><img src="计算机网络学习笔记.assets/image-20220322083510526.png" alt="image-20220322083510526" style="zoom:67%;" /></p><h3 id='3-23-后退n帧协议gbn）'><span>3-2.3 后退N帧协议（GBN）</span></h3><h4 id='1改进停止-等待协议'><span>1、改进停止-等待协议</span></h4><p><span>我们可以发送一个帧后再继续发送下一个帧，这就是流水线技术，如下图所示。</span></p><p><img src="计算机网络学习笔记.assets/image-20220322084002388.png" alt="image-20220322084002388" style="zoom: 50%;" /></p><p><span>为了能够采取流水线技术，我们需要做如下的改进：</span></p><ul><li><p><span>必须增加序号范围，0、1不再够使用；</span></p></li><li><p><span>发送方需要能够缓存多个分组而非仅仅一个。</span></p></li></ul><h4 id='2滑动窗口'><span>2、滑动窗口</span></h4><ul><li><p><span>发送窗口：发送方维持一组连续的允许发送的帧的序号。</span></p></li><li><p><span>接收窗口：接收方维持一组连续的允许接收帧的序号。</span></p></li></ul><p><span>需要注意的是，接收方并不需要每个帧都发回一个ACK，可以</span><strong><span>采取累计确认的方式</span></strong><span>，比如接收了1</span><span>~</span><span>3帧以后统一发送一个ACK3代表1</span><span>~</span><span>3帧都已正确接收。</span></p><p><span>但偶尔也会</span><strong><span>捎带确认</span></strong><span>，是指接收方偶而发送一些非确认的信息给发送方（相当于此时进行了其他事务），确认帧就放在这些数据被一同“捎带着”发送给发送方了。</span></p><p><span>发送方每收到一个ACK就向右滑动若干（大于等于1）个格。</span></p><p><img src="计算机网络学习笔记.assets/image-20220322085215702.png" alt="image-20220322085215702" style="zoom:67%;" /></p><p><span>滑动窗口不能过大。若采用n个比特对帧编号（所以范围为0</span><span>~</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.176ex" height="1.714ex" role="img" focusable="false" viewBox="0 -675.5 2729.7 757.5" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-19-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-19-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-19-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-19-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-19-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-19-TEX-I-1D45B"></use></g></g><g data-mml-node="mo" transform="translate(1229.5,0)"><use data-c="2212" xlink:href="#MJX-19-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2229.7,0)"><use data-c="31" xlink:href="#MJX-19-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^n-1</script><span>），</span><strong><span>发送方滑动窗口的尺寸</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="3.45ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 1524.8 833" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.339ex;"><defs><path id="MJX-20-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-20-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-20-TEX-I-1D44A"></use></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-20-TEX-I-1D447"></use></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mi>T</mi></msub></math></mjx-assistive-mml></mjx-container><script type="math/tex">W_T</script><span>需满足：</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="16.791ex" height="1.885ex" role="img" focusable="false" viewBox="0 -683 7421.6 833" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.339ex;"><defs><path id="MJX-21-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-21-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-21-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-21-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-21-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-21-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-21-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(777.8,0)"><use data-c="2264" xlink:href="#MJX-21-TEX-N-2264"></use></g><g data-mml-node="msub" transform="translate(1833.6,0)"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-21-TEX-I-1D44A"></use></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><use data-c="1D447" xlink:href="#MJX-21-TEX-I-1D447"></use></g></g><g data-mml-node="mo" transform="translate(3636.1,0)"><use data-c="2264" xlink:href="#MJX-21-TEX-N-2264"></use></g><g data-mml-node="msup" transform="translate(4691.9,0)"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-21-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(533,363) scale(0.707)"><use data-c="1D45B" xlink:href="#MJX-21-TEX-I-1D45B"></use></g></g><g data-mml-node="mo" transform="translate(5921.4,0)"><use data-c="2212" xlink:href="#MJX-21-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(6921.6,0)"><use data-c="31" xlink:href="#MJX-21-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>≤</mo><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">1 \le W_T \le 2^n-1</script></strong><span>，否则就会因为发送窗口尺寸过大而使得接收方无法区别新旧帧。</span></p><h4 id='3发送方需要的响应'><span>3、发送方需要的响应</span></h4><h5 id='1上层的调用'><span>1.上层的调用</span></h5><p><span>上层要发送数据时，发送方先检查发送窗口是否已满：</span></p><p><span>如果未满，则产生一个帧并将其发送；</span></p><p><span>如果窗口已满，发送方只需将数据返回给上层，暗示上层窗口已满，上层等一会再发送。（实际实现中，发送方可以缓存这些数据，窗口不满时再发送帧）。</span></p><h5 id='2收到了一个ack'><span>2.收到了一个ACK</span></h5><p><span>GBN协议中，对n号帧的确认采用累积确认的方式，标明接收方已经收到n号帧和它之前的全部帧。</span></p><h5 id='3超时事件'><span>3.超时事件</span></h5><p><span>本协议的名字来源于出现丢失和时延过长帧时发送方的行为。</span></p><p><span>类似停等协议一样，超时计时器将再次用于恢复数据帧或确认帧的丢失。如果出现超时，发送方重传所有已发送但未被确认的帧。</span></p><p><span>这样，发送方的窗口就需要回退N帧，所以有了本协议的名字。</span></p><h4 id='4接收方需要的响应'><span>4、接收方需要的响应</span></h4><ul><li><p><span>有且只有一种情况需要直接接收：正确且按序收到n号帧，那么接收方为这个第n帧发送一个ACK，并将该帧中的数据部分交付给上层。</span></p></li><li><p><span>其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。接收方无需缓存任</span>
<span>何失序帧，只需要维护一个信息：expectedSeqNum（下一个按序接收的帧序</span>
<span>号）。</span></p></li></ul><h4 id='5举例'><span>5、举例</span></h4><p><span>假设发送窗口尺寸为4，发送的第一个2号帧丢失：</span></p><p><img src="计算机网络学习笔记.assets/image-20220322090553572.png" alt="image-20220322090553572" style="zoom:80%;" /></p><p><span>可以看到，在发送5帧后2帧超时，所以窗口后退N帧到2帧重发。 </span></p><p>&nbsp;</p><h3 id='3-24-选择重传协议sr）'><span>3-2.4 选择重传协议（SR）</span></h3><h4 id='1对gbn的改进'><span>1、对GBN的改进</span></h4><p><span>GBN因连续发送数据帧而提高了信道利用率；但由于累计确认机制，在重传时必须把原来已经正确传送的数据帧全部批量重传，使得传送效率降低。</span></p><p><span>如果可以仅仅重新发送出错、丢失的帧，那么效率会提高很多，这就引出了选择重传协议SR。</span></p><p><span>解决办法：</span></p><ul><li><p><span>设置对每个帧的单个确认；</span></p></li><li><p><span>加大接收窗口并使窗口有更多功能；</span></p></li><li><p><span>在接收方设置接收缓存来存放乱序到达的帧。</span></p></li></ul><h4 id='2滑动窗口-2'><span>2、滑动窗口</span></h4><p><span>SR的滑动窗口中，有以下几种帧：</span></p><p><img src="计算机网络学习笔记.assets/image-20220322095906262.png" alt="image-20220322095906262" style="zoom:67%;" /></p><p><span>窗口长度：发送窗口的长度最好和接收窗口相同，且</span><strong><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="23.677ex" height="2.26ex" role="img" focusable="false" viewBox="0 -833.9 10465.3 998.8" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.373ex;"><defs><path id="MJX-22-TEX-I-1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"></path><path id="MJX-22-TEX-I-1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"></path><path id="MJX-22-TEX-I-1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-22-TEX-I-1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path><path id="MJX-22-TEX-I-1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"></path><path id="MJX-22-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-22-TEX-I-1D445" d="M230 637Q203 637 198 638T193 649Q193 676 204 682Q206 683 378 683Q550 682 564 680Q620 672 658 652T712 606T733 563T739 529Q739 484 710 445T643 385T576 351T538 338L545 333Q612 295 612 223Q612 212 607 162T602 80V71Q602 53 603 43T614 25T640 16Q668 16 686 38T712 85Q717 99 720 102T735 105Q755 105 755 93Q755 75 731 36Q693 -21 641 -21H632Q571 -21 531 4T487 82Q487 109 502 166T517 239Q517 290 474 313Q459 320 449 321T378 323H309L277 193Q244 61 244 59Q244 55 245 54T252 50T269 48T302 46H333Q339 38 339 37T336 19Q332 6 326 0H311Q275 2 180 2Q146 2 117 2T71 2T50 1Q33 1 33 10Q33 12 36 24Q41 43 46 45Q50 46 61 46H67Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628Q287 635 230 637ZM630 554Q630 586 609 608T523 636Q521 636 500 636T462 637H440Q393 637 386 627Q385 624 352 494T319 361Q319 360 388 360Q466 361 492 367Q556 377 592 426Q608 449 619 486T630 554Z"></path><path id="MJX-22-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-22-TEX-I-1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-22-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-22-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-22-TEX-I-1D44A"></use></g><g data-mml-node="TeXAtom" transform="translate(977,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D447" xlink:href="#MJX-22-TEX-I-1D447"></use></g><g data-mml-node="mi" transform="translate(704,0)"><use data-c="1D45A" xlink:href="#MJX-22-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(1582,0)"><use data-c="1D44E" xlink:href="#MJX-22-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(2111,0)"><use data-c="1D465" xlink:href="#MJX-22-TEX-I-1D465"></use></g></g></g><g data-mml-node="mo" transform="translate(3201.9,0)"><use data-c="3D" xlink:href="#MJX-22-TEX-N-3D"></use></g><g data-mml-node="msub" transform="translate(4257.7,0)"><g data-mml-node="mi"><use data-c="1D44A" xlink:href="#MJX-22-TEX-I-1D44A"></use></g><g data-mml-node="TeXAtom" transform="translate(977,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D445" xlink:href="#MJX-22-TEX-I-1D445"></use></g><g data-mml-node="mi" transform="translate(759,0)"><use data-c="1D45A" xlink:href="#MJX-22-TEX-I-1D45A"></use></g><g data-mml-node="mi" transform="translate(1637,0)"><use data-c="1D44E" xlink:href="#MJX-22-TEX-I-1D44E"></use></g><g data-mml-node="mi" transform="translate(2166,0)"><use data-c="1D465" xlink:href="#MJX-22-TEX-I-1D465"></use></g></g></g><g data-mml-node="mo" transform="translate(7498.6,0)"><use data-c="3D" xlink:href="#MJX-22-TEX-N-3D"></use></g><g data-mml-node="msup" transform="translate(8554.3,0)"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-22-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="1D45B" xlink:href="#MJX-22-TEX-I-1D45B"></use></g><g data-mml-node="mo" transform="translate(600,0)"><use data-c="2212" xlink:href="#MJX-22-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(1378,0)"><use data-c="31" xlink:href="#MJX-22-TEX-N-31"></use></g></g></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>T</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><msub><mi>W</mi><mrow data-mjx-texclass="ORD"><mi>R</mi><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></math></mjx-assistive-mml></mjx-container><script type="math/tex">W_{Tmax} = W_{Rmax} = 2^{n-1}</script></strong><span>。长度太小则效率太低，长度太大则会溢出。</span></p><h4 id='3发送方需要的响应-2'><span>3、发送方需要的响应</span></h4><h5 id='1上层的调用-2'><span>1.上层的调用</span></h5><p><span>从上层收到数据后，SR发送方检查下一个可用于该帧的序号。</span></p><p><span>如果序号位于发送窗口内，则发送数据帧；</span></p><p><span>否则就像GBN一样，要么将数据缓存，要么返回给上层之后再传输。</span></p><h5 id='2收到了一个ack-2'><span>2.收到了一个ACK</span></h5><p><span>如果收到某个ACK，就加入该帧序号在窗口内，将那个被确认的帧标记为已接收。</span></p><p><span>如果该帧序号是窗口的下界（最左边第一个窗口对应的序号），则窗口向前移动到具有最小序号的未确认帧处。如果不是下界则不移动。</span></p><p><span>如果窗口移动了，并且有序号在窗口内的未发送帧，则发送这些帧。</span></p><h5 id='3超时事件-2'><span>3.超时事件</span></h5><p><span>每个帧都有自己的定时器，一个超时事件发生后只重传一个帧。</span></p><h4 id='4接收方要做的事'><span>4、接收方要做的事</span></h4><p><span>SR的接收方可以说是“来者不拒”。</span></p><p><span>接收方将确认一个正确接收的帧而不管其是否按序。失序的帧将被缓存，并返回给发送方一个对于该帧的确认帧，直到所有帧（即序号更小的帧）皆被收到为止，这时才可以将一批帧按序交付给上层，然后向前移动滑动窗口。</span></p><p><span>如果收到了一个小于窗口下界的帧，就返回一个ACK；若大于窗口上界则忽略。</span></p><h4 id='5举例-2'><span>5、举例</span></h4><p><span>假设收发窗口尺寸都为4，发送的2号帧丢失，则：</span></p><p><img src="计算机网络学习笔记.assets/image-20220322110800077.png" referrerpolicy="no-referrer" alt="image-20220322110800077"></p><p>&nbsp;</p><h2 id='3-3-数据链路层的介质访问控制mac）'><span>3-3 数据链路层的介质访问控制（MAC）</span></h2><h3 id='3-31-概述'><span>3-3.1 概述</span></h3><h4 id='1传输数据使用的两种链路'><span>1、传输数据使用的两种链路</span></h4><p><span>点对点链路：两相邻接点通过一个链路相连，没有其他介入者。应用：PPP协议，常用于</span><strong><span>广域网</span></strong><span>。</span></p><p><span>广播式链路：所有主句共享通信介质。应用：早期的总线以太网、无线局域网，常用于</span><strong><span>局域网</span></strong><span>。典型拓扑结构是总线型和星型（逻辑总线型）。</span></p><h4 id='2介质访问控制的方法'><span>2、介质访问控制的方法</span></h4><p><img src="计算机网络学习笔记.assets/image-20220330162817930.png" alt="image-20220330162817930" style="zoom:67%;" /></p><p><span>介质访问控制（MAC，Multiple Access Control ）有两类方法，静态的和动态的；动态方法又分为轮询访问和随机访问。</span></p><h5 id='1静态划分信道简介'><span>1.静态划分信道简介</span></h5><p><span>这是通过信道划分实现介质访问控制的方法。</span></p><p><span>它包括四种：频分多路复用（FDM，Frequency Division Multiplexing），时分多路复用（TDM，Time），波分多路复用（WDM，Wave），码分多路复用（CDM，Code）。</span></p><h5 id='2动态分配信道简介'><span>2.动态分配信道简介</span></h5><p><span>分为：通过轮询访问实现控制的令牌传输协议，以及通过随机访问实现控制的ALOHA、CSMA、CSMA/CD、CSMA/CA四种不同的协议。</span></p><p>&nbsp;</p><h3 id='3-32-静态划分-信道划分的介质访问控制'><span>3-3.2 静态划分-信道划分的介质访问控制</span></h3><h4 id='1名词解释'><span>1、名词解释</span></h4><p><span>信道划分介质访问控制是指，将适用介质的每个设备与来自同意信道上的其他设备的通信隔离考，将时域和频域资源合理分配给网络上的资源。</span></p><p><span>多路复用技术是指，将多个信号组合在一条物理信道上进行传输，使得多个终端共享信道资源从而提高信道利用率。实际作用就是，将广播信道转化为点对点信道。</span></p><h4 id='2频分多路复用fdmfrequency-division-multiplexing）'><span>2、频分多路复用（FDM，frequency division multiplexing）</span></h4><p><span>用户在分配到一定的频带后，在通信过程中自始至终都占用着这个频带；频分复用的所有用户在同样的时间占用不同的带宽（频率带宽）资源。</span></p><p><img src="计算机网络学习笔记.assets/image-20220322121726465.png" alt="image-20220322121726465" style="zoom: 67%;" /></p><p><span>优点：充分利用传输介质的带宽，效率较高；技术成熟，实现较为简单。</span><strong><span>类似于并行</span></strong><span>。</span></p><h4 id='3时分多路复用tdm）和统计时分复用stdm）'><span>3、时分多路复用（TDM）和统计时分复用（STDM）</span></h4><p><span>将时间划分为一段段等长的时分复用帧（TDM帧，这里的帧是物理层的比特流而非链路层的帧）；每个用户在每个TDM帧中占有固定序号的时隙，所有用户轮流占用信道。</span><strong><span>类似于并发</span></strong><span>。</span></p><p><img src="计算机网络学习笔记.assets/image-20220322122002553.png" alt="image-20220322122002553" style="zoom:67%;" /></p><p><span>我们看上面的图，如果A/B/C全都停止，D还是只会在每个TDM帧里的最后一部分传输。这是因为时分复用分配的是一段段固定的时隙，造成了效率的降低。</span></p><p><span>我们可以进行一些改进，将TDM改进为STDM（统计时分复用）。STDM通过一个集中器将数据缓存放入STDM帧中，每个STDM帧满了就发出。STDM不是固定分配时隙，而是按需动态分配。比如说，如果设定一个STDM帧容量为2，则</span></p><p><img src="计算机网络学习笔记.assets/capture_20220330170352784.bmp" alt="capture_20220330170352784" style="zoom: 50%;" /></p><p><span>如果时分复用带宽为8000 b/s，那么4个人每人最高为2000 b/s；但如果采用统计时分复用，那么最高就可以达到8000 b/s。</span></p><h4 id='4波分多路复用wdm）'><span>4、波分多路复用（WDM）</span></h4><p><span>波分多路复用的本质是光的频分多路复用（光频率不宜直接计算，用波长方便分解）。各种波长不同的光信号互不干扰，使用合波器进行复用，用分波器进行分波。</span></p><p><img src="计算机网络学习笔记.assets/image-20220330171643661.png" alt="image-20220330171643661" style="zoom:50%;" /></p><h4 id='5码分多路复用cdm）'><span>5、码分多路复用（CDM）</span></h4><ul><li><p><span>我们思考频分多路复用，可以发现，每个传输任务共享了时间（同时传输），但没有共享空间（使用不同的信道）。</span></p></li><li><p><span>接着思考时分多路复用：每个任务不同时发送，但是它们在同一个信道传输，所以是共享了空间但没共享时间。</span></p></li></ul><p><span>码分多址（CDMA）是码分复用的一种方式。</span></p><ul><li><p><span>每发送1比特是需要一些时间的，我们可以将这些时间分成微时隙，这样就将这个比特分为了多个码片/芯片（chip）。用向量来表示每个比特的芯片序列。</span></p></li><li><p><span>每个站点被指定发送为一个m位芯片序列；每当发送1时就发送芯片序列（芯片序列中的0写作-1），发送0就发送该站点的芯片序列的反码（-1变成1，1变成-1）。</span></p></li><li><p><span>多个站点同时发送数据的时候，要求各个站点的芯片序列相互政教，内积为0；</span></p></li><li><p><span>两个向量到了公共信道上只需要线性相加即可；分离方法：合并的数据和原站点取规格化内积就可以分离。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220330174728339.png" alt="image-20220330174728339" style="zoom: 50%;" /></p><h3 id='3-33-动态划分-随机访问介质访问控制'><span>3-3.3 动态划分-随机访问介质访问控制</span></h3><p><span>动态划分又称动态媒体接入控制/多点接入，特点：信道并非在用户通信时固定分配给用户。</span></p><p><span>动态划分分为随机访问和轮询访问，随机访问是指所有用户可随机发送信息，发送信息时占全部带宽。这样的分配有很大的随机性，也就是会不协调。要解决这些“不协调”的问题是动态划分的难点。</span></p><h4 id='1纯aloha协议和时隙aloha协议'><span>1、纯ALOHA协议和时隙ALOHA协议</span></h4><p><span>纯ALOHA协议的思想是：不监听信道，不按时间槽发送，随机重发。</span></p><ul><li><p><span>冲突如何检测：如果发生冲突，接收方在就会检测出差错，然后不予确认，发送方在一定时间内收不到就判断发生冲突。</span></p></li><li><p><span>冲突如何解决：超时后等一随机时间再重传。</span></p><p><img src="计算机网络学习笔记.assets/image-20220330213747876.png" alt="image-20220330213747876" style="zoom: 18%;" /></p></li></ul><p><span>可以看到，纯ALOHA协议太过随机，有一定风险。于是在时隙ALOHA协议中，控制了“想发就发”这种随意性。</span></p><p><span>时隙ALOHA协议：把时间分成若干个相同的时间片，所有用户在时间片开始时刻同步接入网络信道：若发生冲突，则必须等到下一个时间片开始时刻再发送。</span></p><p><img src="计算机网络学习笔记.assets/image-20220330214043588.png" alt="image-20220330214043588" style="zoom:15%;" /></p><p><span>对比与总结：</span></p><ol start='' ><li><p><span>纯ALOHA比时隙ALOHA吞吐量更低，效率更低。</span></p></li><li><p><span>纯ALOHA想发就发，时隙ALOHA只有在时间片段开始时才能发。</span></p></li><li><p><span>都是超时重传，都不需要监听信道，“想发就发，不听就说”。</span></p></li><li><p><span>信道利用率分别是0.184和0.368（时隙ALOHA信道利用率是纯ALOHA的两倍）。</span></p></li></ol><p>&nbsp;</p><h4 id='2-3种csma协议'><span>2-3种CSMA协议</span></h4><p><span>CSMA协议，全称载波监听多路访问协议（carrier sense multiple access）。</span></p><p><span>CS：即载波侦听/监听，指每一个站在发送数据之前要检测一下总线上是否有其他计算机在发送数据。</span></p><blockquote><p><span>监听方法：当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（因为电压会互相叠加）。当一个站检测到的信号电压摆动值超过一定门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，即发生了冲突。</span></p></blockquote><p><span>MA：多点接入，表示许多计算机以多点接入的方式连接在一根总线上，也就是总线型网络。</span></p><p><span>如果一个主机要发送消息，那么它需要先监听信道；关于监听结果，有三种可选的处理方式：</span></p><h5 id='1-1坚持csma'><span>1-1坚持CSMA</span></h5><ul><li><p><span>信道空闲，直接传输完整帧，不必等待。</span></p></li><li><p><span>信道忙，则一直监听，直到空闲马上传输。</span></p></li><li><p><span>有冲突（一段时间内未收到肯定回复），则等待一个随机长的时间再监听，重复上述过程。这点和ALOHA协议很像，但是ALOHA协议不监听信道。</span></p></li></ul><p><span>优点：只要媒体空闲，站点就马上发送，避免了媒体利用率的损失；</span></p><p><span>缺点：假如有多个站点要发送，冲突就不可避免。</span></p><h5 id='2非坚持csma'><span>2.非坚持CSMA</span></h5><ul><li><p><span>信道空闲，直接传输完整帧，不必等待。</span></p></li><li><p><span>有冲突或者忙则等待一个随机的时间之后再进行监听。</span></p></li></ul><p><span>可以看到，非坚持CSMA和p-坚持CSMA的区别在于，非坚持CSMA在监听到信道忙后就不再监听，会等候一个随机时间。</span></p><p><span>优点：采用随机的重发延迟时间可以减少冲突发生的可能性；</span></p><p><span>缺点：可能所有主机都在延迟等待，使得信道长期处于空闲状态，媒体使用率降低。</span></p><h5 id='3p-坚持csma'><span>3.p-坚持CSMA</span></h5><p><span>这是一种应用于时隙信道的协议。</span></p><ul><li><p><span>空闲则以p概率直接传输，不必等待；概率1-p等待到下一个时间槽再传输。</span></p></li><li><p><span>信道忙，则持续监听直到信道空闲再以p概率发送。</span></p></li><li><p><span>若冲突则等到下一个时间槽开始再监听，并重复上述过程。</span></p></li></ul><p><span>可以看到，1-坚持CSMA其实是p=1时的p-坚持CSMA的特例，也就是空闲则以1的概率发送，且信道忙都持续监听；但需要注意非坚持CSMA不是它的特例，因为非坚持CSMA在发现信道忙后就不监听了。</span></p><p><span>优点：既能像非坚持算法那样减少冲突，又能像1-坚持算法那样减少媒体空闲时间的这种方案。</span></p><p><span>缺点：如果发生冲突，由于主机不知道信道上发生冲突了，还是会坚持把数据帧发送完，造成了浪费。CSMA/CD协议就克服了这个缺点。</span></p><p><strong><span>对于这三种协议的总结</span></strong><span>：</span></p><p><img src="计算机网络学习笔记.assets/image-20220405212936191.png" alt="image-20220405212936191" style="zoom:67%;" /></p><p>&nbsp;</p><h4 id='3csmacd协议'><span>3、CSMA/CD协议</span></h4><h5 id='1csmacd协议和csma协议的异同'><span>1.CSMA/CD协议和CSMA协议的异同</span></h5><p><span>CSMA/CD协议，全称载波监听多点接入/碰撞检测协议（carrier sense multiple access with collision detection）。</span></p><p><span>CD：碰撞检测（冲突检测），“边发送边监听”，适配器边发送数据边检测信道上信号电压的变化情况，以便判断自己在发送数据时其他主机是否也在发送数据。</span><strong><span>这是一种半双工协议</span></strong><span>，不允许双方同时发送。</span></p><p><span>CSMA/CD协议和CSMA协议的载波监听（CS）不同点：</span></p><ul><li><p><span>CSMA/CD协议中，在发送数据之前、发送数据之时都要检测总线是否忙碌；</span></p></li><li><p><span>CSMA协议中，只需要在发送数据前检测总线是否忙碌。</span></p></li></ul><p><span>CSMA/CD协议和CSMA协议的MA（多点接入）是相同的，都是总线型。</span></p><h5 id='2传播时延影响监听'><span>2.传播时延影响监听</span></h5><p><span>下面我们看一个典型的传播时延影响监听的例子：</span></p><p><img src="计算机网络学习笔记.assets/image-20220405214756387.png" alt="image-20220405214756387" style="zoom: 50%;" /></p><p><span>可以看出来，因为时延的问题产生了彭转导致双方都停发，数据无法传送。</span></p><p><span>如果用</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-26-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-26-TEX-I-1D70F"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\tau</script><span>表示单程的端到端传播时延：易知，只要经过2𝜏时间还没有检测到碰撞，就能肯定这次发送不会发生碰撞；换句话说，如果发生了碰撞，2</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-26-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-26-TEX-I-1D70F"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\tau</script><span>内一定能检测出。</span></p><h5 id='3确定碰撞后的重传时机------截断二进制指数规避算法'><span>3.确定碰撞后的重传时机——截断二进制指数规避算法</span></h5><p><span>可以看到，如果重传时机不佳，有可能每次都碰撞导致传输失败，所以需要确定一个可以大概率保证传输的时机。比如检测到发生碰撞立刻重发就是不可行的。这里提出了</span><strong><span>截断二进制指数规避算法</span></strong><span>。</span></p><ol start='' ><li><p><span>确定基本退避（推迟）时间为争用期2</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-26-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-26-TEX-I-1D70F"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\tau</script><span>。</span></p></li><li><p><span>定义参数k，它等于重传次数，但k不超过10，即k = min[重传次数，10]。当重传次数不超过10时，k等于重传次数；当重传次数大于10时，k就不再增大而一直等于10。</span></p></li><li><p><span>从离散的整数集合[0, 1, ... , 2k-1]中随机取出一个数r，重传所需要退避的时间就是r倍的基本退避时间，即2r𝜏。</span></p></li><li><p><span>当重传达16次仍不能成功时，说明网络太拥挤，认为此帧暂时  无法正确发出，抛弃此帧并向高层报告出错。</span></p></li></ol><p><span>比如，第一次重传，k = min[1，10] = 1，r = Rand{0，1} * 2𝜏 = Rand{0，2𝜏}，从立刻重传或者推迟2𝜏再重传。</span></p><h5 id='4最小帧长问题'><span>4.最小帧长问题</span></h5><p><span>为了让冲突发生时还没有发完从而被检测出来，我们知道帧的传输时延至少要两倍于信号在总线中的传播时延。也就是：</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n1190" cid="n1190" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="19.722ex" height="5.362ex" role="img" focusable="false" viewBox="0 -1460 8717.2 2370" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -2.059ex;"><defs><path id="MJX-8-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-8-TEX-I-1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path><path id="MJX-8-TEX-I-1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path><path id="MJX-8-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-8-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-8-TEX-N-2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-8-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-8-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mfrac"><g data-mml-node="mrow" transform="translate(1239,710)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">帧</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">长</text></g><g data-mml-node="mo" transform="translate(1975.5,0)"><use data-c="28" xlink:href="#MJX-8-TEX-N-28"></use></g><g data-mml-node="mi" transform="translate(2364.5,0)"><use data-c="1D44F" xlink:href="#MJX-8-TEX-I-1D44F"></use></g><g data-mml-node="mi" transform="translate(2793.5,0)"><use data-c="1D456" xlink:href="#MJX-8-TEX-I-1D456"></use></g><g data-mml-node="mi" transform="translate(3138.5,0)"><use data-c="1D461" xlink:href="#MJX-8-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(3499.5,0)"><use data-c="29" xlink:href="#MJX-8-TEX-N-29"></use></g></g><g data-mml-node="mrow" transform="translate(220,-710)"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">数</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">据</text></g><g data-mml-node="mtext" transform="translate(1975.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">传</text></g><g data-mml-node="mtext" transform="translate(2963.3,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">输</text></g><g data-mml-node="mtext" transform="translate(3951.1,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">速</text></g><g data-mml-node="mtext" transform="translate(4938.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">率</text></g></g><rect width="6126.6" height="60" x="120" y="220"></rect></g><g data-mml-node="mo" transform="translate(6644.4,0)"><use data-c="2265" xlink:href="#MJX-8-TEX-N-2265"></use></g><g data-mml-node="mn" transform="translate(7700.2,0)"><use data-c="32" xlink:href="#MJX-8-TEX-N-32"></use></g><g data-mml-node="mi" transform="translate(8200.2,0)"><use data-c="1D70F" xlink:href="#MJX-8-TEX-I-1D70F"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mfrac><mrow><mtext>帧</mtext><mtext>长</mtext><mo stretchy="false">(</mo><mi>b</mi><mi>i</mi><mi>t</mi><mo stretchy="false">)</mo></mrow><mrow><mtext>数</mtext><mtext>据</mtext><mtext>传</mtext><mtext>输</mtext><mtext>速</mtext><mtext>率</mtext></mrow></mfrac><mo>≥</mo><mn>2</mn><mi>τ</mi></math></mjx-assistive-mml></mjx-container></div></div><p><span>所以，</span><strong><span>最小帧长 = 总线传播时延 * 数据传输速率 * 2 = 2</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="1.17ex" height="1.005ex" role="img" focusable="false" viewBox="0 -431 517 444" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.029ex;"><defs><path id="MJX-26-TEX-I-1D70F" d="M39 284Q18 284 18 294Q18 301 45 338T99 398Q134 425 164 429Q170 431 332 431Q492 431 497 429Q517 424 517 402Q517 388 508 376T485 360Q479 358 389 358T299 356Q298 355 283 274T251 109T233 20Q228 5 215 -4T186 -13Q153 -13 153 20V30L203 192Q214 228 227 272T248 336L254 357Q254 358 208 358Q206 358 197 358T183 359Q105 359 61 295Q56 287 53 286T39 284Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><use data-c="1D70F" xlink:href="#MJX-26-TEX-I-1D70F"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></mjx-assistive-mml></mjx-container><script type="math/tex">\tau</script><span> * 数据传输速率</span></strong><span>。另外，以太网规定最短帧长为64B，凡是长度小于64B的都是由于冲突而异常终止的无效帧。</span></p><p>&nbsp;</p><h4 id='4csmaca协议'><span>4、CSMA/CA协议</span></h4><h5 id='1与csmacd协议的异同'><span>1.与CSMA/CD协议的异同</span></h5><p><span>CSMA/CA协议，全称载波监听多点接入/碰撞避免协议（carrier sense multiple access with collision avoidance）。</span></p><p><span>CA：碰撞避免，和CD的区别在于CD只能检测碰撞而不能避免，CA只能避免碰撞而不能检测。</span></p><p><span>CSMA/CD适用于总线型的以太网，而CSMA/CA适用于无线局域网。无线局域网中无法做到360°全面检测碰撞，而且存在隐蔽站的问题（举例：A、C同时检测到信道空闲而给B发送数据，造成了冲突，这时A、C对互相来说都是隐蔽站）。</span></p><ul><li><p><span>相同：CSMA/CD与CSMA/CA机制都从属于CSMA协议，其核心是“先听再说”。换言之，接入信道之前都要监听信道，信道空闲才能进行接入。</span></p></li><li><p><span>不同点：</span></p><ol start='' ><li><p><span>传输介质不同：CSMA/CD用于总线式以太网（有线），而CSMA/CA用于无线局域网（无线）。</span></p></li><li><p><span>载波检测方式不同：因传输介质不同，CSMA/CD与CSMA/CA的检测方式也不同。</span></p><ul><li><p><span>CSMA/CD通过电缆中电压的变化来检测，当数据发生碰撞时，电缆中的电压就会随着发生变化。</span></p></li><li><p><span>CSMA/CA采用能量检测（ED）、载波检测（CS）和能量载波混合检测三种检测信道空闲的方式。</span></p></li></ul></li><li><p><strong><span>CSMA/CD检测冲突，CSMA/CA避免冲突</span></strong><span>，二者出现冲突后都会进行有上限的重传，其中CD协议是16次。</span></p></li></ol></li></ul><h5 id='2ifs'><span>2.IFS</span></h5><p><span>为了避免碰撞，802.11规定，所有站完成发送后都必须在等待一段很短上的时间（继续监听）才能发送下一帧，这段很短的时间称为帧间间隔（Interframe Space）。802.11使用了3种IFS，而IFS的长短取决于该站需发送的帧的类型：</span></p><ol start='' ><li><p><span>SIFS（短IFS）：最短的IFS，用一份个属于一次对话的各帧。使用SIFS的帧有ACK（接收确认帧）、CTS（准许发送帧）、RTS（请求发送帧）、分片后的数据帧以及回答AP探询的帧等。</span></p></li><li><p><span>PIFS（点协调IFS）：中等长度，于PCF操作中使用。</span></p></li><li><p><span>DIFS（分布式协调IFS）：最长的IFS，用于异步帧竞争访问的时延，比如CSMA的各种协议在发送前就需要等待一个DIFS。</span></p></li></ol><h5 id='3工作原理'><span>3.工作原理</span></h5><ol start='' ><li><p><span>发送数据前，先检测信道是否空闲。如果空闲则发出RTS（request to send，请求发送帧），RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间等信息；信道忙则等待一段时间。</span></p></li><li><p><span>接收端收到RTS后，将响应并发送CTS（clear to send，准许发送帧；另外一个作用是，其他站点听到CTS后会在CTS帧指明的时间中抑制发送）。</span></p></li><li><p><span>发送端收到CTS后，开始发送数据帧（同时预约信道：告知其他站点要传多久数据）。</span></p></li><li><p><span>接收端收到数据帧后，将用CRC来检验数据是否正确，正确则响应ACK确认帧。</span></p></li><li><p><span>发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止（采用二进制指数退避算法来确定随机的推迟时间）。</span></p></li></ol><p><span>要点：预约信道；</span><strong><span>ACK确认帧（注意，XDM和CSMA协议中唯一一个有确认帧的）</span></strong><span>；RTS/CTS帧（可选，用于解决隐蔽站问题）。</span></p><p>&nbsp;</p><h3 id='3-34-动态划分-轮询访问介质访问控制'><span>3-3.4 动态划分-轮询访问介质访问控制</span></h3><h4 id='1介质访问控制协议'><span>1、介质访问控制协议</span></h4><p><span>先回顾一下学习过的介质访问控制协议。</span></p><ol start='' ><li><p><span>信道划分的MAC协议：</span></p><ul><li><p><span>包括FDM、TDM/STDM、WDM、CDM几种协议。</span></p></li><li><p><span>基于多路复用技术划分资源，</span><strong><span>所有主机共享信道</span></strong><span>。</span></p></li><li><p><span>在网络负载重时，共享信道效率高，且公平；网络负载轻时，共享信道效率低。</span></p></li></ul></li><li><p><span>随机访问MAC协议：</span></p><ul><li><p><span>用户根据意愿随机发送信息，</span><strong><span>发送信息时独占信道带宽</span></strong><span>。</span></p></li><li><p><span>网络负载重会产生冲突开销；网络负载轻时，共享信道效率高，单个结点可利用信道全部带宽。</span></p></li><li><p><strong><span>只有随机访问协议会发生冲突或者碰撞</span></strong><span>。</span></p></li></ul></li><li><p><span>还有一种就是下面要介绍的：轮询访问MAC协议/轮流协议/轮转访问MAC协议。</span></p></li></ol><ul><li><p><span>轮询访问协议是一种既不产生冲突，又可以发送时占全部带宽，是结合了信道划分和随机访问的优点的一种介质访问控制方法。</span></p></li><li><p><span>包括很多种协议，此处重点介绍轮询协议和令牌传递协议。</span></p></li></ul><h4 id='2轮询协议'><span>2、轮询协议</span></h4><p><span>简单来说，轮询协议就是主结点轮流“邀请”从属结点发送数据。</span></p><p><span>由于主节点是轮流发送数据帧“询问”各个从属节点是否发送数据的，所以被称为“轮询”协议。</span></p><p><span>问题：轮询开销不小；在轮询中靠后的从属节点的等待延迟较高；如果主节点出问题则会系统不能运行。</span></p><h4 id='3令牌传递协议'><span>3、令牌传递协议</span></h4><p><span>令牌（token）：一个特殊格式的MAC控制帧，不携带任何和需传送的数据相关的信息。</span></p><p><span>TCU是一种传递令牌的转发器。</span></p><p><img src="计算机网络学习笔记.assets/image-20220406114133606.png" alt="image-20220406114133606" style="zoom:11%;" /></p><ul><li><p><span>如图所示，令牌环网是无碰撞的，令牌不断在各个结点之间随环网移动；</span></p></li><li><p><span>应用于令牌环网（物理星型拓扑，逻辑环形拓扑）；</span></p></li><li><p><span>采用令牌传送方式的网络常用于负载较重、通信量较大的网络中，负载较轻时会效率较低、浪费网络资源；</span></p></li><li><p><span>通过令牌来控制信道的使用，就能确保同一时刻只有一个结点独占信道。</span></p></li></ul><p><span>流程：</span></p><ul><li><p><span>令牌在环网中不断传递；</span></p></li><li><p><span>每个收到令牌的结点，如果不发送数据就直接把令牌传递给下一节点，发送数据就修改令牌的标志位（从空闲变成忙碌）；</span></p></li><li><p><span>发送的数据和令牌一同传递，非发送目标者不接收，·发送目标会复制一份这个发送的数据，最后数据帧和令牌一同传到数据的发送者手中；</span></p></li><li><p><span>发送者检查数据帧有无问题，若有问题需要重传，没有问题就回收数据帧并将令牌状态修改为空闲，继续往后传。</span></p></li></ul><p><span>需要注意的是，</span><strong><span>每个结点都只能在一定的时间内（令牌持有时间）获得发送数据的权利，而非无限制地持有令牌</span></strong><span>。超过了持有时间，那么发送必须停止，等下一次拿到令牌再继续发送。</span></p><p><span>问题：令牌开销，在传输和令牌损耗上都需要数据传输；等待延迟，和轮询是相同的道理；单点故障，可通过设置备用机解决。</span></p><h2 id='3-4-数据链路层的应用'><span>3-4 数据链路层的应用</span></h2><h3 id='3-41-局域网lan'><span>3-4.1 局域网LAN</span></h3><h4 id='1概念介绍'><span>1、概念介绍</span></h4><p><span>局域网（Local Area Network）：简称LAN，是指在某一区域内由多台计算机互联成的计算机组，使用广播信道。它具有以下特点：</span></p><ol start='' ><li><p><span>覆盖的地理范围较小，只在一个相对独立的局部范围内联，如建筑群中。</span></p></li><li><p><span>使用专门铺设的传输介质（双绞线、同轴电缆）进行联网，数据传输速率高（10Mb/s～10Gb/s）。</span></p></li><li><p><span>通信延迟时间短，误码率低，可靠性较高。</span></p></li><li><p><strong><span>各站为平等关系，共享传输信道</span></strong><span>。</span></p></li><li><p><span>多采用分布式控制和广播式通信，能进行</span><strong><span>广播和组播</span></strong><span>。</span></p></li></ol><p><span>决定局域网特性的主要要素为：</span><strong><span>网络拓扑，传输介质与介质访问控制方法</span></strong><span>。</span></p><h5 id='1网络拓扑'><span>1.网络拓扑</span></h5><p><span>先区分以下物理拓扑和逻辑拓扑，这两者并不总是相同的：</span></p><ol start='' ><li><p><span>物理拓扑：描述如何将设备用线缆物理地连接在一起。描述的是物理上的连接情况。</span></p></li><li><p><span>逻辑拓扑：描述设备之间如何通过物理拓扑进行通信。更加注重的是应用系统的运行状况，反映的是实际应用的情况。</span></p></li></ol><p><span>星型拓扑：中心节点是控制中心，任意两个节点间的通信最多只需两步，传输速度快，并且网络构形简单、建网容易、便于控制和管理。但这种网络系统，网络可靠性低，网络共享能力差，有单点故障问题。</span></p><p><span>总线型拓扑：网络可靠性高、网络节点间响应速度快、共享资源能力强、设备投入量少、成本低、安装使用方便，当某个工作站节点出现故障时，对整个网络系统影响小。以太网就是逻辑上的总线结构。</span></p><p><span>环形拓扑：系统中通信设备和线路比较节省。有单点故障问题；由于环路是封闭的，所以不便于扩充，系统响应延时长，且信息传输效率相对较低。</span></p><p><span>树形拓扑：易于拓展，易于隔离故障，也容易有单点故障。</span></p><p><img src="计算机网络学习笔记.assets/image-20220413191655522.png" alt="image-20220413191655522" style="zoom:98%;" /><img src="计算机网络学习笔记.assets/image-20220413191705527.png" referrerpolicy="no-referrer" alt="image-20220413191705527"><img src="计算机网络学习笔记.assets/image-20220413191718268.png" referrerpolicy="no-referrer" alt="image-20220413191718268"><img src="计算机网络学习笔记.assets/image-20220413191730093.png" alt="image-20220413191730093" style="zoom:90%;" /></p><h5 id='2传输介质'><span>2.传输介质</span></h5><ul><li><p><span>有线局域网：常用介质：双绞线、同轴电缆、光纤；</span></p></li><li><p><span>无线局域网：常用介质：电磁波。</span></p></li></ul><h5 id='3局域网介质访问控制方法'><span>3.局域网介质访问控制方法</span></h5><ol start='' ><li><p><span>CSMA/CD：常用于总线型局域网，也用于树型网络</span></p></li><li><p><span>令牌总线：常用于总线型局域网，也用于树型网络；它是把总线型或树型网络中的各个工作站按一定顺序如按接口地址大小排列形成一个逻辑环。只有令牌持有者才能控制总线，才有发送信息的权力。</span></p></li><li><p><span>令牌环：用于环形局域网，如令牌环网。</span></p></li></ol><h4 id='2-分类'><span>2 、分类</span></h4><ol start='' ><li><p><span>以太网：以太网是应用最为广泛的局域网，包括标准以太网（10Mbps）、快速以太网（100Mbps）、千兆以太网（1000 Mbps）和10G以太网，它们都符合IEEE802.3系列标准规范。逻辑拓扑是总线型，物理拓扑是星型或拓展星型。使用CSMA/CD。</span></p></li><li><p><span>令牌环网：物理上采用了星形拓扑结构，逻辑上是环形拓扑结构。已不再使用。</span></p></li><li><p><span>FDDI（Fiber Distributed Data Interface）网：物理上采用了双环拓扑结构，逻辑上是环形拓扑结构。</span></p></li><li><p><span>ATM（Asynchronous Transfer Mode）网：较新型的单元交换技术，使用53字节固定长度的单元进行交换。</span></p></li><li><p><span>无线局域网（WLAN）：采用IEEE 802.11标准。</span></p></li></ol><h4 id='3关于ieee-802系列标准'><span>3、关于IEEE 802系列标准</span></h4><p><span>IEEE 802系列标准是IEEE 802 LAN/MAN 标准委员会制定的局域网、城域网技术标准（1980年2月成立）。其中最广泛使用的有以太网、令牌环、无线局域网等。这一系列标准中的每一个子标准都由委员会中的一个专门工作组负责。（三五八十一）</span></p><blockquote><ul><li><p><span>IEEE 802.3：以太网协议。（以太是虚无，所以是最小的3；或者，E和3很像，所以以太是3）</span></p></li><li><p><span>IEEE 802.5：令牌环网协议。（没什么特点，是中间的，所以是5）</span></p></li><li><p><span>IEEE 802.8：光纤、FDDI网相关协议。（FDDI是双环拓扑，双环是8）</span></p></li><li><p><span>IEEE 802.11：WLAN相关协议。（WLAN最重要，讲得很多，所以是最大的11）</span></p></li></ul></blockquote><p><span>IEEE 802标准所描述的局域网参考模型只对应OSI参考模型的数据链路层与物理层，</span><strong><span>它将数据链路层划分为逻辑链路层LLC子层和介质访问控制MAC子层</span></strong><span>。</span></p><p><img src="计算机网络学习笔记.assets/image-20220413212917288.png" referrerpolicy="no-referrer" alt="image-20220413212917288"></p><ul><li><p><span>LLC负责识别网络层协议，然后对它们进行封装。LLC报头告诉数据链路层一旦帧被接收到时，应当对数据包做何处理；另外也为网络层提供服务与接口：无确认无连接、面向连接、带确认无连接、高速传送。</span></p></li><li><p><span>MAC子层的主要功能包括数据帧的封装/卸装，帧的寻址和识别，帧的接收与发送，链路的管理，帧的差错控制等。MAC子层的存在屏蔽了不同物理链路种类的差异性，使上层可以将物理层的技术和不同的种类忽视。</span></p></li></ul><p><span>须注意的是，802.3协议中，以太网没有网络层，由LLC给帧加序号。</span></p><h3 id='3-42-以太网'><span>3-4.2 以太网</span></h3><h4 id='1概述'><span>1、概述</span></h4><p><span>以太网(Ethernet)指的是由Xerox公司创建并由Xerox、Intel和DEC公司联合开发的基带总线局域网规范，是当今现有局域网采用的最通用的通信协议标准。有以下特点：</span></p><ol start='' ><li><p><span>造价低廉，是应用最广泛的LAN技术；</span></p></li><li><p><span>比令牌环网、ATM网便宜，简单；</span></p></li><li><p><span>满足网络速率要求：10Mb/s~10Gb/s。</span></p></li></ol><p><span>高速/快速以太网保持最短帧长不变（最长帧长可能改变可能不变，不确定）、缩短网段长度的方法提速。介绍以下三种高速/快速以太网：</span></p><ol start='' ><li><p><span>100BASE-T以太网：在双绞线上传送100Mb/s基带信号的星型拓扑以太网，仍使用IEEE802.3的CSMA/CD协议（说明会发生冲突）。支持全双工和半双工，可在全双工方式下工作而无冲突。这里的全双工是一种星型的全双工，采用一台交换机。</span></p></li><li><p><span>吉比特以太网：在光纤或双绞线上传送1Gb/s信号。支持全双工和半双工，可在全双工方式下工作而无冲突。</span></p></li><li><p><span>10吉比特以太网：10吉比特以太网在光纤上传送10Gb/s信号。只支持全双工，无争用问题。</span></p></li></ol><p><span>以太网有两个标准/规约，满足以上两个规约之一就是以太网，所以以太网也被称为802.3局域网：</span></p><ul><li><p><span>DIX Ethernet V2：第一个局域网产品（以太网）规约；</span></p></li><li><p><span>IEEE 802.3：IEEE 802委员会802.3工作组制定的第一个IEEE的以太网标准（帧格式有微小的改动）。</span></p></li></ul><h4 id='2以太网的服务与拓扑'><span>2、以太网的服务与拓扑</span></h4><p><span>以太网提供的是无连接、不可靠的服务（目前网络质量较好）。它只能实现无差错接收，不能实现可靠传输（发的帧都要接收）。</span></p><ul><li><p><span>无连接：发送方和接收方之间无“握手过程”。</span></p></li><li><p><span>不可靠：不对发送方的数据帧编号，接收方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责。</span></p></li></ul><p><span>现在的以太网的物理拓扑是星型，中心是一台集线器Hub。但是，使用集线器的以太网在逻辑上仍是一个总线网，各站共享逻辑上的总线，使用的还是CSMA/CD协议。</span></p><p><span>须注意的是，一般以太网使用CSMA/CD技术，但10Gb/s以太网只支持全双工，所以使用的并非CSMA/CD协议。</span></p><p><span>总结：</span><strong><span>以太网拓扑在逻辑上总线型，在物理上星型</span></strong><span>。</span></p><h4 id='3四种base网络的传输介质'><span>3、四种BASE网络的传输介质</span></h4><p><span>这里需要介绍4种BASE相关的传输介质，这是统考题目中不会给出的常识。</span></p><figure class='table-figure'><table><thead><tr><th><span>参数</span></th><th><span>10BASE2</span></th><th><span>10BASE5</span></th><th><span>10BASE-T</span></th><th><span>10BASE-FL</span></th></tr></thead><tbody><tr><td><span>媒体</span></td><td><span>基带同轴电缆（细）</span></td><td><span>基带同轴电缆（粗）</span></td><td><span>无屏蔽双绞线（UTP）</span></td><td><span>光纤对</span></td></tr><tr><td><span>编码方式</span></td><td><span>曼彻斯特编码</span></td><td><span>曼彻斯特编码</span></td><td><span>曼彻斯特编码</span></td><td><span>曼彻斯特编码</span></td></tr><tr><td><span>拓扑结构</span></td><td><span>总线型</span></td><td><span>总线型</span></td><td><span>星型（中心为集线器）</span></td><td><span>点对点</span></td></tr><tr><td><span>最大段长</span></td><td><span>185m</span></td><td><span>500m</span></td><td><span>100m</span></td><td><span>200m</span></td></tr><tr><td><span>最多节点数目</span></td><td><span>30</span></td><td><span>100</span></td><td><span>2</span></td><td><span>2</span></td></tr></tbody></table></figure><p><span>注意，它们传输的都是数字信号，所以使用中继器放大而非放大器。</span></p><h4 id='4适配器与mac地址'><span>4、适配器与MAC地址</span></h4><p><span>计算机与外界有局域网的连接是通过通信适配器的，称为网络接口板或者网络接口卡NIC（network interface card）。适配器上装有处理器和存储器（包括RAM和ROM）。目前网卡已经被嵌入主板，不单独使用了。</span></p><p><span>在局域网中，硬件地址又称为物理地址，或MAC地址（介质访问控制地址）。实际上是一个标识符。</span></p><p><span>MAC地址：也称为物理地址，长为6字节。每个适配器有一个全球唯一的48位二进制地址，前24位代表厂家（由IEEE规定），后24位厂家自己指定。常用6个十六进制数表示，如02-60-8c-e4-b1-21。</span></p><p><span>须注意的是，如果同一个LAN中的两个主机具有相同的MAC地址，那么两个主机都不能正常通信。原因是：</span></p><ul><li><p><span>目的地址等于本机MAC地址，不会被发送至网络；</span></p></li><li><p><span>两台主机都会收到本应属于对方的一些信息，降低了处理效率；</span></p></li><li><p><span>网络层的ARP软件会禁止将同一个MAC地址绑定到两个不同的IP地址，所以会话会时断时续。</span></p></li></ul><h4 id='5以太网mac帧'><span>5、以太网MAC帧</span></h4><p><span>最常用的MAC帧是以太网V2的格式（DIX Ethernet V2下的），这个规约没有使用LLC子层。网络层的IP数据报和MAC层的包装如图所示，最下方的物理层和MAC层间的转换中前同步码也被称为前导码。注意，前面插入的8Bytes 不是以太网的MAC帧。</span></p><p><span>注意，以太网帧的目的地址后面紧跟着源地址，可以根据其中一个去寻找另外一个。</span></p><p><img src="计算机网络学习笔记.assets/image-20220414172023821.png" alt="image-20220414172023821" style="zoom: 15%;" /></p><p><span>6字节目的地址+6字节源地址+2字节类型 + 数据部分（来源于IP数据报） +4字节FCS，除数据外共有18B。</span></p><p><span>为了让一个MAC帧至少64B，数据最少应有46B。其中，FCS是CRC校验码生成的帧检验序列。</span></p><p><span>如果采用IEEE 802.3的格式：那么第三个字段是长度/类型；当长度/类型字段值小于0x0600时，数据字段会装入LLC子层。</span></p><p><span>总结：</span><strong><span>MAC帧最长1518B，最短64B，每个帧中都含有18B的非数据部分。另外还有8字节的前导帧（一般会忽略）</span></strong><span>。</span></p><h3 id='3-43-无线局域网wlan'><span>3-4.3 无线局域网WLAN</span></h3><p><span>在这里，我们说的WLAN都是IEEE 802.11标准；WiFi是满足IEEE 802.11b和802.11g两个标准的WLAN。</span></p><h4 id='180211协议的mac帧'><span>1、802.11协议的MAC帧</span></h4><p><span>802.11帧共有3种类型：数据帧、控制帧、管理帧。这里主要讨论数据帧。</span></p><p><span>WLAN的MAC帧（数据帧）头如图所示：RA、TA分别是接收端、发送端（网络接入点），目的地址就是目的设备的MAC地址，源地址就是发送设备的MAC地址。</span><strong><span>一共30字节</span></strong><span>。</span></p><p><img src="计算机网络学习笔记.assets/QQ图片20220427091938.jpg" alt="QQ图片20220427091938" style="zoom: 16%;" /></p><p><span>4个地址可能有四种地址字段，分别是：</span></p><ol start='' ><li><p><span>RA：接收端（receiver address）；代表负责处理该帧的无线工作站。如果是无线工作站，接收端地址即为目的地址。如果帧的目的地址是与基站相连的以太网结点，接收端即为基站的无线界面，而目的地址可能是连接到以太网的一部路由器。</span></p></li><li><p><span>TA：发送端或传送端（transmitter address）；代表将帧传送至无线介质的无线界面，如AP等。传送端地址通常只用于无线桥接。</span></p></li><li><p><span>DA：目的地址（destination address）；代表最后的接收端，亦即负责将帧交付上层协议处理的工作站。</span></p></li><li><p><span>SA：源地址（source address）；代表传输的来源，一般是某个站点。</span></p></li></ol><p><span>根据帧控制部分中去往/来自AP的标志不同，此处地址1、2、3可能有不同的含义（地址1固定代表接收端，2固定代表发送端，3和4视情况而定）。</span></p><p><span>实际上，MAC帧头有4种格式（如下所示），分别是：</span></p><ol start='' ><li><p><span>IBSS（基本独立服务集）帧，一般是AP发送的管理帧，即信标帧；</span></p></li><li><p><span>去往AP：地址1、2和3分别是TA（AP地址，此处为BSSID，服务集标识符）、SA和DA；</span></p></li><li><p><span>来自AP：地址1、2和3分别是DA、TA和SA；</span></p></li><li><p><span>WDS（无线分布式系统）帧，在AP间的中继帧repeater，一般用于有线到有线网络，唯一一种地址4非空的帧。从地址1至4分别是RA、TA、DA和SA。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220414185435065.png" referrerpolicy="no-referrer" alt="image-20220414185435065"></p><p><span>帧头后是帧主体，大小为0~2312字节；然后是4字节的FCS尾部。</span></p><h4 id='2分类'><span>2、分类</span></h4><p><span>一般分为两种：</span></p><ol start='' ><li><p><span>有固定基础设施的无线局域网：</span></p><ul><li><p><span>802.11标准规定，无线局域网的最小构建市基本服务集（Basic Service Set，BSS），包括一个接入点和若干移动站。</span></p></li><li><p><span>每个BSS覆盖的地理范围被称为基本服务区（Basic Service Area，BSA），一般直径不超过100m。</span></p></li><li><p><span>各站无论想与其他BSS的站通信还是与本BSS的站通信，都需要经过基站（base station），也就是AP。</span></p></li><li><p><span>每个AP需要被分配一个服务集标识符（Service Set Identifier，SSID，也就是该无线局域网的名字）和一个信道。</span></p></li><li><p><span>一个BSS可以是孤立的也可通过AP连接到一个分配系统（Distribution System，DS）再连接到其他BSS；这样就构成了扩展服务集（Extended Service Set，ESS）。</span></p></li><li><p><span>ESS还可以提供有线连接的以太网的接入，通过门户（Portal）来实现。</span></p></li></ul><p><span>如图所示，一个基本服务集内的终端可以自由通信；在A与B通信时，通过AP1和有线通信再通过AP2传播至B。</span></p><p><img src="计算机网络学习笔记.assets/image-20220414195914194.png" alt="image-20220414195914194" style="zoom:50%;" /></p><p><span>另外，服务集标识符可以自命名，如WiFi的名称就是一个服务集标识符。</span></p></li><li><p><span>无固定基础设施无线局域网的自组织网络：</span></p><p><span>在这种网络中，没有集线器、路由器等。</span></p><p><img src="计算机网络学习笔记.assets/image-20220414200301797.png" alt="image-20220414200301797" style="zoom: 10%;" /></p></li></ol><h3 id='3-44-虚拟局域网vlan'><span>3-4.4 虚拟局域网VLAN</span></h3><p><span>一个以太网广播域中，如果包含太多计算机，可能会有大量的广播帧（特别是ARP、DHCP协议），对信息的传输以及安全性都有很大的不利之处。每个计算机都必须处理每一条广播信息，计算机性能降低；另外，大量的广播信息还会占用大量带宽。</span></p><p><span>于是，我们采用虚拟局域网将较大的局域网分割成较小的、与地理位置无关的、逻辑上的局域网，每个VLAN是一个较小的广播域。</span></p><p><span>802.3ac标准定义了将以太网帧插入一个4字节的标识符（称为VLAN标签）得到新的802.1Q帧，此时以太网最大帧长变成了1522字节。如下图所示的是一个以太网MAC帧插入了VLAN标签后得到的802.1Q帧。</span></p><p><img src="计算机网络学习笔记.assets/QQ图片2029.jpg" alt="QQ图片2029" style="zoom:22%;" /></p><p><span>可以看到，VLAN标签的最后两字节含有标识符VID，它唯一标识了这个802.1Q帧属于哪一个VLAN（12位 = 4096个VLAN）。</span></p><p><span>VLAN划分方式有基于交换机端口、网卡地址、网络层地址等划分，是通过软件来划分的。一台主机并不知道自己属于哪个VLAN中，也就不知道自己的VID值，它与交换机传递的都是标准MAC帧，不论发送还是接收都是经过交换机传递MAC帧。</span></p><p><span>但是，交换机必须清楚各主机的VID值（也就是知道各个主机属于哪个VLAN中）；交换机不分割广播域，所以同一个VLAN可以由几个交换机连接。不同VLAN之间的交流需要上层的路由器来解决，也可以使用嵌入了专门芯片的交换机，这样交换机就完成了第三层的转发功能。由此可知，VLAN中的计算机可以处于不同的LAN中，但一般不如此做。</span></p><p><span>注意，VLAN只是LAN提供的一种服务，并不是一种新型的局域网。</span><strong><span>隔离两个VLAN只需要二层的设备，但连通两个VLAN却需要三层带路由功能的设备（二层隔离，三层互访）</span></strong><span>。</span></p><h3 id='3-45-广域网wan'><span>3-4.5 广域网WAN</span></h3><h4 id='1广域网的概念'><span>1、广域网的概念</span></h4><p><span>广域网（WAN，Wide Area Network），通常跨接很大的物理范围，形成国际性的远程网络；传输速率和延迟都较高。因特网（Internet）是世界范围内最大的广域网，但</span><strong><span>因特网不是互联网</span></strong><span>，只是其中的一部分。</span></p><p><span>广域网的通信子网主要使用</span><strong><span>分组交换技术IPX</span></strong><span>：利用公用分组交换网、卫星通信网和无线分组交换网，将分布在不同地区的局域网或计算机系统互连起来，达到资源共享的目的。</span></p><p><img src="计算机网络学习笔记.assets/image-20220414200501884.png" alt="image-20220414200501884" style="zoom:15%;" /></p><p><span>广域网不是互联网，互联网可连接不同类型的网络（WAN、LAN都可）且通常使用路由器连接，此处不作过多介绍；但需要注意的是，WAN和LAN区别很大，因为LAN的协议主要在数据链路层（少量在物理层）而WAN的协议主要在网络层。下表给出两者的不同点。</span></p><figure class='table-figure'><table><thead><tr><th><span>关注点</span></th><th><span>WAN</span></th><th><span>LAN</span></th></tr></thead><tbody><tr><td><span>覆盖范围</span></td><td><span>广泛，通常跨区域</span></td><td><span>较小</span></td></tr><tr><td><span>连接方式</span></td><td><span>结点都是</span><strong><span>点到点连接</span></strong><span>，但为提高可靠性，一个结点交换机往往与多个结点交换机相连</span></td><td><span>普遍采用</span><strong><span>多点接入</span></strong><span>技术</span></td></tr><tr><td><span>对应OSI层次</span></td><td><span>物理、数据链路、网络层，共3层</span></td><td><span>物理、数据链路层，共2层</span></td></tr><tr><td><span>着重点</span></td><td><span>强调资源共享</span></td><td><span>强调数据传输</span></td></tr></tbody></table></figure><p><span>另外，两者的联系和相似之处在于：</span></p><ol start='' ><li><p><span>WAN、LAN都是互联网的重要构建；在互联网的角度上两者并非包含关系而是平等的。</span></p></li><li><p><span>连接到两种网络的主机在网内进行通信都只需要使用网络的物理地址。</span></p></li></ol><h4 id='2ppp协议'><span>2、PPP协议</span></h4><h5 id='1协议满足的要求'><span>1.协议满足的要求</span></h5><p><span>点对点协议PPP（Point-to-Point Protocol）是目前使用最广泛的数据链路层协议，由SLIP协议发展而来。用户使用拨号电话接入因特网时一般都使用PPP协议。PPP协议只支持全双工链路。它需要满足的要求有：</span></p><ol start='' ><li><p><span>简单：对于链路层的帧，无需纠错，无需序号，无需流量控制。</span></p></li><li><p><span>封装成帧：在帧头和帧尾加上帧定界符。帧首部有5B，尾部有3B，共计8B。</span></p></li><li><p><span>透明传输：与帧定界符一样比特组合的数据的处理方法：异步线路（逐字符发送）用字节填充，同步线路（逐比特发送）用比特填充。</span></p></li><li><p><span>多种网络层协议：封装的IP数据报可以采用多种协议，两端也可以使用不同的网络层协议。</span></p></li><li><p><span>多种类型链路：串行/并行，同步/异步，电/光等。</span></p></li><li><p><span>差错检测：如果发现错误就丢弃帧。</span></p></li><li><p><span>检测连接状态：检测链路是否正常工作。</span></p></li><li><p><span>最大传送单元：需要规定数据部分最大长度MTU，但不超过1500B；由于PPP协议不采用CSMA/CD协议，没有最短帧，所以MTU范围是0至1500B（采用CSMA/CD协议则为46至1500B）。</span></p></li><li><p><span>网络层地址协商：知道通信双方的网络层地址。</span></p></li><li><p><span>数据压缩协商：在发送数据之时需进行压缩。</span></p></li><li><p><span>只支持全双工链路。</span></p></li><li><p><span>支持拨号连接，所以支持动态分配IP地址；支持身份确认。</span></p></li></ol><p><span>无需满足的要求是：纠错（通过硬件CRC校验实现无差错接收，但不能纠错，也没有确认机制，是不可靠的协议）；流量控制；有序化；也不需要支持多点线路。</span></p><h5 id='2三个组成部分'><span>2.三个组成部分</span></h5><ol start='' ><li><p><span>一个将IP数据报封装到串行链路（同步串行/异步串行）的方法。在PPP帧中，IP数据报就是其信息部分。另外还支持IPX、AppleTalk等协议。</span></p></li><li><p><span>链路控制协议LCP：建立并维护数据链路连接，可管理身份验证功能。</span></p></li><li><p><span>网络控制协议NCP：PPP可支持多种网络层协议，每个不同的网络层协议都要一个相应的NCP来配置，为网络层协议建立和配置逻辑连接。负责将网络层的数据报进行处理并封装给链路层。</span></p></li></ol><h5 id='3状态图与工作时分'><span>3.状态图与工作时分</span></h5><p><img src="计算机网络学习笔记.assets/image-20220414214728358.png" alt="image-20220414214728358" style="zoom:15%;" /></p><h5 id='4帧格式'><span>4.帧格式</span></h5><p><img src="计算机网络学习笔记.assets/image-20220414214810750.png" alt="image-20220414214810750" style="zoom:65%;" /></p><p><span>由此可以看出，</span><strong><span>PPP协议是面向字节的一种协议</span></strong><span>。实际上，从构成上看，PPP协议只比HDLC协议多了一个2字节的协议字段。</span></p><h4 id='3hdlc协议'><span>3、HDLC协议</span></h4><h5 id='1概念'><span>1.概念</span></h5><p><span>HDLC即高级数据链路控制（High-Level Data Link Control），是一个在同步网上传输数据、面向比特的数据链路层协议，它是由国际标准化组织(ISO)根据IBM公司的SDLC(Synchronous Data Link Control)协议扩展开发而成的。这是一种可在广域网中使用的点对点协议。有以下特点：</span></p><ul><li><p><span>数据报文可透明传输，用于实现透明传输的“0比特插入法”易于硬件实现，同步传输和PPP协议相同都是比特插入，异步传输比PPP协议少一个字节填充。</span></p></li><li><p><span>与PPP协议相同，采用全双工通信；</span></p></li><li><p><span>所有帧采用CRC检验，对信息帧进行顺序编号，防止漏收或重份，传输可靠性高。</span></p></li></ul><h5 id='2hdlc协议的站'><span>2.HDLC协议的站</span></h5><ol start='' ><li><p><span>主站的主要功能是发送命令（包括数据信息）帧、接收响应帧，并负责对整个链路的控制系统的初启、流程的控制、差错检测或恢复等。也就是控制站。</span></p></li><li><p><span>从站的主要功能是接收由主站发来的命令帧，向主站发送响应帧，并且配合主站参与差错恢复等链路控制。也就是被控制站。</span></p></li><li><p><span>复合站的主要功能是既能发送，又能接收命令帧和响应帧，并且负责整个链路的控制。相当于两种功能都具备的站。</span></p></li></ol><p><span>有三种数据操作方式：</span></p><ul><li><p><span>正常响应方式：从站在主站响应同意后才能发送数据。</span></p></li><li><p><span>异步平衡方式：每个站都是复合站，都可以对别的站进行数据传输。</span></p></li><li><p><span>异步响应方式：从站不需经过主站同意就可发送。</span></p></li></ul><h5 id='3帧格式'><span>3.帧格式</span></h5><p><img src="计算机网络学习笔记.assets/image-20220415125913860.png" alt="image-20220415125913860" style="zoom:80%;" /></p><p><span>控制字段只看前两位，用于决定信息部分携带的信息。如果控制字段C的开头为：</span></p><ul><li><p><span>无编号帧（U）11，用于提供对链路的建立、拆除等多种控制功能；</span></p></li><li><p><span>监督帧（S）10，用于流量控制和差错控制，执行对信息帧的确认、请求重发和请求暂停发送等功能；</span></p></li><li><p><span>信息帧（I）01或者00，用来传输数据信息，或使用捎带技术对数据进行确认。</span></p></li></ul><p><span>所以HDLC帧的类型为：无编号帧、监督帧、信息帧。速记：“无奸细”。</span></p><h4 id='3ppp协议和hdlc协议的异同'><span>3、PPP协议和HDLC协议的异同</span></h4><p><span>相同点有：</span></p><ul><li><p><span>都只支持全双工链路。</span></p></li><li><p><span>都是数据链路层的协议。</span></p></li><li><p><span>都可以实现透明传输，但PPP支持同步（0比特填充）和异步（默认，字节填充），HDLC只支持字节填充。</span></p></li><li><p><span>都可以实现差错检测，但不纠正差错。</span></p></li></ul><p><span>不同点为：</span></p><figure class='table-figure'><table><thead><tr><th><span>PPP协议</span></th><th><span>面向字节，0比特、字节填充都可</span></th><th><span>2B协议字段</span></th><th><span>无序号和确认机制</span></th><th><span>不可靠</span></th><th>&nbsp;</th></tr></thead><tbody><tr><td><span>HDLC协议</span></td><td><span>面向比特，0比特填充</span></td><td><span>无</span></td><td><span>有编号和确认机制</span></td><td><span>可靠</span></td><td>&nbsp;</td></tr></tbody></table></figure><p><span>关于两者的帧格式：</span></p><p><img src="计算机网络学习笔记.assets/image-20220415131521655.png"/></p><p><span>其中HDLC的帧是无编号帧、监督帧和信息帧。</span></p><h2 id='3-5-数据链路层的设备'><span>3-5 数据链路层的设备</span></h2><h3 id='3-51-物理层扩展以太网'><span>3-5.1 物理层扩展以太网</span></h3><p><span>以太网是一种局域网，我们需要想办法将其覆盖范围变大，所以需要对其进行一些扩展。下面是物理层方法。</span></p><p><span>使用光纤：主机——光纤调制器——集线器——光纤解调器——集线器。</span></p><p><span>使用主干集线器：集线器可以是一些集线器组，将很多单独的冲突域使用主干集线器连起来。</span></p><p><span>冲突域：在此处定义是，同一时间只能有一台主机在一个冲突域内发送信息。多个冲突域连接会让冲突域变大，效率变低。</span></p><p><img src="计算机网络学习笔记.assets/image-20220415132734502.png" alt="image-20220415132734502" style="zoom:67%;" /></p><h3 id='3-52--链路层扩展以太网'><span>3-5.2  链路层扩展以太网</span></h3><h4 id='1网桥'><span>1、网桥</span></h4><h5 id='1网桥的功能'><span>1.网桥的功能</span></h5><p><span>网桥：根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不向所有接口转发此帧，而是先检查此帧的目的MAC地址，然后再确定将该帧转发到哪一个接口，或者是把它丢弃（即过滤）。网桥主要工作在物理层和数据链路层。</span></p><p><span>网桥具有以下优点：</span></p><ol start='' ><li><p><span>过滤通信量，增大吞吐量。Hub没有这种功能。</span></p></li><li><p><span>提高了网络可靠性。</span></p></li><li><p><span>扩大了物理范围，可互连不同物理层、不同MAC子层和不同速率的以太网，成为更大的以太网。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220417104216268.png" alt="image-20220417104216268" style="zoom:67%;" /></p><p><span>网段：一般指一个计算机网络中使用同一物理层设备（传输介质，中继器，集线器等）能够直接通讯的那一部分。如上图中，3个冲突域分别为一个网段，网桥两端分别为网段。</span></p><p><span>多个速率、不同物理层和MAC子层的网段可通过网桥来连接。</span></p><p><span>网桥一般分为两种：透明网桥和源路由网桥。</span></p><h5 id='2透明网桥'><span>2.透明网桥</span></h5><p><span>透明网桥：“透明”指以太网上的站点并不知道所发送的帧将经过哪几个网桥，是一种即插即用设备——自学习。</span></p><p><img src="计算机网络学习笔记.assets/image-20220417104819764.png" alt="image-20220417104819764" style="zoom:67%;" /></p><p><span>自学习的机制：在上图中，每个透明网桥会构造一个转发表。转发表含有地址、接口两列，刚构造出来的时候是空的。</span></p><p><span>记两个网桥的左端都是接口1，右端是接口2（网桥不止两个接口，此处是简化的）。假设A广播了一个数据帧t，目的是发送给B：</span></p><ul><li><p><span>此时与A相同网段的主机（B等）都能收到t。</span></p></li><li><p><span>t到达第一个网桥的接口1，网桥检查发现转发表中没有A的地址，于是将A的地址和接口1写入转发表。这样网桥就能知道，如果以后要发给A，那么就只需要从接口1发送出去，不需要广播给所有接口。</span></p></li><li><p><span>左边网桥发现没有B的地址，所以将t从各个接口转发出去（不包括发送接口）。同理t来到右边网桥，右边网桥也在转发表中记录A的地址与1号接口，并从其2号接口转发。后面也是相同的。</span></p></li><li><p><span>对转发表的使用如：在上面的例子中，左边的网桥已经记录了A、1号接口的数据。如果此时，B给A发送数据，那么该网桥发现A在自己的转发表内，且这个帧又是从1号接口进来的，所以该网桥就不会再从任何接口转发这个帧，直接丢弃。</span></p></li></ul><p><span>须注意的是，转发表不是固定不变的，可能在一定周期后自动清空，这样可以清除那些已经不再活跃的地址等。</span></p><p><span>通过过这样的自学习，网桥的转发表中就能记录各个主机的地址与接收/发送接口，使最后的速率和效率大大提高。</span></p><h5 id='3源路由网桥'><span>3.源路由网桥</span></h5><p><span>源路由网桥：在发送帧时，把详细的最佳路由信息（路由最少/时间最短）放在帧的首部中。</span></p><p><span>方法：源站以广播方式向欲通信的目的站发送一个发现帧，每个发现帧可认为会原路返回（或者认为接收者发回了一个响应帧）。最早回来的发现帧就记录了最佳的路由信息。</span></p><h4 id='2多接口网桥------以太网交换机'><span>2、多接口网桥——以太网交换机</span></h4><p><span>局域网交换机，又称为以太网交换机，是一种多端口的网桥。使用常见的双端口网桥来扩展网络会让成本变高，所以我们采用以太网交换机来扩展网络。</span></p><p><span>注意，虽然以太网交换机原理和网桥几乎相同，但是除了同时通信数量外也有稍许区别：以太网交换机的交换结构芯片是专用的，转发更快；网桥端口一般连接局域网，而交换机一般与局域网主机相连。</span></p><p><span>以太网交换机基本原理和网桥相同，每个端口都连接着一个冲突域。其最大的特点是可以独占传输媒体带宽，所以端口越多总带宽越高：</span></p><p><img src="计算机网络学习笔记.assets/image-20220417111301468.png" alt="image-20220417111301468" style="zoom:67%;" /></p><p><span>比如，一个普通的集线器会将带宽均分给下面的主机；但是以太网交换机则可以独占媒体的带宽。</span></p><p><span>以太网交换机一般分为直通式交换机，以存储转发式交换机。</span></p><p><span>直通式交换机：</span></p><ul><li><p><span>查完目的地址（6B）就立刻转发。</span></p></li><li><p><span>延迟小，可靠性低，无法支持具有不同速率的端口的交换。</span></p></li></ul><p><span>存储转发式交换机：</span></p><ul><li><p><span>将帧放入高速缓存，并检查否正确，正确则转发，错误则丢弃。</span></p></li><li><p><span>延迟大，可靠性高，可以支持具有不同速率的端口的交换。</span></p></li></ul><h4 id='3冲突域和广播域'><span>3、冲突域和广播域</span></h4><p><span>冲突域：在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间内只能有一台设备发送信息的范围。</span></p><p><span>广播域：网络中能接收任一设备发出的广播帧的所有设备的集合。简单的说如果站点发出一个广播信号，所有能接收收到这个信号的设备范围称为一个广播域。</span></p><figure class='table-figure'><table><thead><tr><th>&nbsp;</th><th><span>能否隔离冲突域</span></th><th><span>能否隔离广播域</span></th></tr></thead><tbody><tr><td><span>物理层设备（中继器、集线器）</span></td><td><span>X</span></td><td><span>X</span></td></tr><tr><td><span>链路层设备（网桥、交换机）</span></td><td><span>O</span></td><td><span>X</span></td></tr><tr><td><span>网络层设备（路由器）</span></td><td><span>O</span></td><td><span>O</span></td></tr></tbody></table></figure><p><span>下图所示的范围内，共有4个冲突域，1个广播域（没有路由器，就只有一个广播域）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220417161437376.png" alt="image-20220417161437376" style="zoom:67%;" /></p><p>&nbsp;</p><h1 id='chapter-4-网络层'><span>Chapter 4 网络层</span></h1><p><img src="计算机网络学习笔记.assets/image-20220511084733547.png" alt="image-20220511084733547" style="zoom:60%;" /></p><h2 id='4-1-概述和功能'><span>4-1 概述和功能</span></h2><h3 id='4-11-概述'><span>4-1.1 概述</span></h3><p><span>网络层的主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务。网络层的设计思路是：向上提供无连接、尽努力交付的不可靠的数据报服务。</span></p><ul><li><p><span>功能一：路由器的两个主要功能是路由选择与分组转发（这也是网络层的主要任务），即通过算法选择最佳路径，并从合适的端口分组转发；</span></p></li><li><p><span>功能二：异构网络互联。就是说，将各种不同构造（指链路层、物理层协议不同，网络层也可以不同，但高层必须相同）的网络互联起来，需要利用一些方法和中间设备。“互联”是指不同的网络通过路由器互联。另外，世纪互联网本来不是一个网络，但通过IP协议互联后可以视为一整个网络，这一整个网络就是虚拟IP网络。</span></p><blockquote><p><span>中继系统分为4种：</span></p><ul><li><p><span>物理层：集线器和转发器；</span></p></li><li><p><span>链路层：网桥和交换机；</span></p></li><li><p><span>网络层：路由器；</span></p></li><li><p><span>网络层以上：网关。由于历史原因，TCP/IP协议中的路由器也可能被叫成网关。</span></p></li></ul></blockquote></li><li><p><span>功能三：拥塞控制。</span></p><ul><li><p><span>拥塞是一个全局的问题，和单一节点的流量控制不同，若所有结点都来不及接受分组，而要丢弃大量分组的话，网络就处于拥塞状态。</span></p></li><li><p><span>如果数据量达到一定程度，甚至整个网络都会进入吞吐量为0的死锁状态。</span></p></li><li><p><span>单一的增加资源不能解决拥塞，要全局的考虑主机、路由器和网络传输能力等。</span></p></li><li><p><span>为缓解这种拥塞，可采取的措施包括开环控制（提前准备，运行起来不作改动，是静态的方法）、闭环控制（监测网络运行转台，不断调整，是动态的方法）。</span></p></li></ul></li></ul><p><span>观察这个TCP/IP协议栈，自顶向下分别是应用层、传输层、网络层、数据链路层和物理层。可以看到，网络层主要的协议是ARP、IP、ICMP、IGMP协议。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511085814931.png" referrerpolicy="no-referrer" alt="image-20220511085814931"></p><h3 id='4-12-sdn的基本概念'><span>4-1.2 SDN的基本概念</span></h3><p><span>我们知道网络层的主要任务是路由选择和转发。现在将网络层抽象地划分为数据层面（也称作转发层面）和控制层面，可以看到，路由选择是控制层面的功能，而分组转发是数据层面的功能。</span></p><p><span>近年来流行的SDN（软件定义网络）采用集中的控制层面、分布式的控制层面，将两个层面相互分离：控制层面利用两层面之间的接口，对数据层面的路由器进行集中控制。</span></p><p><span>对传统的网络层以及路由器来说，每个路由器都有自己的转发表和路由选择软件；但采用SDN则每个路由器都不需要路由选择软件，也不需要彼此间交换路由信息，它们只需要单纯的收到分组、查找转发表并转发分组。至于路由选择，远端控制器会为每个分组计算出最佳路由。</span></p><p><span>互联网本来是分布式的，但SDN可以将部分网络变成集中控制形式。如果应用到大型数据中心中的局域网上，网络运行效率会特别高。</span></p><p><span>总的来说，SDN具有以下优点：</span></p><ul><li><p><span>全局集中式控制，分布式高速转发，有利于控制和优化。</span></p></li><li><p><span>可编程，十分灵活。</span></p></li><li><p><span>降低成本，路由器更加简单。</span></p></li></ul><p><span>SDN的缺点是：具有安全风险；另外，控制器可能成为网络性能的瓶颈。</span></p><h2 id='4-2-网络层的两种数据报'><span>4-2 网络层的两种数据报</span></h2><p><span>我们知道，要在网络中寻找一台主机，我们需要大致两个方面的信息：该主机在哪一个网络？它的名字/标识是什么？所以，IP地址应该有这两方面的功能：标识网络和其中某一台具体主机。此处主要讲解IPv4，因为IPv6技术与其没有特别大的差异。</span></p><h3 id='4-21-ipv4数据报'><span>4-2.1 IPv4数据报</span></h3><h4 id='1ip数据报的首部'><span>1、IP数据报的首部</span></h4><p><span>网络层传输单位是数据报。数据报是比较长的数据，分组是将数据报进行分片切割划分而得的片段。本章可以将两者看为一个级别的传输单位。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511090240816.png" alt="image-20220511090240816" style="zoom: 50%;" /></p><p><img src="计算机网络学习笔记.assets/image-20220511094613009.png" alt="image-20220511094613009" style="zoom:80%;" /></p><p><span>接下来对其中每个字段进行解释：</span></p><ol start='' ><li><p><span>版本：IPv4或是IPv6。</span></p></li><li><p><span>首部长度：首部长度有4位，可表示0 ~ 15。这里的</span><strong><span>单位是4B</span></strong><span>，也就是真正首部长度 = 前面表示的数 * 4B。看上图可知，固定部分有20B（每行4B），所以首部长度最小为5，最大为15。</span></p></li><li><p><span>区分服务：指示期望获得的服务类型。</span></p></li><li><p><span>总长度：整个IP数据包的长度，首部和数据之和。</span><strong><span>单位是1B</span></strong><span>，用16位表示，最大为2^16 - 1 = 65535B。但实际中不会有这么大，过大时会被分片以满足数据链路层的MTU等要求。</span></p></li><li><p><span>标识、标志和片偏移：在分片部分会进行讲解。</span></p></li><li><p><span>生存时间（TTL）：IP分组的保质期，经过一个路由就减1，变为0则被丢弃。</span></p></li><li><p><span>协议字段：数据部分所采用的协议。TCP、UDP字段值分别是6和17（遗弃）。·注意，协议字段和版本字段有很大的区别。</span></p></li><li><p><span>首部检验和：只检验首部，看数据报是否出错。也可以写作检查字段。</span></p></li><li><p><span>目的地址和源地址：在IPv4中是4B，IPv6中是6B。</span></p></li><li><p><span>可选字段：大小为0 ~ 40B，用以支持排错、测量、安全措施等。</span></p></li><li><p><span>填充字段：全为0的填充部分。为了保证首部大小一定是4B的整数倍而产生。</span></p></li><li><p><span>数据部分：传输层所给予的数据。</span></p></li></ol><h4 id='2ip数据报的分片'><span>2、IP数据报的分片</span></h4><p><span>我们在数据链路层的介绍中知道，链路层数据帧有可封装数据的上限，即最大传输单元MTU，它在以太网中是1500B。但数据报长度最长为2^16 - 1字节，所以要想办法将其分割成可以装入数据帧的大小，这就是数据报的分片。注意，部分IP数据报的协议不支持分片。</span></p><p><span>在上一部分的数据报首部的介绍中，固定部分有表示、标志、片偏移是涉及到分片的。</span></p><ol start='' ><li><p><span>标识：使用16位，同一数据报的分片的标识相同。</span></p></li><li><p><span>标志字段：有3位。其中：</span></p><ul><li><p><span>最高位无意义。</span></p></li><li><p><span>中间位DF（Don`t Fragment，禁止分片）：如果中间位为1则代表该分组不允许分片，为0则允许分片。DF=0后，MF才有意义。</span></p></li><li><p><span>最低位MF（More Fragment，更多分片）：MF为1则后面还有分片，这一片并非结尾；为0则代表这一片是最后一片，后续没有分片。</span></p></li></ul></li><li><p><span>片偏移：共13位，指出这一片在原分组中的相对位置，</span><strong><span>以8B作为单位</span></strong><span>。</span></p></li></ol><p><span>总长度、片偏移、首部长度分别是1B、8B、4B（1总8片首4，简记为“一种八片的首饰”）。</span></p><p><span>分片以后，每一片的首部都和原始分组的首部大小相同。但注意，分片以后不需要原来的首部。比如4000B的原数据（首部20B），那么只算有效载荷3980B。</span></p><h3 id='4-22-分类的ip地址'><span>4-2.2 分类的IP地址 </span></h3><h4 id='1ipv4地址'><span>1、IPv4地址</span></h4><p><span>IPv4是一种分类IP地址的编址方法。IP地址是全世界唯一的32位（4B）标识符，用以标识路由器主机的接口。分为网络号和主机号两个部分。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511120200981.png" referrerpolicy="no-referrer" alt="image-20220511120200981"></p><p><img src="计算机网络学习笔记.assets/image-20220511132327943.png" alt="image-20220511132327943" style="zoom:17%;" /></p><p><span>观察IP地址的第一部分可以区分出是哪一类的网络，见上图。D类适用于一对多的通信场景，在后面的多播、组播部分讲解。另外还有一些特殊的IP地址：</span></p><p><img src="计算机网络学习笔记.assets/image-20220511132606590.png" alt="image-20220511132606590" style="zoom:80%;" /></p><ul><li><p><span>第一种用于主机不清楚本机实际IP地址时使用，全0用以标识“本主机”。</span></p></li><li><p><span>第二种中，网络号为全0，所以表示的是本网络中的某个地址。</span></p></li><li><p><span>第三种用以标识广播的数据报，也就是会在本网络内广播，但不可以通过路由器。</span></p></li><li><p><span>第四种一般用来表示一个特定的网络，不指代任何主机。</span></p></li><li><p><span>第五种“直接广播地址”，是对一个特定网络上的所有主机进行广播，不可以穿过路由器。</span></p></li><li><p><span>第六种，网络号为127（即IP的前7位都是1），是用于环回测试的环回地址。</span></p></li></ul><p><span>总结：网络号为全0或1都是表示本网络；主机号为0表示整个网络，为1则是广播地址。注意，不存在网络号全1、主机号全0的IP，也不存在网络号全0、主机号全1的IP。</span></p><figure class='table-figure'><table><thead><tr><th><span>类别</span></th><th><span>最大可用网络数</span></th><th><span>第一个可用网络号</span></th><th><span>最后一个可用网络号</span></th><th><span>单个网络中最大主机数</span></th></tr></thead><tbody><tr><td><span>A</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.016ex" height="2.088ex" role="img" focusable="false" viewBox="0 -841 2659 923" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-27-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-27-TEX-N-37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z"></path><path id="MJX-27-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-27-TEX-N-32"></use></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><use data-c="37" xlink:href="#MJX-27-TEX-N-37"></use></g></g><g data-mml-node="mo" transform="translate(1158.8,0)"><use data-c="2212" xlink:href="#MJX-27-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2159,0)"><use data-c="32" xlink:href="#MJX-27-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mn>7</mn></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^7 - 2</script></td><td><span>1</span></td><td><span>126</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.09ex" role="img" focusable="false" viewBox="0 -841.7 3012.6 923.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-33-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-33-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-33-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use><use data-c="34" xlink:href="#MJX-33-TEX-N-34" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-33-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>24</mn></mrow></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{24} - 2</script></td></tr><tr><td><span>B</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.09ex" role="img" focusable="false" viewBox="0 -841.7 3012.6 923.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-29-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-29-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-29-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-29-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-29-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-29-TEX-N-31"></use><use data-c="34" xlink:href="#MJX-29-TEX-N-34" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-29-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="31" xlink:href="#MJX-29-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>14</mn></mrow></msup><mo>−</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{14} - 1</script></td><td><span>128.1</span></td><td><span>191.255</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 3012.6 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-34-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-34-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-34-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-34-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-34-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-34-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-34-TEX-N-36" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-34-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="32" xlink:href="#MJX-34-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>16</mn></mrow></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{16} - 2</script></td></tr><tr><td><span>C</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 3012.6 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-31-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-31-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-31-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-31-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-31-TEX-N-32"></use><use data-c="31" xlink:href="#MJX-31-TEX-N-31" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-31-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="31" xlink:href="#MJX-31-TEX-N-31"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>21</mn></mrow></msup><mo>−</mo><mn>1</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{21} - 1</script></td><td><span>192.0.1</span></td><td><span>223.255.255</span></td><td><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.016ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 2659 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-32-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-32-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-32-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-32-TEX-N-32"></use></g><g data-mml-node="mn" transform="translate(533,363) scale(0.707)"><use data-c="38" xlink:href="#MJX-32-TEX-N-38"></use></g></g><g data-mml-node="mo" transform="translate(1158.8,0)"><use data-c="2212" xlink:href="#MJX-32-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2159,0)"><use data-c="32" xlink:href="#MJX-32-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mn>8</mn></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^8 - 2</script></td></tr></tbody></table></figure><p><span>A、B、C类都不包括全0的地址；另外A类地址需额外减去127开头的环回地址。</span></p><p><span>IP编址的三个历史阶段：分类的IP地址；子网划分；构成超网（无分类编址方法）。</span></p><h4 id='2私有ip地址和nat转换'><span>2、私有IP地址和NAT转换</span></h4><p><span>在A、B、C类网络中，还存在一些私有的IP地址，如下所示。这些地址用于各个内部网络的地址标识。下面的网段个数是指可以分配的网络号。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511141806703.png" alt="image-20220511141806703" style="zoom:67%;" /></p><p><span>这些私有地址（或者叫做本地IP地址）不能在互联网中使用，只能在本地使用。那么，它们如何与互联网连接呢？这就需要通过网络地址转换来变换。</span></p><p><span>网络地址转换NAT（Network Address Translation）：在专用网连接到因特网的路由器上安装NAT软件（安装了NAT软件的路由器叫NAT路由器），它至少有一个有效的外部全球IP地址。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511143548607.png" alt="image-20220511143548607" style="zoom:60%;" /></p><p><span>NAT转换实现的关键就在于NAT路由器中的NAT转换表。这个转换表有WAN（广域网，即外部网络）端和LAN（局域网，即内部网络）端。每个端的表都会记录IP地址和端口号（传输层会讲到，用以标识进程）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220511144252123.png" alt="image-20220511144252123" style="zoom:67%;" /></p><p><span>内网中发送给NAT路由器的分为源l地址+端口、目的地址；在NAT转换表中，会将源地址+端口转换为路由器地址+分配的端口（使用特定端口来标记内网中的主机和进程）。</span></p><p><span>需要注意的是，NAT中的表项都是由管理员添加的；这样才可以从内网发送到外网；如果找不到对应的，直接丢弃即可。</span></p><p><span>总结：私有IP地址可以重用，也称为可重用地址；其只能用于LAN而不能用于WAN，需要通过网关利用NAT将其转换为全球IP地址。另外，路由器进行转发时，分组中的源IP地址和目的IP地址都不会变化，但会重新封装源硬件地址和目的硬件地址。</span></p><h3 id='4-23-子网掩码和子网划分'><span>4-2.3 子网掩码和子网划分</span></h3><h4 id='1子网掩码'><span>1、子网掩码</span></h4><p><span>A、B、C类IP地址的主机数目分别是</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.09ex" role="img" focusable="false" viewBox="0 -841.7 3012.6 923.7" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-33-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-33-TEX-N-34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"></path><path id="MJX-33-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use><use data-c="34" xlink:href="#MJX-33-TEX-N-34" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-33-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="32" xlink:href="#MJX-33-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>24</mn></mrow></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{24} - 2</script><span>、</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.816ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 3012.6 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-34-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-34-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-34-TEX-N-36" d="M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z"></path><path id="MJX-34-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-34-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-34-TEX-N-31"></use><use data-c="36" xlink:href="#MJX-34-TEX-N-36" transform="translate(500,0)"></use></g></g></g><g data-mml-node="mo" transform="translate(1512.3,0)"><use data-c="2212" xlink:href="#MJX-34-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2512.6,0)"><use data-c="32" xlink:href="#MJX-34-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>16</mn></mrow></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{16} - 2</script><span>、</span><mjx-container class="MathJax" jax="SVG" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="6.016ex" height="2.072ex" role="img" focusable="false" viewBox="0 -833.9 2659 915.9" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.186ex;"><defs><path id="MJX-35-TEX-N-32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"></path><path id="MJX-35-TEX-N-38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z"></path><path id="MJX-35-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><use data-c="32" xlink:href="#MJX-35-TEX-N-32"></use></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><use data-c="38" xlink:href="#MJX-35-TEX-N-38"></use></g></g></g><g data-mml-node="mo" transform="translate(1158.8,0)"><use data-c="2212" xlink:href="#MJX-35-TEX-N-2212"></use></g><g data-mml-node="mn" transform="translate(2159,0)"><use data-c="32" xlink:href="#MJX-35-TEX-N-32"></use></g></g></g></svg><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>2</mn><mrow data-mjx-texclass="ORD"><mn>8</mn></mrow></msup><mo>−</mo><mn>2</mn></math></mjx-assistive-mml></mjx-container><script type="math/tex">2^{8} - 2</script><span>，数量比较大，很多时候用不到而造成空间的浪费。另外，两级IP（网络+主机）不够灵活，不能轻易添加主机。</span></p><p><img src="计算机网络学习笔记.assets/image-20220512085444086.png" alt="image-20220512085444086" style="zoom:67%;" /></p><p><span>为此，我们使用子网划分技术，将一部分主机号拿出来用作子网号。例如，一个B类IP地址145.13.x.x可以都通过145.13.0.0的路由器，内部划分为145.13.x.0等子网，对外看来内部仍然是同一个网络。一般来说，子网号不能全为1或0；但也有部分路由器支持。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             </span></p><p><span>子网掩码：对一个IP地址的每个字节，如果是网络号，那就是全1；如果是主机号，那就是全0。比如一个二级IP地址145.13.3.10的子网掩码：11111111 11111111 00000000 00000000，也就是255.255.0.0。依次类推，如果它是3级IP地址，子网掩码就是255.255.255.0。</span></p><p><span>子网掩码的作用：子网掩码和IP地址按位相与，就可以得到子网网络地址。也就是说：子网掩码为1的字节保持不变，为0的地方置为0即可。</span></p><p><span>比如：144.14.72.24的子网掩码是255.255.192.0，那么只需要看第三字节部分。72变成二进制：0100 1000；192变成2进制：1100 0000。相与得：0100 0000，即64。所以子网络号是144.14.64.0。不同的子网掩码的效果可能是一样的，但意义不同（主机号和网络号的意义）。</span></p><p><span>注意：</span><strong><span>子网掩码与主机号一般都不能为全0或全1。但是，如果使用了无类别域间路由选择（CIDR）技术，那么子网号可以为全0或全1</span></strong><span>。</span></p><h4 id='2使用子网时分组的转发'><span>2、使用子网时分组的转发</span></h4><p><span>路由器中存在转发表。如果路由器A经过B给C所在网络中的子网发送消息，那么：</span></p><p><span>A和B的路由表中应当存有：目的网络地址，目的网络的子网掩码，以及下一跳的地址。这里注意，</span><strong><span>网络地址就是网络号</span></strong><span>。</span></p><p><span>路由器转发分组的算法：</span></p><ol start='' ><li><p><span>提取目的IP地址；</span></p></li><li><p><span>根据目的地址判断是否可以直接交付：目的IP的子网地址与现在的路由器直接相连，就可以直接交付，否则就需要途经下一个路由器。</span></p></li><li><p><span>特定主机路由：路由表中存在特定主机路由，和普通的路由表分离。如果有等于特定主机的IP，那就按照该特定主机路由行所描述的步骤继续转发。</span></p></li><li><p><span>检测路由表中有无路径：确认特定路由表中没有满足需要的以后，就需要对比普通的路由表部分。用子网掩码和每一行的路由表进行相与，得到结果进行比对。</span></p></li><li><p><span>默认路由0.0.0.0：如果以上几步都没有成功找到路径，就会发送给默认路由（子网掩码、P地址都是0.0.0.0），也就是另外一台路由器，后续路由器重复上述操作直至找到目的子网网络。</span></p></li><li><p><span>超出了数据报或者其分组的生存时间：丢弃，报告转发分组出错。</span></p></li></ol><p><span>如下图所示，最后的0.0.0.0就是默认路由。这并不代表R4的真是IP地址，只用以代指R4。</span></p><p><img src="计算机网络学习笔记.assets/image-20220514093840630.png" alt="image-20220514093840630" style="zoom: 67%;" /></p><h3 id='4-24-ipv6数据报'><span>4-2.4 IPv6数据报</span></h3><h4 id='1ipv4需要改进之处'><span>1、IPv4需要改进之处</span></h4><p><span>尽管IPv4协议已经采取了CIDR、NAT等方式来增大IPv4地址容量，但仅有32位的IPv4空间还是不足够使用，所以需要增加地址位数；</span></p><p><span>另外，IPv4的首部固定部分占用20字节，而可选字段长度为0到40字节（4的整数倍），占用了过多的空间，需要改进首部格式来快速处理和转发；</span></p><p><span>还要支持Qos（Quality of Service，服务质量），以满足实时的多媒体通讯需求：指一个网络能够利用各种基础技术，为指定的网络通信提供更好的服务能力，是网络的一种安全机制，是用来解决网络延迟和阻塞等问题的一种技术。</span></p><h4 id='2ipv6数据报格式'><span>2、IPv6数据报格式</span></h4><p><img src="计算机网络学习笔记.assets/image-20220517121947372.png" referrerpolicy="no-referrer" alt="image-20220517121947372"></p><p><span>如图，基本首部固定40B。可以看到，相当于将IPv4首部的可选字段挪到了有效载荷部分。关于其基本首部和有效载荷，结构如图所示：</span></p><p><img src="计算机网络学习笔记.assets/image-20220517193308176.png" referrerpolicy="no-referrer" alt="image-20220517193308176"></p><p><span>观察其基本首部：</span></p><ol start='' ><li><p><span>版本：标注了协议版本，在IPv6中总是为6。</span></p></li><li><p><span>优先级：区分数据报的类别以及优先级。</span></p></li><li><p><span>“流”是互联网络上从特定源点到特定终点的一系列数据报。所有属于同一个流的数据报都具有同样的流标签。与IPv4的标识位区别是：IPv4的标识位是标识同一个数据报的不同分片。</span></p></li><li><p><span>有效载荷长度：IPv4分作首部长度（单位4B）和总长度（单位1B），IPv6是有效载荷的长度（单位1B）。</span></p></li><li><p><span>下一个首部：每个扩展首部都会有一个字段指示下一个首部。固定首部中的这个字段指向有效载荷中的第一个扩展首部（1指向2，以此类推）。</span></p></li><li><p><span>跳数限制：字面理解，相当于IPv4的TTL。</span></p></li><li><p><span>源地址和目的地址：各16B。</span></p></li></ol><h4 id='3和ipv4的区别'><span>3、和IPv4的区别</span></h4><ol start='' ><li><p><span>IPv6将地址从32位（4B）扩大到128位（16B）。</span></p></li><li><p><span>IPv6的首部字段只有8个，比IPv4减少了4个。</span></p></li><li><p><span>IPv6首部（包括扩展首部）长度必须是8B的整数倍，IPv4首部是4B的整数倍。</span></p></li><li><p><span>IPv6只能在发送主机处分片，IPv4可以在路由器和主机处分片。因此可以认为“IPv6不可以分片”。</span></p></li><li><p><strong><span>IPv6将校验和字段彻底移除，以减少每跳的处理时间</span></strong><span>。</span></p></li><li><p><span>IPv6将IPv4的可选字段移出首部，变成了扩展首部，成为灵活的首部格式，路由器通常不对扩展首部进行检查，大大提高了路由器的处理效率。</span></p></li><li><p><span>IPv6取消了协议字段，改成下一个首部字段。</span></p></li><li><p><span>IPv6取消了总长度字段，改用有效载荷长度字段。</span></p></li><li><p><span>IPv6取消了服务类型字段。</span></p></li><li><p><span>ICMP协议添加了一种附加报文类型，即“分组过大”。</span></p></li><li><p><span>IPv6支持即插即用（即自动配置），不需要DHCP协议；IPv6支持资源的预分配，支持实时视像等要求，保证一定的带宽和时延的应用。都可以看成Qos的要求。</span></p></li></ol><h4 id='4ipv6的表示'><span>4、IPv6的表示</span></h4><p><span>如果继续采用和IPv4一样的点分十进制，那么就会十分长，不方便书写阅读，所以使用冒号十六进制记法。</span></p><p><span>冒号十六进制记法：包括8组，每组4个16进制数（共4 * 4 = 16位）。</span></p><p><span>分为一般形式和压缩形式。一般形式就是全部写出来，压缩形式有两个规则：一组中前面的0可以省略，如0000可以简写成0,002F可以简写为2F；多组0连续，用双冒号替代。但是一个地址里只可以出现一次双冒号。</span></p><p><span>比如一般形式为：（4BF5：0000：0000：0000：00FF：0000：0000：00FF），采用压缩形式为：（4BF5：：FF：0：0：FF）</span></p><h4 id='5ipv6基本地址类型'><span>5、IPv6基本地址类型</span></h4><ol start='' ><li><p><span>单播：一对一通信，可做源地址+目的地址。显然，一个数据报可以有多个目的地，但只有一个来源。</span></p></li><li><p><span>多播：一对多通信，可做目的地址；如果包括所有，就是所谓的广播地址。</span></p></li><li><p><span>任播：一对多中的一个通信，一般是给任播组中距离本机最近的一台，可做目的地址。</span></p></li></ol><h4 id='6ipv6和ipv4过渡策略'><span>6、IPv6和IPv4过渡策略</span></h4><p><span>双栈协议：</span></p><ul><li><p><span>双协议栈技术就是指在一台设备上同时启用IPv4协议栈和IPv6协议栈。如此一来，这台设备既能和IPv4网络通信，又能和IPv6网络通信。</span></p></li><li><p><span>如果这台设备是一个路由器，那么这台路由器的不同接口上，分别配置了IPv4地址和IPv6地址，并很可能分别连接了IPv4网络和IPv6网络。</span></p></li><li><p><span>如果这台设备是主机，那么它将同时拥有IPv4地址和IPv6地址，并具备同时处理这两个协议地址的功能。现在大部分计算机都是如此。</span></p></li></ul><p><span>隧道技术：</span></p><ul><li><p><span>通过使用互联网络的基础设施，在网络之间传递数据的方式。</span></p></li><li><p><span>使用隧道传递的数据（或负载）可以是不同协议的数据帧或包。隧道协议将其它协议的数据帧或包重新封装然后通过隧道发送。</span></p></li><li><p><span>举例：将IPv6地址作为一个IPv4数据报的数据部分，进行传输。</span></p></li></ul><p>&nbsp;</p><p>&nbsp;</p><h2 id='4-3-ip相关协议'><span>4-3 IP相关协议</span></h2><p><span>总的来说，网络层共包含4个相关协议，有：IP协议（基础）、ICMP协议（网际控制报文）、ARP和RARP协议（正/逆地址解析）。DHCP协议（动态主机配置）是应用层协议，UDP、TCP都是传输层协议。</span></p><h3 id='4-31-无分类编址cidr'><span>4-3.1 无分类编址CIDR</span></h3><h4 id='1cidr的概念'><span>1、CIDR的概念</span></h4><p><span>以下3中划分方式分别是：B类网络地址，即二级IP地址；子网掩码划分子网；CIDR。</span></p><p><img src="计算机网络学习笔记.assets/image-20220513211234088.png" referrerpolicy="no-referrer" alt="image-20220513211234088"></p><p><span>外形上，CIDR与二级IP地址很相像；但CIDR的网络前缀是可变长度的，所以更加灵活。CIDR消除了传统的A类，B类和C类地址以及划分子网的概念；并且融合子网地址与子网掩码，方便子网划分。</span></p><p><span>CIDR记法：IP地址后加上“/”，再写上网络前缀（可变长）的位数。如：128.14.32.0/20。另外，把网络前缀都相同的连续的IP地址组成一个“CIDR地址块”。如128.14.35.7/20是某CIDR地址块中的一个地址，可计算得该CIDR地址块为128.14.32.0/20。</span></p><p><span>注意，与二级IP地址相同点在于，主机号全0和全1分别表示本网络和广播，不能用于分配。例如对上面的128.14.32.0/20块来说：</span></p><p><img src="计算机网络学习笔记.assets/image-20220513214341569.png" referrerpolicy="no-referrer" alt="image-20220513214341569"></p><h4 id='2构成超网'><span>2、构成超网</span></h4><p><span>将多个子网聚合成一个较大的子网，叫做构成超网，或路由聚合。</span>
<span>方法：将网络前缀缩短（取相同的部分作为前缀部分，不同部分为主机号，如1.1.0.0/17和1.1.128.0/17合并为超网：1.1.0.0/16）。</span></p><h4 id='3最长前缀匹配'><span>3、最长前缀匹配</span></h4><p><span>使用CIDR时，查找路由表可能得到几个匹配结果（跟网络掩码按位相与），应</span><strong><span>选择具有最长网络前缀的路由</span></strong><span>。前缀越长，地址块越小，路由越具体。</span></p><h3 id='4-32-arp协议'><span>4-3.2 ARP协议</span></h3><h4 id='1发送数据的过程'><span>1、发送数据的过程</span></h4><p><img src="计算机网络学习笔记.assets/image-20220514113129643.png" referrerpolicy="no-referrer" alt="image-20220514113129643"></p><p><span>观察如图所示的发送过程：其他部分先不考虑，网络层到链路层的封装过程中怎么得到目的MAC地址（图中的MAC3）呢？这就需要用到ARP（Address Resolution Protocol，</span><strong><span>地址解析协议</span></strong><span>）协议。</span></p><p><span>ARP高速缓存：每个主机或路由器都会有一个ARP高速缓存，其中存放的是IP地址与MAC地址的映射。通过这里的IP与MAC地址的对应，我们才能得到目的MAC地址，从而完成链路层的封装。（封装过程还有很多其他组件，此处指画出关键组件）</span></p><p><span>如果ARP缓存中没有发现相应映射，那么就需要使用ARP协议。ARP协议对于目的地址、源地址是否在同一个广播域的处理略有区别。</span></p><ol start='' ><li><p><span>当目的地址、源地址在同一个局域网时：</span></p><ul><li><p><span>首先</span><strong><span>广播</span></strong><span>一个ARP分组请求（IP1为源地址，IP3为目的地址；MAC1、MAC3分别为源MAC地址和目的MAC地址），格式如下所示，其中全F即16进制的全1，代表广播。  </span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220514141454937.png" referrerpolicy="no-referrer" alt="image-20220514141454937"></p><ul><li><p><span>此时，目的主机接收到这个ARP分组后产生响应（其他主机则不响应），会返回一个</span><strong><span>单播</span></strong><span>响应分组（专门发送），其中携带着自己的IP地址和MAC地址。</span></p></li><li><p><span>接收这个单播响应分组后，就获取到了目的MAC地址，便于将链路层的帧封装完整。</span></p></li></ul></li><li><p><span>下面探讨数据跨越路由器的情况：</span></p><p><img src="计算机网络学习笔记.assets/image-20220514154040971.png" referrerpolicy="no-referrer" alt="image-20220514154040971"></p><ul><li><p><span>如图所示，1号主机想给5号主机发送消息。目的地址和源地址分别是IP5和IP1，首先的目的物理地址是MAC6。</span></p></li><li><p><span>被路由器转发以后，源物理地址变成MAC7，目的物理地址是MAC8；如果是点对点的PPP协议，那么MAC8为全1。</span></p></li><li><p><span>再经过第二个路由，可能使用ARP协议，最后源物理地址变成MAC9，目的物理地址是MAC5。</span></p></li></ul></li></ol><h4 id='2arp协议'><span>2、ARP协议</span></h4><p><span>从本章开头的图中，我们就可以知道ARP协议是网络层和链路层之间的重要协议。</span></p><p><span>ARP协议的功能：在实际网络的链路上传送数据帧时，最终必须使用MAC地址（局域网内部），所以需要ARP协议来完成主机或路由器中的IP地址到MAC地址的映射。</span></p><p><span>ARP协议使用过程：</span></p><ul><li><p><span>先检查ARP高速缓存，有对应表项则写入MAC帧，没有则用目的MAC地址为FF-FF-FF-FF-FF-FF的帧封装，并广播ARP请求分组，使得同一局域网中所有主机都能收到该请求。</span></p></li><li><p><span>目的主机收到请求后就会向源主机单播一个ARP响应分组，源主机收到后将此映射写入ARP缓存（有生存周期TTL，大约10-20min更新一次）。</span></p></li></ul><p><span>ARP协议4种典型情况：</span></p><ol start='' ><li><p><span>主机A发给本网络上的主机B：用ARP找到主机B的硬件地址；</span></p></li><li><p><span>主机A发给另一网络上的主机B：用ARP找到本网络上一个路由器（网关）的硬件地址；</span></p></li><li><p><span>路由器发给本网络的主机A：用ARP找到主机A的硬件地址；</span></p></li><li><p><span>路由器发给另一网络的主机B：用ARP找到本网络上的一个路由器的硬件地址。</span></p></li></ol><p><span>例题：主机A发送IP数据报给主机B，经过了5个路由器，请问此过程总共使用了几次ARP协议？解答：经过了6次。A-r1-r2-r3-r4-r5-B，一共6段。</span></p><p><span>最后需注意：MAC地址无法用于跨网络通信，所以诞生了ARP协议；另外，路由器互联多个网络，所以具有多个IIP地址和多个物理地址。</span></p><h3 id='4-33-dhcp协议'><span>4-3.3 DHCP协议</span></h3><p><span>主机获取一个IP地址有两种主要方法：</span></p><ul><li><p><span>静态配置：如机房、网吧中固定的主机，通过管理员统一配置IP地址、子网掩码、默认网关。</span></p></li><li><p><span>动态配置：通过DHCP服务器和交换机来动态分配IP地址。如，在不同房间连接无线网络后被分配的IP地址不同。</span></p></li></ul><p><span>动态主机配置协议（Dynamic Host Configuration Protocol，DHCP）是一个</span><strong><span>应用层协议</span></strong><span>，其前身为BOOTP协议，使用C/S方式，客户端和服务端通过</span><strong><span>广播方式进行交互，基于UDP</span></strong><span>。它提供即插即用联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租。</span></p><ul><li><p><span>DHCP服务器中有一个IP地址池。主机A接入网络可以立即分配一个IP地址，这就是即插即用；</span></p></li><li><p><span>如果一个IP分配给主机A，等主机A断开连接后，这个IP地址就可以分配给新接入的主机B，这就是地址重用；</span></p></li><li><p><span>DHCP动态分配有很多种方式，比如按时间分配，每个IP地址都有租用期（类似数据报的老化期）；但很多主机可能会连接更长时间，DHCP会保持他们的IP暂时不变，这就是IP续租（也可能重新请求IP地址，看具体协议）。</span></p></li></ul><p><span>下面是DHCP分配IP的过程：</span></p><ol start='' ><li><p><span>主机广播“DHCP发现报文”（Discover）：主机试图找到网络中的服务器，服务器获得一个IP地址。注意，源地址是全0，目的地址是全1。</span></p></li><li><p><span>DHCP服务器广播“DHCP提供报文”（Offer）：服务器拟分配给主机一个IP地址及相关配置，主机采取先到先得策略（服务器可能发送很多IP地址）。</span></p></li><li><p><span>主机广播“DHCP请求报文”（Request）：主机向服务器请求提供IP地址。使用广播是为了让其他HCP服务器也接收到信息，避免多个服务器同时给主机分配地址。</span></p></li><li><p><span>DHCP服务器广播“DHCP确认报文”（Ack）：服务器正式将IP地址分配给主机。</span></p></li></ol><p><span>注意：DHCP的主机和服务器间的交流报文共有8种，上面介绍了4种；另外，传播方式是靠广播。</span></p><h3 id='4-34-icmp协议'><span>4-3.4 ICMP协议</span></h3><h4 id='1icmp协议'><span>1、ICMP协议</span></h4><p><span>ICMP（Internet Control Message Protocol，网际控制报文协议）是一个面向无连接的</span><strong><span>网络层协议</span></strong><span>。</span></p><p><span>ICMP协议支持主机或路由器，报文类型共有两种：差错（或异常）报告报文以及网络探询报文。</span></p><p><span>网络层对错误分组的处理是：直接丢弃，并发送特定ICMP报文报告错误。</span></p><p><span>一个ICMP报文的结构如图所示：</span></p><p><img src="计算机网络学习笔记.assets/image-20220517112831552.png" alt="image-20220517112831552" style="zoom:67%;" /></p><h4 id='2icmp差错报告报文'><span>2、ICMP差错报告报文</span></h4><p><span>ICMP差错报告报文大致分为5种情况：</span></p><ol start='' ><li><p><span>终点不可达报文（无法交付）：数据已经到达路由或主机，但路由器或主机不能交付数据报，此时就向源点发送终点不可达报文。</span></p></li><li><p><span>源点抑制报文（拥塞数据丢失）：当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文，使源点知道应当把数据报的发送速率放慢。</span></p></li><li><p><span>时间超过报文：</span></p><ul><li><p><span>路由器超时（收到已经老化的数据报）：当路由器收到生存时间TTL=0的数据报时，除丢弃该数据报外，还要向源点发送时间超过报文。</span></p></li><li><p><span>终点超时（终点在规定时间内未收到全部数据）：当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。</span></p></li></ul></li><li><p><span>参数问题报文（首部字段出错）：当路由器或目的主机收到的数据报的首部中有的字段的值不正确时，就丢弃该数据报，并向源点发送参数问题报文。</span></p></li><li><p><span>改变路由报文（通知主机重定向或改变路径）：路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。</span></p></li></ol><p><span>如图所示，5种ICMP差错报告报文的格式都一样，ICMP前8字节内容决定了报文的种类。流程为：</span></p><ol start='' ><li><p><span>收到出错的IP数据报；</span></p></li><li><p><span>取出该数据报的首部和前8个字节；</span></p></li><li><p><span>在前面加上首部，以及ICMP的前8字节，形成完整的IP数据报。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220517114703518.png" referrerpolicy="no-referrer" alt="image-20220517114703518"></p><p><span>不应当发送ICMP差错报告报文的情况：</span></p><ol start='' ><li><p><span>如果ICMP差错报告报文出了差错，不再发送差错报告。</span></p></li><li><p><span>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。如果第一片错了，那么发送第一片错误的报文，后续片直接丢弃。</span></p></li><li><p><span>对具有组播地址（给自己组内所有主机广播，区别于直接广播）的数据报，不发送ICMP差错报告报文。</span></p></li><li><p><span>对具有特殊地址（如环回地址127.0.0.0，或不能作为目的地址的0.0.0.0）的数据报不发送ICMP差错报告报文。</span></p></li></ol><h4 id='3icmp询问报文'><span>3、ICMP询问报文</span></h4><p><span>ICMP询问报文大致分为4种情况：</span></p><ol start='' ><li><p><span>回送请求和回答报文：主机或路由器向特定目的主机发出的询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。测试目的站是否可达以及了解其相关状态。典型的如“ping”路由器，就是通过会送请求和回答报文看主机和路由器是否连通。</span></p></li><li><p><span>时间戳请求和回答报文：请某个主机或路由器回答当前的日期和时间，用来进行时钟同步和测量时间。</span></p></li><li><p><span>掩码地址请求和回答报文。已不再使用。</span></p></li><li><p><span>路由器询问和通告报文。已不再使用。</span></p></li></ol><h4 id='4icmp的应用'><span>4、ICMP的应用</span></h4><p><span>在PING中的应用：测试两个主机之间的连通性，使用了ICMP回送请求和回答报文。</span></p><p><span>Traceroute：跟踪一个分组从源点到终点的路径，使用了ICMP时间超过差错报告报文。从发送TTL=1的报文开始，直到发送成功，就可以通过TTL知道源点和终点的距离。</span></p><h2 id='4-4--路由算法及分组协议'><span>4-4  路由算法及分组协议</span></h2><h3 id='4-41-概述'><span>4-4.1 概述</span></h3><p><span>我们知道，在路由器的路由表或NAT转发表中，会有很多的下一条目的地；但是，我们需要依靠路由算法来选择出最佳的下一跳，即“最佳路由”；此处的“最佳”只是相对于某一种特定要求下得出的较为合理的选择。</span></p><p><span>路由算法共分为两类，其中动态路由算法又有两类：</span></p><ol start='' ><li><p><span>静态路由算法（非自适应路由算法）：管理员手工配置路由信息。</span></p><ul><li><p><span>简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好，广泛用于高度安全性的军事网络和较小的商业网络。</span></p></li><li><p><span>路由更新慢，不适用大型网络。</span></p></li></ul></li><li><p><span>动态路由算法（自适应路由算法）：路由器间彼此交换信息，按照路由算法优化出路由表项。</span></p><ul><li><p><span>路由更新快，适用大型网络，及时响应链路费用或网络拓扑变化。</span></p></li><li><p><span>算法复杂，增加网络负担。</span></p></li><li><p><span>包含两种算法：</span></p><ol start='' ><li><p><span>链路状态路由算法OSPF（注重全局性）：所有路由器掌握完整的网络拓扑和链路费用信息。</span></p></li><li><p><span>距离向量路由算法RIP（注重分散性）：路由器只掌握物理相连的邻居及链路费用。</span></p></li></ol></li></ul></li></ol><p><span>第二点是要采用分层次的路由选择协议。这是因为，互联网规模过大，且保证某些网络的内部协议保密的。路由选择协议共分为两种（注意，网关只是一种以前对路由器的叫法）：</span></p><ul><li><p><span>内部网关协议IGP：单个AS之间使用；包括RIP和OSPF等。</span></p></li><li><p><span>外部网关协议EGP：多个AS之间使用；包括BGP协议等。常用BGP-4协议。</span></p></li></ul><p><span>此处提出概念，自治系统（AS）：</span></p><ul><li><p><span>在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种AS之间的路由协议以确定在AS之间的路由。</span></p></li><li><p><span>一个AS内的所有网络都属于一个行政单位来管辖，一个自治系统的所有路由器在本自治系统内都必须连通。</span></p></li></ul><h3 id='4-42-igp之一rip协议和距离向量算法'><span>4-4.2 IGP之一：RIP协议和距离向量算法</span></h3><h4 id='1rip协议'><span>1、RIP协议</span></h4><p><span>RIP是一种分布式的基于距离向量的路由选择协议，是因特网的协议标准，最大优点是简单。后来思科又推出了新的IGRP，和RIP一样且更强大。</span></p><ul><li><p><span>只适用于较小的网络。</span></p></li><li><p><span>该协议要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离记录（即一组距离）。</span></p></li></ul><p><span>下面解释“距离”：</span></p><ul><li><p><span>也可以说是“跳数”，即从源端口到目的端口所经过的路由器个数，每经过一个路由器跳数+1。</span></p></li><li><p><strong><span>RIP允许一条路由最多只能包含15个路由器，因此距离为16表示网络不可达</span></strong><span>（只适用于小互联网）。</span></p></li><li><p><span>特别地，从一路由器到直接连接的网络距离为1，也就是说，距离为1代表直接交付。但是部分书记也称直接交付的距离为0，看具体情况。</span></p></li></ul><p><span>下面来解释RIP协议的技术细节：</span></p><ol start='' ><li><p><span>和谁交换：仅和相邻路由器交换信息。</span></p></li><li><p><span>交换的内容：路由器交换的信息是自己的路由表。实际上，这些信息被封装在RIP报文中，所以双方交换的信息实际上就是RIP报文。</span></p></li><li><p><span>交换频率：每30秒交换一次路由信息，然后路由器根据新信息更新路由表。若超过180s没收到邻居路由器的通告，则判定邻居已离线，并更新自己的路由表。</span></p></li><li><p><span>工作过程：</span></p><ol start='' ><li><p><span>路由器刚开始工作时，只知道直接连接的网络的距离（距离为1）；</span></p></li><li><p><span>接下来，每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息；</span></p></li><li><p><span>经过若干次更新后，所有路由器最终都会知道到达本自治系统任何一个网络的最短距离和下一跳路由器的地址，即“收敛”；由此引出“收敛速度”来衡量每次系统重新知道所有信息的速度。</span></p></li></ol></li></ol><p><span>RIP协议的特点可以总结为“好消息传得快，坏消息传得慢”：正常的信息交换只需30秒一次。当网络出现故障时，要经过比较长的时间（数分钟）才能将此信息传送到所有的路由器，收敛较慢；如果出现死循环，要直到距离都增大到大于16，两者菜都知道网络不可达。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608113411052.png" alt="image-20220608113411052" style="zoom:50%;" /></p><h4 id='2路由表的更新距离向量算法'><span>2、路由表的更新：距离向量算法</span></h4><p><span>两个路由器在RIP协议中需要交换RIP报文，而这个RIP报文的内容就是路由表中的信息。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608112520582.png" alt="image-20220608112520582" style="zoom:67%;" /></p><p><span>路由表中最重要的表项是“最短距离”；而为了得到最短距离，可以采取距离向量算法。</span></p><p><span>已知：每个路由表中都有三个关键数据，即&lt;目的网络N，距离d，下一跳路由器地址X&gt;。距离向量算法有以下几步：</span></p><ol start='' ><li><p><span>修改相邻路由器发来的RIP报文中所有表项：对地址为X的相邻路由器发来的RIP报文，修改此报文中的所有项目：把下一跳字段中的地址改为X，并把所有的距离字段+1。</span></p></li><li><p><span>先看目的网络，再看下一跳，最后看距离。对修改后的RIP报文中的每一个项目，进行以下步骤（记目的网络为Net）：</span></p><ul><li><p><span>如果原路由表中没有Net，那么添加该项目到路由表；</span></p></li><li><p><span>如果原路由表中有Net：</span></p><ul><li><p><span>如果下一跳地址为X，直接替换原来的项目。注意这一条，如果下一跳一样则以新的为准。</span></p></li><li><p><span>如果下一条地址不是X：</span></p><ul><li><p><span>如果新的距离小于原来距离，那就替换原有条目；</span></p></li><li><p><span>新的距离大于等于原来距离，那就什么都不执行。</span></p></li></ul></li></ul></li></ul></li><li><p><span>若180s还没收到相邻路由器X的更新路由表，则把X记为不可达的路由器，即把距离设置为16。最后再返回。</span></p></li><li><p><span>时刻要进行更新，即使已经获得了整个网络的路由信息，这是为了时刻获知网络的状态。</span></p></li></ol><p><span>实际上，所谓的距离向量，就是用类似向量的数据表示各路由器之间的距离。如ABCDEF共6台主机，B可能收到向量（5,0,1,2,3,4），这代表着B到包括自己在内的所有主机的距离。 </span></p><h3 id='4-43-igp之二ospf协议和链路状态算法'><span>4-4.3 IGP之二：OSPF协议和链路状态算法</span></h3><h4 id='1ospf协议'><span>1、OSPF协议</span></h4><p><span>开放最短路径优先OSPF协议：</span></p><ul><li><p><span>“开放”表明，OSPF协议不是受某一家厂商控制，而是公开发表的；</span></p></li><li><p><span>所谓“最短路径优先”是指，使用了Dijkstra提出的最短路径算法（SPF)。</span></p></li><li><p><span>OSPF最主要的特征就是使用分布式的链路状态协议。</span></p></li></ul><p><span>下面来解释OSPF协议的技术细节：</span></p><ol start='' ><li><p><span>和谁交换：使用洪泛法，向自治系统内所有路由器发送信息，即路由器通过输出端口向所有相邻的路由器发送信息，而每一个相邻路由器又再次将此信息发往其所有的相邻路由器。使用了广播的方式。</span></p></li><li><p><span>交换的内容：发送的信息就是与本路由器相邻的所有路由器的链路状态（本路由器通过什么链路和哪些路由器相邻，以及该链路的度量/代价——费用、距离、时延、带宽等）。注意，这比RIP中的路由表复杂很多。</span></p></li><li><p><span>交换频率：RIP是固定频率30s交换，但OSPF只有当链路状态发生变化时，该路由器才向所有路由器洪泛发送此信息。</span></p></li><li><p><span>最后，所有路由器都能建立一个链路状态数据库，即全网拓扑图。</span></p></li></ol><p><span>OSPF的其它特点：</span></p><ol start='' ><li><p><span>每隔30min，要刷新一次数据库中的链路状态，确保DD和真实情况一致。</span></p></li><li><p><span>由于一个路由器的链路状态只涉及到与相邻路由器的连通状态，因而与整个互联网的规模并无直接关系。因此当互联网规模很大时，OSPF 协议要比距离向量协议RIP性能高。</span></p></li><li><p><span>OSPF不存在“坏消息传得慢”的问题，其收敛速度很快。</span></p></li></ol><h4 id='2ospf协议的区域'><span>2、OSPF协议的区域</span></h4><p><span>我们知道，OSPF适用于较大的网络，为了使OSPF 能够用于规模很大的网络，OSPF 将一个自治系统再划分为若干个更小的范围，叫做区域，每一个区域都有一个32 位的区域标识符（用点分十进制表示）。自治系统的区域也不能无限制扩大，一个区域内的路由器最好不超过200个。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608115346052.png" referrerpolicy="no-referrer" alt="image-20220608115346052"></p><p><span>图中几个重要的路由器：主干区域的路由器都叫主干路由器，但主干还要连接其他自治系统，所以还有自治系统边界路由器；区域中的路由器分为内部和边界路由器。</span></p><h4 id='3ospf协议的分组报文）格式'><span>3、OSPF协议的分组（报文）格式</span></h4><p><span>和RIP协议使用传输层的UDP协议发送不同，OSPF直接用IP数据报传送。</span></p><p><span>关于OSPF的协议是哪一层：考纲认为是网络层，因为应用了IP数据报；但是实际上OSPF分组是将传输层的数据单元放到分组中，所以也可以认为是传输层协议。考试中认为是网络层协议。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608135154951.png" referrerpolicy="no-referrer" alt="image-20220608135154951"></p><h4 id='4链路状态路由算法'><span>4、链路状态路由算法</span></h4><p><span>初始状态下：</span></p><ol start='' ><li><p><span>每个路由器发现它的邻居结点【每隔10秒发送HELLO问候分组】，并了解邻居节点的网络地址。</span></p></li><li><p><span>设置到它的每个邻居的成本度量metric。</span></p></li><li><p><span>构造【数据库描述分组，也称DD分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</span></p></li><li><p><span>如果DD分组中的摘要自己都有，则邻站不做处理；如果有没有的或者是更新的，则发送【LSR链路状态请求分组】请求自己没有的和比自己更新的信息。</span></p></li><li><p><span>收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新。</span></p></li><li><p><span>更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认。</span></p></li></ol><p><span>当某个路由器的链路状态发生变化，实际上就是重复上面的第5、6条：</span></p><ol start='' ><li><p><span>该路由器泛洪发送【LSU链路状态更新分组】进行更新。</span></p></li><li><p><span>更新完毕后，其他站返回一个【LSAck链路状态确认分组】进行确认。</span></p></li><li><p><span>使用Dijkstra算法，根据自己的链路状态数据库构造到其他节点间的最短路径。</span></p></li></ol><h3 id='4-44-egpbgp协议'><span>4-4.4 EGP：BGP协议</span></h3><h4 id='1bgp协议'><span>1、BGP协议</span></h4><p><span>OSPF、RIP协议是用于一个AS之中的，即IGP；而BGP是用于AS之间的，是EGP。一般而言，常用的是BGP-4协议。实际上，AS虽然包含了很多子网，但仍然可以被看做更大网络的一部分。BGP协议中，每个AS系统就被视作IGP中的子网，交换的内容也是以AS为单位。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608185107317.png" referrerpolicy="no-referrer" alt="image-20220608185107317"></p><p><span>下面来解释BGP协议的技术细节：</span></p><ol start='' ><li><p><span>和谁交换：与其他AS的邻站BGP发言人交换信息。所谓BGP发言人，可以参考上图，实际上就是两个AS之间互联的路由器。</span></p></li><li><p><span>交换的内容：</span></p><ul><li><p><span>交换关于网络可达性的信息，即要到达某个网络所要经过的一系列AS。</span></p></li><li><p><span>当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就会根据所采用的策略，从收到的路由信息中找出到达各AS的较好路由。</span></p></li></ul></li><li><p><span>交换频率：发生变化时，只更新有变化的部分。</span></p></li><li><p><span>由于因特网规模特别大，一味追求如同RIP和OSPF的“最佳路径”成本过高，所以一般来说系统只追求“较好”而非“最好”。</span></p></li></ol><p><span>BGP协议有以下特点：</span></p><ul><li><p><span>BGP 支持CIDR，因此BGP 的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。</span></p></li><li><p><span>在BGP 刚刚运行时，BGP 的邻站是交换整个的BGP 路由表。但以后只需要在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。</span></p></li></ul><h4 id='2bgp协议交换信息的过程'><span>2、BGP协议交换信息的过程</span></h4><p><span>我们知道，每个AS实际上都可能采取不同的内部协议，所以BGP发言人还要清楚在相邻的AS内要经过什么路径前进（即完整的路径）。所以，BGP协议中交换的信息就是路径向量。举例如下：</span></p><p><img src="计算机网络学习笔记.assets/image-20220608191431491.png" alt="image-20220608191431491" style="zoom:67%;" /></p><ul><li><p><span>AS2的BGP发言人通知主干网AS1的BGP发言人：可经由AS2到达网络N1、N2、N3和N4。</span></p></li><li><p><span>另外，主干网还可发出通知：要到达网络N5、N6 和N7，可沿路径（AS1，AS3）。</span></p></li></ul><h4 id='3bgp协议的分组报文）格式'><span>3、BGP协议的分组（报文）格式</span></h4><p><span>如果一个BGP发言人要与其他AS中的BGP发言人交换路由信息，就要先建立TCP连接，即通过TCP传送，然后在此连接上交换BGP报文以建立BGP会话，利用BGP会话交换路由信息。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608191827918.png" referrerpolicy="no-referrer" alt="image-20220608191827918"></p><p><span>注意，BGP报文之所以选择TCP而非UDP（RIP规模较小，是UDP），是为了在长距离的传输过程中保持高度可靠性。</span></p><h4 id='4bgp-4协议的四种报文'><span>4、BGP-4协议的四种报文</span></h4><ul><li><p><span>OPEN（打开）报文：用来与相邻的另一个BGP发言人建立关系，并认证发送方。</span></p></li><li><p><span>UPDATE（更新）报文：通告新路径或撤销原路径。</span></p></li><li><p><span>KEEPALIVE（保活）报文：很长时间都无UPDATE时，周期性证实邻站的连通性；也作为OPEN的确认。</span></p></li><li><p><span>NOTIFICATION（通知）报文：报告先前报文的差错；也被用于关闭连接。</span></p></li></ul><h3 id='4-45-三种路由协议的比较'><span>4-4.5 三种路由协议的比较</span></h3><ul><li><p><span>RIP是一种分布式的基于距离向量的内部网关路由选择协议，通过广播UDP报文来交换路由信息。</span></p></li><li><p><span>OSPF是一个内部网关协议，要交换的信息量较大，应使报文的长度尽量短，所以不使用传输层协议（如UDP或TCP），而是直接采用IP数据报。须注意的是，OSPF选择“代价最低”的路径，这里的“代价”可以是跳数，也可以是时间等。</span></p></li><li><p><span>BGP是一个外部网关协议，在不同的自治系统之间交换路由信息，由于网络环境复杂，需要保证可靠传输，所以采用TCP。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220608212900555.png" referrerpolicy="no-referrer" alt="image-20220608212900555"></p><p><span>另外，考纲认为，RIP、BGP是应用层协议（分别是UDP数据报和TCP数据报），而OSPF是网络层协议（IP数据报）。</span></p><h2 id='4-5-ip组播与igmp协议'><span>4-5 IP组播与IGMP协议</span></h2><h3 id='4-51-ip组播'><span>4-5.1 IP组播</span></h3><h4 id='1ip数据报的传输方式'><span>1、IP数据报的传输方式</span></h4><p><span>IP数据报在网络中有3种传输方式，分别是：单播、广播和组播（多播）。</span></p><ol start='' ><li><p><span>单播：</span></p><ul><li><p><span>用于发送数据包到单个目的地，且每发送一份单播报文都使用一个单播IP地址作为目的地址。是点对点传输方式。单播IP地址的例子如每个主机的IP地址。</span></p></li><li><p><span>在发送者和每一接收者之间需要单独的数据信道。</span></p></li></ul></li><li><p><span>广播：</span></p><ul><li><p><span>是指发送数据包到同一广播域或子网内的所有设备的一种数据传输方式，是点对多点传输方式。发送端的地址是单个IP地址，但目的地址是全1的广播地址。</span></p></li><li><p><span>实际上，广播和多播原理相同，只是接收对象是所有主机。</span></p></li></ul></li><li><p><span>组播：</span></p><ul><li><p><span>当网络中的某些用户需要特定数据时，组播数据发送者仅发送一次数据，借助组播路由协议为组播数据包建立组播分发树，被传递的数据到达距离用户端尽可能近的节点后才开始复制和分发，是点对多点传输方式。</span></p></li><li><p><span>简单来说，组播就是可以选择发送对象的广播。</span></p></li><li><p><span>组播提高了数据传送效率。减少了主干网出现拥塞的可能性。组播组中的主机可以是在同一</span>
<span>个物理网络，也可以来自不同的物理网络（注意，需要组播路由器的支持）。</span></p></li></ul></li></ol><p><img src="计算机网络学习笔记.assets/image-20220608215326125.png" alt="image-20220608215326125" style="zoom:67%;" /><img src="计算机网络学习笔记.assets/image-20220608215259628.png" alt="image-20220608215259628" style="zoom:67%;" /></p><h4 id='2ip组播地址'><span>2、IP组播地址</span></h4><p><span>IP组播地址让源设备能够将分组发送给一组设备，属于多播组的设备将被分配一个组播组IP地址（一群共同需求主机的相同标识）。</span></p><p><span>组播地址范围为224.0.0.0～239.255.255.255（D类地址），一个D类地址表示一个组播组。只能用作分组的目标地址。源地址总是为单播地址（不论广播、多播还是单播）。</span></p><ol start='' ><li><p><span>组播数据报使用UDP，是“尽最大努力交付”，不提供可靠交付。</span></p></li><li><p><span>组播IP地址是分配的，而非早就有的。</span></p></li><li><p><span>对组播数据报不产生ICMP差错报文。</span></p></li><li><p><span>并非所有D类地址都可以作为组播地址，因为部分地址被指排位永久组播地址。</span></p></li></ol><h4 id='3硬件组播'><span>3、硬件组播</span></h4><p><span>组播有两种分类：一种是在因特网范围内的组播，还有一种是在局域网范围内的硬件组播，如下图所示。其中，硬件组播较为简单，没有特定协议；但因特网范围内的组播较为复杂，会衍生出IGMP协议和组播路由选择协议。</span></p><p><img src="计算机网络学习笔记.assets/image-20220608220919357.png" referrerpolicy="no-referrer" alt="image-20220608220919357"></p><p><span>同单播地址一样，组播IP地址也需要相应的组播MAC地址在本地网络中实际传送帧。</span></p><ul><li><p><span>组播MAC地址以十六进制值01-00-5E打头，余下的6个十六进制位是根据IP组播组地址的最后23位转换得到的。</span></p></li><li><p><span>TCP/IP 协议使用的以太网多播地址的范围是从01-00-5E-00-00-00到01-00-5E-7F-FF-FF（最后是23位，所以最大是7F而非FF）。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220608221342057.png" referrerpolicy="no-referrer" alt="image-20220608221342057"></p><p><span>看D类地址和以太网地址（MAC地址）的映射可以看到，最后23位有可能相同。收到多播数据报的主机，还要在IP 层利用软件进行过滤，把不是本主机要接收的数据报丢弃。过滤的依据便是不使用的那5位。</span></p><h3 id='4-52-igmp协议与组播路由选择协议'><span>4-5.2 IGMP协议与组播路由选择协议</span></h3><h4 id='1igmp协议简介'><span>1、IGMP协议简介</span></h4><p><span>IGMP协议，即网际组管理协议，是因特网范围内组播用到的协议。这里需要与ICMP（网际控制报文协议）区分开，但它们都是面向无连接（注意，IP数据报都是面向无连接）的</span><strong><span>网络层协议</span></strong><span>。</span></p><p><span>ICMP协议支持主机或路由器，报文类型共有两种：差错（或异常）报告报文以及网络探询报文。</span></p><p><span>用途：IGMP协议让路由器知道本局域网上是否有主机（的进程）参加或退出了某个组播组。针对于单个路由器。</span></p><p><img src="计算机网络学习笔记.assets/image-20220609215321155.png" referrerpolicy="no-referrer" alt="image-20220609215321155"></p><ul><li><p><span>如图，4台路由器与多播组相连，每台路由器通过IGMP协议知道自己连接的局域网内是否有这个多播组的成员，并可以知道成员的增删。</span></p></li><li><p><span>注意，路由器并不能通过IGMP协议知道具体哪些成员在组播组中，只能知道是否有成员存在、增加或退出。另外，组播路由器知道的成员关系只是所连接的局域网中有无组播组的成员，具体为多少、谁是成员都不知道。</span></p></li></ul><p><span>IGMP工作有两个阶段：</span></p><ol start='' ><li><p><span>第一阶段：建立阶段</span></p><ul><li><p><span>某主机要加入组播组时，该主机向组播组的组播地址发送一个IGMP报文，声明自己要称为该组的成员。</span></p></li><li><p><span>本地组播路由器收到IGMP报文后，要利用组播路由选择协议把这组成员关系发给因特网上的其他组播路由器。</span></p></li></ul></li><li><p><span>第二阶段：维护阶段。本地组播路由器周期性探询本地局域网上的主机，以便知道这些主机是否还是组播组的成员。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </span></p><ul><li><p><span>只要有一个主机对某个组响应，那么组播路由器就认为这个组是活跃的；</span></p></li><li><p><span>如果经过几次探询后没有一个主机响应，组播路由器就认为本网络上的没有此组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器。</span></p></li></ul></li></ol><h4 id='2组播路由选择协议'><span>2、组播路由选择协议</span></h4><p><span>用途：一个组播路由器，应用该协议可以获取因特网中的路由器之间的最小代价路径。由于这是路由选择协议，实际功能和BGP、RIP、OSPF等是类似的。简单来说，组播路由选择协议目的是找出以源主机为根节点的组播转发树（如下图所示）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220610084230795.png" alt="image-20220610084230795" style="zoom:50%;" /></p><p><span>使用构造树而非图，可以避免在路由器之间兜圈子（避免成环）。</span></p><p><span>不同的多播组，有着不同的多播转发树；即便是同一个多播组，对不同的源点，也会有不同的多播转发树。</span></p><p><span>组播路由选择协议常使用的三种算法：</span></p><ul><li><p><span>基于链路状态的路由选择；</span></p></li><li><p><span>基于距离向量的路由选择；</span></p></li><li><p><span>协议无关、可建立在任何协议上的组播（按照每个组的主机距离，分为密集型和稀疏型）。</span></p></li></ul><h2 id='4-6-网络层相关应用'><span>4-6 网络层相关应用</span></h2><h3 id='4-61-移动ip'><span>4-6.1 移动IP</span></h3><h4 id='1相关概念'><span>1、相关概念</span></h4><p><span>移动IP技术是移动结点(计算机/服务器等)以固定的网络IP地址，实现跨越不同网段的漫游功能，并保证了基于网络IP的网络权限在漫游过程中不发生任何改变。</span></p><ul><li><p><span>移动结点：具有永久IP地址的移动设备。</span></p></li><li><p><span>归属代理（本地代理）：一个移动结点的永久“居所”称为归属网络，在归属网络中代表移动节点执行移动管理功能的实体叫做归属代理。</span></p></li><li><p><span>永久地址（归属地址/主地址）：移动站点在归属网络中的原始地址。</span></p></li><li><p><span>外部代理（外地代理）：在外部网络中帮助移动节点完成移动管理功能的实体称为外部代理。</span></p></li><li><p><span>转交地址（辅地址）：可以是外部代理的地址，或动态配置的一个地址，总之是给予申请主机的一个地址。</span></p></li></ul><h4 id='2移动ip的分配'><span>2、移动IP的分配</span></h4><p><span>设想这样的场景：一直在归属地的主机A，进入到了外部网络。</span></p><ol start='' ><li><p><span>A获得外部代理的转交地址（外部代理广播报文）。有两种获得方式：</span></p><ul><li><p><span>被动获得：外部代理在外部网络内广播ICMP报文，包含转交地址，A收到后就知道外部代理所在网络与地址；</span></p></li><li><p><span>主动获得：A主动发送一个广播报文获得外部代理的地址。</span></p></li></ul></li><li><p><span>获得转交地址后，移动节点通过外部代理发送注册报文给归属代理（包含永久地址&amp;转交地址）。</span></p></li><li><p><span>归属代理接收请求，并将移动节点的永久地址和转交地址绑定（以后到达该归属代理的数据报且要发往移动节点的数据报将被封装，并以隧道方式发给转交地址），并返回一注册响应报文。</span></p></li><li><p><span>外部代理接收注册响应，并转发给移动节点。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220611222346139.png" referrerpolicy="no-referrer" alt="image-20220611222346139"></p><p><span>另外的场景：A移动到了下一个网络。</span></p><ol start='' ><li><p><span>在新外部代理登记注册一个转交地址。</span></p></li><li><p><span>新外部代理给本地代理发送新的转交地址（覆盖旧的）。</span></p></li><li><p><span>跟上面的3、4相同。</span></p></li></ol><p><span>A回到了归属网络的场景：</span></p><ol start='' ><li><p><span>A向本地代理注销转交地址。</span></p></li><li><p><span>按原始方式通信。</span></p></li></ol><h3 id='4-62-路由器'><span>4-6.2 路由器</span></h3><h4 id='1路由器的介绍'><span>1、路由器的介绍</span></h4><p><span>路由器（Router）是一种具有多个输入端口和多个输出端口的专用计算机，其任务是转发分组。为完成该任务，路由器有两个主要功能：路由选择和分组转发。下图所示是路由器的结构图：</span></p><p><img src="计算机网络学习笔记.assets/image-20220612182048838.png" alt="image-20220612182048838" style="zoom:67%;" /></p><ol start='' ><li><p><span>上部为路由选择部分，也可称之为控制部分。</span></p><ul><li><p><span>路由选择处理机会根据路由选择协议（OSPF、BGP、RIP）构造路由表。</span></p></li><li><p><span>不断交换信息，更新和维护路由表。</span></p></li></ul></li><li><p><span>下部为分组转发部分，包含3个部分：输入、输出端口，以及交换结构。</span></p><ul><li><p><span>交换结构：根据转发表（根据路由表得来，所以依赖于上层）对分组进行转发。注意，这里的转发是指把数据从输入端口从某个输出端口进行转发，在路由器内部进行；路由选择是在宏观的网络上进行。</span></p></li><li><p><span>很多非数据分组是不会转发的。若收到RIP/OSPF分组等，则把分组送往路由选择处理机；若收到数据分组，则查找转发表并输出。</span></p></li><li><p><span>若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。所以，路由器中的输入或输出队列产生溢出是造成分组丢失的重要原因。</span></p></li><li><p><span>输入端口对线路上收到的分组的处理：</span></p><p><img src="计算机网络学习笔记.assets/image-20220612182806330.png" alt="image-20220612182806330" style="zoom: 67%;" /></p></li><li><p><span>输出端口将交换结构传送来的分组发送到线路：</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220612182931772.png" alt="image-20220612182931772" style="zoom: 67%;" /></p></li></ol><h4 id='2路由表和路由转发'><span>2、路由表和路由转发</span></h4><p><span>路由表是根据路由选择算法得出的，主要用途是路由选择，总用软件来实现。该表包含以下内容：目的网络IP地址；子网掩码；下一跳IP地址；接口或端口。</span></p><p><span>转发表由路由表得来，可以用软件实现，也可以用特殊的硬件来实现。转发表必须包含完成转发功能所必需的信息，在转发表的每一行必须包含从要到达的目的网络到输出端口和某些MAC地址信息的映射。</span></p><h1 id='chapter-5-传输层'><span>Chapter 5 传输层</span></h1><p><img src="计算机网络学习笔记.assets/image-20220612184552083.png" alt="image-20220612184552083" style="zoom:50%;" /></p><h2 id='5-1-概述和功能'><span>5-1 概述和功能</span></h2><h4 id='1概述-2'><span>1、概述</span></h4><p><span>我们知道，网络层完成了主机之间的逻辑通信（物理通信是更低层完成的）。但是，所谓的通信都是指进程之间的通信，而非真正的“主机”本身。所以，主机需要传输层提供进程和进程之间的逻辑通信。（所以，只有端系统的主机才有传输层和应用层，中间的设备最高层是网络层）</span></p><p><span>传输层使用网络层的服务为应用层提供通信服务，其传输单元称为报文段。传输层功能有：</span></p><ol start='' ><li><p><span>网络层提供主机之间的逻辑通信，传输层提供进程之间的逻辑通信；</span></p></li><li><p><span>复用和分用；</span></p></li><li><p><span>传输层对收到的报文进行差错检测；</span></p></li><li><p><span>传输层的两种协议。</span></p></li></ol><h4 id='2两个重要协议'><span>2、两个重要协议</span></h4><figure class='table-figure'><table><thead><tr><th><span>面向连接的传输控制协议TCP</span></th><th><span>无连接的用户数据报协议UDP</span></th></tr></thead><tbody><tr><td><span>传送数据之前必须建立连接，数据传送结束后要释放连接。不提供广播或多播服务。</span></td><td><span>传送数据之前不需要建立连接，收到UDP报文后也不需要给出任何确认。</span></td></tr><tr><td><span>由于TCP要提供可靠的面向连接的传输服务，因此不可避免增加了许多开销：确认、流量控制、计时器及连接管理等。</span></td><td><span>没有对应的服务和开销，方便快捷。</span></td></tr><tr><td><span>可靠，面向连接，时延大，适用于大文件。</span></td><td><span>不可靠，无连接，时延小，适用于小文件。</span></td></tr></tbody></table></figure><h4 id='3传输层的寻址与端口'><span>3、传输层的寻址与端口</span></h4><p><span>先区分复用和分用的概念：</span></p><ul><li><p><span>复用：发送数据时，所有进程都可以使用传输层再传输到网络层。</span></p></li><li><p><span>分用：接收数据时，传输层从网络层收到数据后会交付指明的应用进程。</span></p></li></ul><p><span>端口：</span></p><ul><li><p><span>和路由器的物理端口/硬件端口不同，此处的端口是指逻辑端口/软件端口。端口即传输层的SAP，标识主机中的应用进程。</span></p></li><li><p><span>此处的端口号只有本地意义，只用来标注本机的进程。</span></p></li><li><p><span>端口号长度为16bit，能表示65536个不同的端口号。</span></p></li><li><p><span>端口号有客户端端口号、服务器端口号，后者又分成熟知端口号和登记端口号。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220612190030935.png" alt="image-20220612190030935" style="zoom:67%;" /></p><p><span>下面给出一些很重要的熟知端口号：</span></p><p><img src="计算机网络学习笔记.assets/image-20220612191149903.png" referrerpolicy="no-referrer" alt="image-20220612191149903"></p><p><span>另外，在网络中采用发送方和接收方的套接字组合来识别端点，套接字唯一标识了网络中的一个主机和它上面的一个进程。所谓套接字Socket，就是主机IP地址和进程端口号的结合。</span></p><div contenteditable="false" spellcheck="false" class="mathjax-block md-end-block md-math-block md-rawblock" id="mathjax-n2605" cid="n2605" mdtype="math_block" data-math-tag-before="0" data-math-tag-after="0" data-math-labels="[]"><div class="md-rawblock-container md-math-container" tabindex="-1"><mjx-container class="MathJax" jax="SVG" display="true" style="position: relative;"><svg xmlns="http://www.w3.org/2000/svg" width="41.783ex" height="2.149ex" role="img" focusable="false" viewBox="0 -750 18468.1 950" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" style="vertical-align: -0.452ex;"><defs><path id="MJX-9-TEX-I-1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"></path><path id="MJX-9-TEX-I-1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJX-9-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path><path id="MJX-9-TEX-I-1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"></path><path id="MJX-9-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-9-TEX-I-1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path><path id="MJX-9-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-9-TEX-I-1D43C" d="M43 1Q26 1 26 10Q26 12 29 24Q34 43 39 45Q42 46 54 46H60Q120 46 136 53Q137 53 138 54Q143 56 149 77T198 273Q210 318 216 344Q286 624 286 626Q284 630 284 631Q274 637 213 637H193Q184 643 189 662Q193 677 195 680T209 683H213Q285 681 359 681Q481 681 487 683H497Q504 676 504 672T501 655T494 639Q491 637 471 637Q440 637 407 634Q393 631 388 623Q381 609 337 432Q326 385 315 341Q245 65 245 59Q245 52 255 50T307 46H339Q345 38 345 37T342 19Q338 6 332 0H316Q279 2 179 2Q143 2 113 2T65 2T43 1Z"></path><path id="MJX-9-TEX-I-1D443" d="M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">套</text></g><g data-mml-node="mtext" transform="translate(987.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">接</text></g><g data-mml-node="mtext" transform="translate(1975.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">字</text></g><g data-mml-node="mi" transform="translate(2963.3,0)"><use data-c="1D446" xlink:href="#MJX-9-TEX-I-1D446"></use></g><g data-mml-node="mi" transform="translate(3608.3,0)"><use data-c="1D45C" xlink:href="#MJX-9-TEX-I-1D45C"></use></g><g data-mml-node="mi" transform="translate(4093.3,0)"><use data-c="1D450" xlink:href="#MJX-9-TEX-I-1D450"></use></g><g data-mml-node="mi" transform="translate(4526.3,0)"><use data-c="1D458" xlink:href="#MJX-9-TEX-I-1D458"></use></g><g data-mml-node="mi" transform="translate(5047.3,0)"><use data-c="1D452" xlink:href="#MJX-9-TEX-I-1D452"></use></g><g data-mml-node="mi" transform="translate(5513.3,0)"><use data-c="1D461" xlink:href="#MJX-9-TEX-I-1D461"></use></g><g data-mml-node="mo" transform="translate(6152.1,0)"><use data-c="3D" xlink:href="#MJX-9-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(7207.9,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">（</text></g><g data-mml-node="mtext" transform="translate(8323.2,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">主</text></g><g data-mml-node="mtext" transform="translate(9310.9,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">机</text></g><g data-mml-node="mi" transform="translate(10298.7,0)"><use data-c="1D43C" xlink:href="#MJX-9-TEX-I-1D43C"></use></g><g data-mml-node="mi" transform="translate(10802.7,0)"><use data-c="1D443" xlink:href="#MJX-9-TEX-I-1D443"></use></g><g data-mml-node="mtext" transform="translate(11553.7,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">地</text></g><g data-mml-node="mtext" transform="translate(12541.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">址</text></g><g data-mml-node="mi" transform="translate(13529.2,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">，</text></g><g data-mml-node="mtext" transform="translate(14517,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">端</text></g><g data-mml-node="mtext" transform="translate(15504.8,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">口</text></g><g data-mml-node="mtext" transform="translate(16492.5,0)"><text data-variant="normal" transform="scale(1,-1)" font-size="987.9px" font-family="serif">号</text></g><g data-mml-node="mi" transform="translate(17480.3,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="987.9px" font-family="serif" font-style="italic">）</text></g></g></g></svg><mjx-assistive-mml unselectable="on" display="block"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>套</mtext><mtext>接</mtext><mtext>字</mtext><mi>S</mi><mi>o</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mo>=</mo><mi>（</mi><mtext>主</mtext><mtext>机</mtext><mi>I</mi><mi>P</mi><mtext>地</mtext><mtext>址</mtext><mi>，</mi><mtext>端</mtext><mtext>口</mtext><mtext>号</mtext><mi>）</mi></math></mjx-assistive-mml></mjx-container></div></div><h2 id='5-2-传输层的协议'><span>5-2 传输层的协议</span></h2><h3 id='5-21-udp协议'><span>5-2.1 UDP协议</span></h3><h4 id='1概述-3'><span>1、概述</span></h4><p><span>UDP（用户数据报协议）只在IP数据报服务之上增加了很少功能，即复用分用和差错检测功能。</span></p><p><span>UDP的主要特点：</span></p><ol start='' ><li><p><span>无连接，减少开销和发送数据之前的时延。</span></p></li><li><p><span>使用最大努力交付，不保证可靠交付（可靠传输由应用层保证）。</span></p></li><li><p><span>面向报文，对应用层的报文不作合并和拆分，应用层给UDP多长的报文，UDP就照样发送，即一次发一个完整报文。这样可以提高传输效率，适合一次性传输少量数据的网络应用。</span></p></li><li><p><span>无拥塞控制，适合很多实时应用（如视频电话，允许部分数据丢失但要求数据是实时的）。</span></p></li><li><p><span>首部开销小，8B，而TCP需要20B。</span></p></li><li><p><span>分用（接收数据报）时，若找不到对应的目的端口号，就丢弃报文，并给发送方发送ICMP“端口不可达”差错报告报文。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220612192547100.png" alt="image-20220612192547100" style="zoom:67%;" /></p><p><span>UDP首部共有8B，格式如下：</span></p><p><img src="计算机网络学习笔记.assets/image-20220612215043298.png" alt="image-20220612215043298" style="zoom:80%;" /></p><p><span>其中UDP长度指的是整个UDP数据报的长度，单位为1B，数据部分为总长减去8B。</span></p><h4 id='2udp校验和'><span>2、UDP校验和</span></h4><p><span>虽然UDP首部只包含源/目的端口号、总长和检验和，但实际上，在计算校验和的时候还会出现一个字段，即“伪首部”。</span></p><ul><li><p><span>伪首部只有在发送端和接收端计算检验和、检查报文是否出错时才出现，不向下传送也不向上递交。</span></p></li><li><p><span>伪首部的“伪”是指模仿了IP数据报的首部，格式与IP数据报相同。</span></p></li><li><p><span>“0”部分约定全为0，“17”是IP数据报首部协议字段中代表UDP的数字，这两部分是不变的。</span></p></li><li><p><span>伪首部中的UDP长度和UDP首部中的长度一样，都是不包含伪首部的总长度。</span></p></li></ul><p><img src="计算机网络学习笔记.assets/image-20220613090308619.png" alt="image-20220613090308619" style="zoom:18%;" /></p><p><span>计算校验和的过程：</span></p><p><img src="计算机网络学习笔记.assets/image-20220613090931567.png" alt="image-20220613090931567" style="zoom:17%;" /></p><blockquote><p><span>所谓二进制反码求和：先正常相加，最高位的进位补到最低位去，最后结果取反码。</span></p><p><span>在发送端计算校验和：</span></p><ol start='' ><li><p><span>填上伪首部；</span></p></li><li><p><span>使用全0填充原首部的第四个（即检验和）字段；</span></p></li><li><p><span>全0填充数据部分（UDP数据报看成许多4B的字串接起来，直到数据长度是4B的倍数为止）。</span></p></li><li><p><span>伪首部+首部+数据部分采用二进制反码求和，此处校验字段是刚填充的0。</span></p></li><li><p><span>把和求反码填入检验和字段</span></p></li><li><p><span>去掉伪首部，发送</span></p></li></ol><p><span>在接收端计算校验和：</span></p><ol start='' ><li><p><span>填上伪首部；</span></p></li><li><p><span>伪首部+首部+数据部分采用二进制反码求和；注意，此处校验字段不是全0，而是发送端发送的数据。</span></p></li><li><p><span>结果全为1则无差错，否则丢弃数据报，或者交给有差错控制功能的应用层并附上出差错的警告。</span></p></li></ol></blockquote><h3 id='5-22-tcp协议'><span>5-2.2 TCP协议</span></h3><h4 id='1tcp协议的特点'><span>1、TCP协议的特点</span></h4><ol start='' ><li><p><span>TCP是面向连接（虚连接）的传输层协议。</span></p></li><li><p><span>每一条TCP连接只能有两个端点，每一条TCP连接只能是点对点的。</span></p></li><li><p><span>TCP提供可靠有序，不丢不重的服务。</span></p></li><li><p><span>TCP提供全双工通信。</span></p><ul><li><p><span>发送缓存：准备发送但还未发送的数据、已发送但尚未收到确认的数据；</span></p></li><li><p><span>接收缓存：按序到达但尚未被接受进程读取的数据、不按序到达的数据。</span></p></li></ul></li><li><p><span>UDP面向报文，而TCP面向字节流。所谓流：流入到进程或从进程流出的字节序列。TCP把应用程序交下来的数据看成仅仅是一连串的无结构的字节流。</span></p></li></ol><h4 id='2tcp报文段'><span>2、TCP报文段</span></h4><p><span>TCP协议中，要传送的字节流中的每一个字节都按顺序编号，然后把要发送的数据装入缓存，再由TCP头带领这些数据发送。接收方收到数据后回复确认，发送方收到确认后继续发送。</span></p><p><img src="计算机网络学习笔记.assets/image-20220613100652668.png" alt="image-20220613100652668" style="zoom:67%;" /></p><p><span>先看TCP报文段的首部，长度为20B，其内容如下：</span></p><p><img src="计算机网络学习笔记.assets/image-20220613100048081.png" alt="image-20220613100048081" style="zoom:22%;" /></p><ol start='' ><li><p><span>序号：应用在发送的报文中，本字段表示本报文段所发送数据的第一个字节的序号。</span></p></li><li><p><span>确认号：应用在确认报文中，期望收到对方下一个报文段的第一个数据字节的序号。若确认号为N，则证明到序号N-1为止的所有数据都已正确收到。</span></p></li><li><p><span>数据偏移（首部长度）：TCP首部可能有长度可变的选项字段以及填充字段，所以需要知道首部长度以知道数据部分从哪里开始，以4B为单位。</span></p></li><li><p><span>填充字段：填充全0，让首部变为4B的整数倍。</span></p></li><li><p><span>在保留字段后是六个控制位：</span></p><ol start='' ><li><p><span>URG：即urgent，紧急位，用于发送方的发送；URG=1时，此报文段中有高优先级的数据，应尽快传送，不用在缓存里排队，配合紧急指针字段使用。</span></p></li><li><p><span>ACK：即Acknowledge character，确认位，用于接收方发的确认报文；ACK=1时，确认号才有效，在连接建立后所有传送的报文段都必须把ACK置为1。</span></p></li><li><p><span>PSH：即push，推送位，用于接收方的接收；PSH=1时，接收方尽快交付接收应用进程，不再等到缓存填满再向上交付。(几乎不考)</span></p></li><li><p><span>RST：即reset，复位：RST=1时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立传输链接。（几乎不考）</span></p></li><li><p><span>SYN：即sync，同步位：SYN=1时，表明是一个连接请求/连接接受报文。</span></p></li><li><p><span>FIN：即Final，终止位：FIN=1时，表明此报文段发送方数据已发完，要求释放连接。</span></p></li></ol></li><li><p><span>窗口：指的是发送本报文段的一方的接收窗口，即现在允许对方发送的数据量。如：B要给A发送文件，A给B发送了一个报文，其窗口字段辨明了A的接收窗口最多能是多大；如果A发送的报文中，确认号是701，窗口是1000，那么下次B将给A发送的数据最大序号是1700。</span></p></li><li><p><span>检验和：和UDP相同，检验首部+数据，检验时要加上12B伪首部，协议字段为6（UDP是17）。</span></p></li><li><p><span>紧急指针：URG=1时才有意义，指出本报文段中紧急数据的字节数（从数据部分的第一字节开始算），单位是1B。</span></p></li><li><p><span>选项：最大报文段长度MSS、窗口扩大、时间戳、选择确认…等等。</span></p></li></ol><h4 id='3tcp连接建立与数据传输'><span>3、TCP连接建立与数据传输</span></h4><p><span>TCP的连接传输有三个阶段：</span></p><p><img src="计算机网络学习笔记.assets/image-20220613155457563.png" referrerpolicy="no-referrer" alt="image-20220613155457563"></p><p><span>TCP连接的建立采用客户服务器方式，其中主动发起连接建立的应用进程叫做客户，而被动等待连接建立的应用进程叫服务器。TCP的连接是三次握手。</span></p><p><span>重点考察三次握手中的报文段的首部字段。</span></p><p><span>假设客户想和服务器（不在同一主机）进程建立一条连接。客户应用进程首先通知客户TCP，请求建立一个与服务器上某个进程之间的连接，客户中的TCP会用以下步骤与服务器中的TCP建立一条TCP连接：</span></p><p><img src="计算机网络学习笔记.assets/image-20220613155826004.png" alt="image-20220613155826004" style="zoom:15%;" /></p><ol start='' ><li><p><span>A发送</span><strong><span>连接请求报文段</span></strong><span>，不包含应用层数据；同步为SYN=1，序号seq=x（随机）。</span></p></li><li><p><span>此时B已经收到了A发送的连接请求报文段。B为该TCP连接分配缓存和变量，并向A返回</span><strong><span>确认/连接接受报文段</span></strong><span>表明允许连接，不包含应用层数据。SYN=1，确认位ACK=1，seq=y（随机），确认号ack=x+1（序号加1）。</span></p></li><li><p><span>A收到了B的确认报文，为该TCP连接分配缓存和变量，并向B返回最后的确认报文，可以携带应用层数据。SYN=0，ACK=1，seq=x+1，ack=y+1。</span></p></li></ol><p><em><span>SYN洪泛攻击：利用三次握手发动的攻击方式，了解即可。</span></em></p><blockquote><p><em><span>攻击者发送TCP SYN（三次握手中的第一个数据包），而当服务器返回ACK后，该攻击者就不对其进行再确认，那这个TCP连接就处于挂起状态，也就是所谓的半连接状态。</span></em></p><p><em><span>服务器未检测到第三次确认的话，会重复发送ACK给攻击者，更加会浪费服务器的资源。</span></em></p><p><em><span>攻击者对服务器发送大量的SYN数据包，由于每一个都没法完成三次握手，所以在服务器上，这些TCP连接会因为挂起状态而消耗CPU和内存，最后无法为正常用户提供服务。</span></em></p><p><em><span>应对方式：SYN Cookie。</span></em></p></blockquote><h4 id='4tcp的连接释放'><span>4、TCP的连接释放</span></h4><p><span>与连接不同的是，释放连接需要4次握手。参与一条TCP连接的两个进程中的任何一个都能终止该连接，连接结束后，主机中的资源（缓存和变量）将被释放。</span></p><p><img src="计算机网络学习笔记.assets/image-20220613161620477.png" alt="image-20220613161620477" style="zoom:15%;" /></p><ol start='' ><li><p><span>A发送</span><strong><span>连接释放报文段</span></strong><span>，停止发送数据，主动关闭TCP连接。结束位FIN=1，seq=u。</span></p></li><li><p><span>B回送一个</span><strong><span>确认报文段</span></strong><span>，A到B的连接就释放了，但由于是全双工，整体处于半关闭状态。ACK=1，seq=v，ack=u+1。</span></p></li><li><p><span>B发完自己需要发送的数据后，发出</span><strong><span>连接释放报文段</span></strong><span>，主动关闭TCP连接。FIN=1，ACK=1，seq=w，ack=u+1。</span></p></li><li><p><span>A发送</span><strong><span>确认报文段</span></strong><span>，再等到时间等待计时器设置的2*MSL（最长报文段寿命）后，连接彻底关闭。ACK=1，seq=u+1，ack=w+1。</span></p></li></ol><h4 id='5tcp的可靠传输'><span>5、TCP的可靠传输</span></h4><p><span>本章不作重点（流量控制、拥塞控制重点），供了解用。</span></p><p><span>所谓可靠，就是指，能够保证接收方进程从缓存区读出的字节流与发送方发出的字节流是完全一样的。TCP实现可靠传输的机制有四个：</span></p><ol start='' ><li><p><span>校验：与UDP校验一样，增加伪首部，利用校验和字段。</span></p></li><li><p><span>序号：文件的每个字节占一个序号，序号字段指的是每个TCP报文段数据部分第一个字节的序号。</span></p></li><li><p><span>确认：确认号是期待收到的第一个字节的序号，通过确认可以让发送方继续发送或者重新发送。。确认信息可以被稍待发送，即捎带确认。另外，TCP默认使用累计确认；比如B收到了1/2/3/7/8共五个字节，那么确认号就是4。</span></p></li><li><p><span>重传：这里主要是指超时重传。TCP的发送方在规定的时间内没有收到确认，就要重传已发送的报文段。需要注意的是，和数据链路层不同，TCP采用自适应算法，动态改变重传时间RTTs（加权平均往返时间）。</span></p><blockquote><p><span>冗余ACK：每当比期望序号大的失序报文段到达时，发送一个冗余ACK，指明下一个期待字节的序号。j发送方收到了多个冗余ACK，就认为期望的报文段丢失，进行重传，即快速重传（相对于超时重传而言），举例如：</span></p><p><img src="计算机网络学习笔记.assets/image-20220613164239325.png" alt="image-20220613164239325" style="zoom:67%;" /></p></blockquote></li></ol><p><span>实际上，TCP使用的协议和链路层中差距不大，也是利用滑动窗口等协议（不常用停等，主要用GBN和SR）。</span></p><h4 id='6tcp的流量控制'><span>6、TCP的流量控制</span></h4><p><span>流量控制：让发送方慢点，要让接收方来得及接收。TCP利 用滑动窗口机制实现流量控制。</span></p><p><span>两种窗口：</span></p><ul><li><p><span>rwnd，即接收窗口：接收方根据接受缓存设置的值，并告知给发送方，反映接收方容量。</span></p></li><li><p><span>cwnd，即拥塞窗口：发送方根据自己估算的网络拥塞程度而设置的窗口值，反映网络当前容量。</span></p></li></ul><p><span>实现：在通信过程中，接收方根据自己接收缓存的大小，动态地调整发送方的发送窗口大小rwnd（接收方设置确认报文段的窗口字段来将rwnd通知给发送方），发送方的发送窗口大小是</span><strong><span>接收窗口rwnd和拥塞窗口cwnd的最小值</span></strong><span>（不拥塞时cwnd不考虑）。</span></p><p><span>另外，还可以将rwnd设置为0来拒绝继续发送，即“零窗口通知”。</span></p><ul><li><p><span>正常来说，发送方会一直等待接收方发来非零的rwnd通知，但这个通知报文有可能会丢失，可能造成死锁。</span></p></li><li><p><span>TCP为每一个连接设有一个持续计时器，只要TCP连接的一方收到对方的零窗口通知，就启动持续计时器。若持续计时器设置的时间到期，就发送一个</span><strong><span>零窗口探测报文段</span></strong><span>。接收方收到探测报文段时，给出现在的rwnd值。若接收方给出的rwnd仍然是0，那么发送方就重新设置持续计时器。</span></p></li></ul><h4 id='7tcp的拥塞控制'><span>7、TCP的拥塞控制</span></h4><p><span>出现拥塞：对资源（如带宽等）的需求综合多于可用资源。</span></p><p><span>拥塞是一个全局性的问题，只能从宏观上去调整。所以拥塞控制的思想就是：协调网络上的主机，防止过多数据注入到网络中。</span></p><p><span>为解决拥塞，共有两组四种方法来避免。有以下的默认：</span></p><ol start='' ><li><p><span>数据单方向传送，而另一个方向只传送确认（不考虑捎带确认）；</span></p></li><li><p><span>接收方总是有足够大的缓存空间，发送窗口大小取决于拥塞程度；</span></p></li></ol><p><span>两组四种方法分别是：</span></p><p><span>第一组：慢开始和拥塞避免。</span></p><p><img src="计算机网络学习笔记.assets/image-20220613190954319.png" alt="image-20220613190954319" style="zoom:80%;" /></p><ul><li><p><span>初始cwnd=1，这是指cwnd为一个MSS而非一个字节。</span></p></li><li><p><span>一个传输轮次是指：发送了一批（而非一个）报文段并收到它们的确认的时间，其最短耗时为一个RTT。爱此处，收到了之前发送的所有报文的确认就开始下个轮次。</span></p></li><li><p><span>每个轮次，cwnd *= 2，是指数增长；所谓ssthresh，就是“慢开始门限”。当系统认为cwnd的值较大，就会开始加法增大，每个轮次cwnd += 1，</span></p></li><li><p><span>当检测发现网络拥塞（丢包等）时，cwnd立即降为1，重新开始下一轮。</span></p></li></ul><p><span>通过上面的内容可以看到，所谓“慢开始”就是从一个MSS为cwnd来开始指数增大，不断探查cwnd合适的最大值；拥塞避免就是加法增大。</span></p><p><span>第二组：快重传和快恢复。</span></p><p><img src="计算机网络学习笔记.assets/image-20220613191835417.png" alt="image-20220613191835417" style="zoom: 67%;" /></p><ul><li><p><span>这里的ssthresh，还是“慢开始门限”。第一阶段和第一组方法没有区别。</span></p></li><li><p><span>区别在于：收到3个重复的确认后执行快重传算法（利用TCP的冗余ACK，快速重传）；之后采取“快恢复”，即不直接将cwnd置为零而是乘法减小，即将cwnd /= 2，而后继续加法增大。</span></p></li></ul><p><span>AIMD：可以看到，两组都是秉持“加性增，乘性减”的策略。这就是计算拥塞窗口CWND的基本算法，即窗口增长基本算法AIMD。</span></p><h1 id='chapter-6-应用层'><span>Chapter 6 应用层</span></h1><p><img src="计算机网络学习笔记.assets/image-20220613202107765.png" alt="image-20220613202107765" style="zoom: 40%;" /></p><h2 id='6-1-概述与网络应用模型'><span>6-1 概述与网络应用模型</span></h2><h3 id='6-11-应用层的功能和协议概述'><span>6-1.1 应用层的功能和协议概述</span></h3><p><span>顾名思义，应用层对应用程序的通信提供服务。应用层应当具有以下功能（以及对应协议）：</span></p><ol start='' ><li><p><span>文件传输、访问和管理：FTP</span></p></li><li><p><span>电子邮件：SMTP、POP3</span></p></li><li><p><span>虚拟终端：HTTP</span></p></li><li><p><span>查询服务和远程作业登录：DNS</span></p></li></ol><p><span>应用层的协议应该定义以下内容：</span></p><ol start='' ><li><p><span>应用进程交换的报文类型，是请求还是响应；</span></p></li><li><p><span>各种报文类型的语法。如：报文中的各个字段，及其详细描述。</span></p></li><li><p><span>字段的语义，即包含在字段中的信息的含义。</span></p></li><li><p><span>进程何时、如何发送报文，以及对报文进行响应的规则。</span></p></li></ol><p>&nbsp;</p><h3 id='6-12-网络应用模型'><span>6-1.2 网络应用模型</span></h3><h4 id='1客户服务器cs）模型'><span>1、客户/服务器（C/S）模型</span></h4><p><img src="计算机网络学习笔记.assets/image-20220624213217471.png" alt="image-20220624213217471" style="zoom:15%;" /></p><p><span>在这个模型中，我们认为主机被分为服务器和客户机两大种类。</span></p><p><span>服务器：提供计算服务的设备。永久提供服务，需要具有永久性访问地址/域名而不能随意改变。</span></p><p><span>客户机：请求计算服务的主机。其特点有：</span></p><ol start='' ><li><p><span>与服务器通信，使用服务器提供的服务；</span></p></li><li><p><span>可以间歇性接入网络；</span></p></li><li><p><span>可以使用动态IP地址；</span></p></li><li><p><span>不与其他客户机直接通信。</span></p></li></ol><p><span>应用：Web，文件传输FTP，远程登录，电子邮件。</span></p><h4 id='2对等p2ppeer-to-peer）模型'><span>2、对等（P2P，Peer-to-Peer）模型</span></h4><p><img src="计算机网络学习笔记.assets/image-20220624213540434.png" alt="image-20220624213540434" style="zoom:17%;" /></p><p><span>P2P模型有以下特点或思想：</span></p><ol start='' ><li><p><span>不存在永远在线的服务器，任意端系统/节点之间可以直接通讯；</span></p></li><li><p><span>节点可以间歇性接入网络，可以改变IP地址；</span></p></li><li><p><span>每个主机既可以提供服务，也可以请求服务。</span></p></li><li><p><span>优点：可扩展性好（可应对大量主机突然加入的情况）；网络健壮性强（不会出现服务器损坏、网络停止运行的情况）。</span></p></li></ol><p>&nbsp;</p><h2 id='6-2-应用层的应用'><span>6-2 应用层的应用</span></h2><h3 id='6-21-dns域名解析系统）'><span>6-2.1 DNS（域名解析系统）</span></h3><h4 id='1dns系统简介'><span>1、DNS系统简介</span></h4><p><span>我们可以依靠IP地址寻找网站，但只依靠IP地址显然不现实，而且也很难实现搜索引擎等功能（不知道目标的IP）。所以使用域名来方便记忆与使用，比如</span><a href='http://www.123.com' target='_blank' class='url'>www.123.com</a><span>显然是比ip地址更易记忆的。</span></p><p><span>模型：输入域名——传至DNS服务器，将域名经过解析变为IP地址——访问到目标网站。</span></p><h4 id='2域名与域名服务器'><span>2、域名与域名服务器</span></h4><p><span>域名不区分大小写，可以使用的标点有点号、斜杠和短横线。</span></p><p><span>以</span><a href='http://www.123.com' target='_blank' class='url'>www.123.com</a><span>为例，最前面的www是三级域名，123是二级域名，com是顶级域名。另外，实际上还有一个概念叫做“根”，是指com后面被隐藏了的一个点号。</span></p><ul><li><p><span>顶级域名：国家顶级域名（cn、us、uk），通用顶级域名（com、net、org、gov、int国际组织、aero航空相关、museum、travel），基础结构域名与反向域名（仅有arpa一个，用于从IP地址反向解析为域名）。</span></p></li><li><p><span>二级域名：类别域名（ac、com、edu、gov、mil、net、org），次级行政区域名（各省、自治区、直辖市等，bj、js）。可以与顶级域名相互补充，如123.com.cn等。</span></p></li><li><p><span>三级域名：mail、www、ftp等，或者nju、pku等。</span></p></li><li><p><span>四级域名：mail、www、ftp等。</span></p></li></ul><p><span>可以用域名树来表示域名：</span></p><p><img src="计算机网络学习笔记.assets/image-20220624215250305.png" alt="image-20220624215250305" style="zoom:12%;" /></p><p><span>域名服务器的层次划分与此类似。</span></p><p><img src="计算机网络学习笔记.assets/image-20220624215355050.png" alt="image-20220624215355050" style="zoom:60%;" /></p><h4 id='3域名的解析过程'><span>3、域名的解析过程</span></h4><ol start='' ><li><p><span>首先，（如果主机本身没有相应信息）IP地址会发给本地域名服务器（通常最近）。</span></p></li><li><p><span>如果本地域名服务器中没有相应内容，会去询问根域名服务器，它知道每个顶级域名服务器的信息。</span></p><ol start='' ><li><p><span>迭代查询（靠自己，是爹）：根域名此时将对应的顶级域名信息发送给本地域名服务器。后面不断重复，由本地域名服务器不断查询，直到查到为止。</span></p></li><li><p><span>递归查询（靠别人，是弟弟）：此时，根域名服务器继续往下查询，然后返回信息。查询顺序是本地 - 根 - 顶级 - 权限，返回顺序是权限 - 顶级 - 根 - 本地。</span></p></li></ol></li><li><p><span>图中的权限域名服务器是有内部结构的，而非单一的一层。如：123.com和456.123.com中，456和123都是权限域名服务器，一级找不到可以继续往下找。</span></p></li></ol><p><img src="计算机网络学习笔记.assets/image-20220624220714966.png" alt="image-20220624220714966" style="zoom:19%;" /></p><p><span>DNS服务器会将查询过的IP——域名映射存放在高速缓存区。另外，如果只有顶级域名部分是已知的，那么就可以直接开始查询权限域名服务器。</span></p><p><span>高速缓存的内容会定时动态更新，并设有定时器机制。主机中也有高速缓存，会向本地域名服务器下载这些数据。所以，实际上最先查询的是本机。</span></p><p>&nbsp;</p><h3 id='6-22-ftp文件传送）协议'><span>6-2.2 FTP（文件传送）协议</span></h3><h4 id='1ftp协议'><span>1、FTP协议</span></h4><p><span>实际上，常说的FTP包含两种协议：文件传送协议FTP（File Transfer Protocol）与简单文件传送协议TFTP（Trivial FTP）。后者非常简单，所以主要介绍前者。</span></p><p><span>FTP传输模式有文本模式（ASCII模式，以文本序列传输数据）和二进制模式（Binary模式，以二进制序列传输数据）。</span></p><ol start='' ><li><p><span>FTP提供不同种类主机系统（硬软件体系等都可以不同）之间的文件传输能力，主要是主机和服务器间数据的双向拷贝。</span></p></li><li><p><span>FTP协议基于客户/服务器（C/S）模型，使用TCP实现可靠传输。</span></p></li><li><p><span>使用过程：一般是输入ftp地址、用户名和密码后登陆，也有“匿名登录”（以匿名身份登陆），不需要登录注册就可以下载，可以提高效率。</span></p></li></ol><p><span>FTP服务器的进程分为一个主进程和n个从属进程，每个从属进程被主进程分配，可能会分配控制进程和数据传输进程给一个任务，分别建立控制连接和数据连接。</span></p><h4 id='2工作原理'><span>2、工作原理</span></h4><p><img src="计算机网络学习笔记.assets/image-20220624222044252.png" alt="image-20220624222044252" style="zoom:18%;" /></p><p><span>控制连接传送请求，使用21端口，在连接中始终打开、保持连接；</span></p><p><span>数据连接传送数据，使用20端口，根据文件传送选择开闭。注意，此端口并非一定是20，而是由传输方式决定。如果是主动传输就是20，被动传输是服务器端和客户端协商决定（端口&gt;1024）。</span></p><p><span>两者是分开的，所以说FTP的控制信息是带外传送的。</span></p><p><span>连接过程：</span></p><ul><li><p><span>主动传输模式PORT：客户端向服务器建立控制连接，服务器向客户端建立数据连接。</span></p><ol start='' ><li><p><span>FTP客户端从任意非特殊端口N（N &gt;1024）连入到服务器的命令端口——21端口。</span></p></li><li><p><span>客户端在N+1端口监听，并且通过该N+1端口发送PORT命令给FTP服务器，接着服务器会从它自己的数据端口（20）连接到客户端指定的数据端口（N+1）。</span></p></li><li><p><span>此过程中，N和21是命令端口，而N+1和20是数据端口。</span></p></li></ol></li><li><p><span>被动传输模式PASV：客户端向服务器发起一个用于数据传输的连接，客户端的连接端口是发起这个数据连接请求时使用的端口。</span></p><ol start='' ><li><p><span>FTP客户端从任意非特殊端口N（N &gt;1024）连入到服务器的命令端口——21端口，同时会开启N+1号端口，然后向服务器提交 PASV命令，通知服务器自己处于被动模式。</span></p></li><li><p><span>服务器收到命令后，开启一个任意的非特权端口P监听，并发送PORT P命令给客户端，通知自己的数据端口是P。然后客户端通过本地端口N+1连接到服务器的端口P的连接用来传送数据。</span></p></li></ol></li></ul><p><span>总结：主动与被动说的是服务器。它们控制链路建立的方法一样，但数据链路的方法不同。</span></p><ul><li><p><span>主动模式：客户端建立连接。之后，服务器向客户端敲门，然后客户端开门；</span></p></li><li><p><span>被动模式：客户端建立连接。之后，客户端向服务器敲门，然后服务器开门。</span></p></li></ul><p><span>如果通过代理上网的话，就不能用主动模式，因为服务器敲的是上网代理服务器的门，而不是敲客户端的门。</span></p><p>&nbsp;</p><h3 id='6-23-电子邮件'><span>6-2.3 电子邮件</span></h3><h4 id='1电子邮件的机制'><span>1、电子邮件的机制</span></h4><p><span>一封电子邮件分为信封和内容。其大致框架如下：</span></p><p><img src="计算机网络学习笔记.assets/image-20220625105456510.png" alt="image-20220625105456510" style="zoom:67%;" /></p><p><span> 电子邮件系统的简略图如下，实际上分为了用户方、协议和服务器方三个部分： </span></p><p><img src="计算机网络学习笔记.assets/image-20220625110913557.png" referrerpolicy="no-referrer" alt="image-20220625110913557"></p><h4 id='2相关协议------smtp'><span>2、相关协议——SMTP</span></h4><p><span>由上面的图可以看出，发送需要的协议是SMTP，收件协议是POP3、IMAP。具体过程是：接收方从接收邮件服务器中取得邮件使用POP3，其他部分都是SMTP，即简单邮件传输协议。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625133849981.png" alt="image-20220625133849981" style="zoom:16%;" /></p><p><span>SMTP协议建立于TCP协议之上，端口号为25，使用C/S模型，但双方可以互换角色。</span></p><p><span>SMTP规定了在两个相互通信的SMTP进程之间应如何交换信息。负责发送邮件的SMTP进程就是SMTP客户，负责接收邮件的进程就是SMTP服务器。</span></p><p><span>SMTP规定了14条命令（几个字母）和21种应答信息（三位数字代码+简单文字说明）。</span></p><p><span>SMTP协议有三个过程：</span></p><ol start='' ><li><p><span>连接建立：首先邮件发送给发送方邮件服务器（放入缓存中）。然后，两个服务器建立TCP连接（请求，ACK（220 Service ready），Hello命令）。发送Hello命令后，SMTP服务器若有能力接收邮件，回答“250 OK”；否则，回答“421 Service not available”。</span></p></li><li><p><span>邮件发送：这个过程中，会有多个步骤的询问，失败会返回各种数字，成功则为250或者354（SMTP服务器同意传输）。不做详细要求，具体步骤如下所示（RCPT指收件人）。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625135406380.png" referrerpolicy="no-referrer" alt="image-20220625135406380"></p></li><li><p><span>连接释放：邮件发完，SMTP客户发送QUIT命令，SMTP服务器返回“221”，表示同意释放TCP连接。</span></p></li></ol><h4 id='3相关协议------mime'><span>3、相关协议——MIME</span></h4><p><span>SMTP的缺点：</span></p><ol start='' ><li><p><span>SMTP不能传送可执行文件或者其他二进制对象。</span></p></li><li><p><span>SMTP仅限于传送7位ASCII码，不能传送其他非英语国家的文字。</span></p></li><li><p><span>SMTP服务器会拒绝超过一定长度的邮件。</span></p></li></ol><p><span>不能发送其他文字是令人难以接受的，所以提出了MIME（多用途互联网邮件扩展类型）协议，用语和SMTP协议互相补充。工作原理是：</span></p><p><img src="计算机网络学习笔记.assets/image-20220625135949725.png" alt="image-20220625135949725" style="zoom: 15%;" /></p><p><span>MIME使电子邮件系统可以支持声音、图像、视频、多种国家语言等等，所以现在MIME也被用于浏览器。</span></p><h4 id='4相关协议------pop3与imap'><span>4、相关协议——POP3与IMAP</span></h4><p><span>POP3协议，即邮局协议第3版，用于接收方从接收端邮件服务器下载邮件，并可选择保存于服务器或是删除。</span></p><p><span>POP协议建立于TCP的基础上，端口号110，使用C/S模型。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625140347009.png" alt="image-20220625140347009" style="zoom:67%;" /></p><p><span>由于POP3协议功能少、难以满足实际需要，于是又产生了IMAP协议，即网际报文存取协议，可交互是其特点。IMAP协议和POP3协议的使用时机相同。</span></p><p><span>IMAP协议中，当用户主机上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到邮箱的首部；若用户需要打开某个邮件，该邮件才上传到用户的计算机上。</span></p><p><span>IMAP可以让用户在不同的地方使用不同的计算机随时上网阅读处理邮件，还允许只读取邮件中的某一个部分，如可以先看正文再看附件。</span></p><h4 id='5基于万维网的电子邮件'><span>5、基于万维网的电子邮件</span></h4><p><img src="计算机网络学习笔记.assets/image-20220625140848481.png" referrerpolicy="no-referrer" alt="image-20220625140848481"></p><p><span>这是现在最广泛使用的方式，使用SMTP协议和HTTP协议。</span></p><p>&nbsp;</p><h3 id='6-24-万维网'><span>6-2.4 万维网</span></h3><h4 id='1万维网概述'><span>1、万维网概述</span></h4><p><span>万维网WWW（World Wide Web）是一个大规模的、联机式的信息储藏所/资料空间，是无数个网络站点和网页的集合。使用C/S模型，用户使用的浏览器就是万维网客户程序，在文档所驻留的主机上运行服务器程序。</span></p><p><span>万维网使用统一资源定位符URL来唯一标识万维网中的资源，URL不区分大小写。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625141337726.png" referrerpolicy="no-referrer" alt="image-20220625141337726"></p><p><span>用户通过点击超链接（如</span><a href='http://www.baidu.com' target='_blank' class='url'>http://www.baidu.com</a><span>）获取资源，这些资源通过超文本传输协议（HTTP）传送给使用者。</span></p><p><span>为了使用户开发的各不相同的网页可以统一于WWW中，万维网使用统一的HTML（超文本标记语言）。</span></p><h4 id='2http协议的特点'><span>2、HTTP协议的特点</span></h4><p><span>简单来说，HTTP协议定义了浏览器（客户进程）怎样向服务器请求文档，以及服务器怎样把文档传送给浏览器。</span></p><p><span>用户想访问一个页面，可以输入URL，或者是点击一个超链接（本质都是使用URL）。</span></p><p><span>传输过程：简单来说，就是建立连接、请求文档、响应文档、释放连接。具体过程是：</span></p><ol start='' ><li><p><span>浏览器分析URL，向DNS服务器请求解析IP地址；</span></p></li><li><p><span>DNS服务器解析出IP地址；</span></p></li><li><p><span>浏览器与服务器建立TCP连接，之后发出取文件命令；</span></p></li><li><p><span>服务器响应，发送文件；</span></p></li><li><p><span>释放TCP连接；</span></p></li><li><p><span>浏览器显示，可以只下载文本部分，其他资源可以重复上述命令。</span></p></li></ol><p><span>HTTP协议的特点：</span></p><ul><li><p><span>无状态：或称是无记忆的。第一次访问和第N次访问，响应是相同的。</span></p></li><li><p><span>可靠性，但无连接：HTTP采用TCP作为运输层协议，但HTTP协议本身是无连接的（通信双方在交换HTTP报文之前不需要先建立HTTP连接，只是需要建立TCP连接）。</span></p></li></ul><p><span>记忆性的实现可以通过Cookies：它是存储在用户主机中的文本文件，记录一段时间内某用户（使用识别码）的访问记录。Cookies可以提供个性化服务，如“记住登录”等。</span></p><h4 id='3http协议的连接方式'><span>3、HTTP协议的连接方式</span></h4><p><img src="计算机网络学习笔记.assets/image-20220625153710119.png" alt="image-20220625153710119" /></p><p><span>下面的左图为非持久连接和持久连接。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625153905469.png" alt="image-20220625153905469" style="zoom:15%;" /><img src="计算机网络学习笔记.assets/image-20220625153923257.png" alt="image-20220625153923257" style="zoom:13.88%;" /></p><ul><li><p><span>非持久：3次握手，发送文档后断开，后续重新握手。</span></p></li><li><p><span>持久：3次握手，可以持续维持请求 - 回应状态。分为两种情况：</span></p><ul><li><p><span>流水线式：可以一次性发送很多请求，类似滑动窗口（GBN和SR）协议。</span></p></li><li><p><span>非流水线：如右图所示，每次请求必须收到回应后才可以发送下个请求，类似于SW停等协议。</span></p></li></ul></li></ul><h4 id='4报文结构'><span>4、报文结构</span></h4><p><span>HTTP有两种报文：请求报文和响应报文。HTTP报文是面向文本的，所以每个字段都是ASCII码串。</span></p><p><img src="计算机网络学习笔记.assets/image-20220625154908853.png" alt="image-20220625154908853" style="zoom:18%;" /></p><p><span>如这样的一个请求报文，就只有请求行、：</span></p><p><img src="计算机网络学习笔记.assets/image-20220625155241365.png" referrerpolicy="no-referrer" alt="image-20220625155241365"></p><p><span>可以利用第一行（开始行）来区分HTTP报文的种类。首部字段可以有多行，也可以不使用。CRLF是回车换行。</span></p><blockquote><p><span>状态码：一共33种。</span></p><ul><li><p><span>1xx表示通知信息：请求收到了或正在处理。</span></p></li><li><p><span>2xx表示成功：接受或知道了，如202 Accepted。</span></p></li><li><p><span>3xx表示重定向：要完成请求还必须采取进一步的行动，如301 Moved Permanently表重定向，会发回新的URL。</span></p></li><li><p><span>4xx表示客户的差错：请求中有错误的语法或不能完成，如404 Not Found。</span></p></li><li><p><span>5xx表示服务器的差错：服务器失效无法完成请求。</span></p></li></ul></blockquote><h1 id='chapter-a-附录'><span>Chapter A 附录</span></h1><h2 id='a-1-协议总结'><span>A-1 协议总结</span></h2><figure class='table-figure'><table><thead><tr><th><span>英文缩写</span></th><th><span>中文名</span></th><th><span>英文名</span></th><th><span>所在层</span></th><th><span>功能描述</span></th><th><span>备注</span></th></tr></thead><tbody><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></tbody></table></figure><p>&nbsp;</p></div></div>
</body>
</html>